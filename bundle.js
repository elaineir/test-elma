(()=>{"use strict";const e="assignByDate",t={parentSelector:".backlog__tasks-container",templateSelector:".template-card-backlog",elementSelector:".card-backlog",titleSelector:".card-backlog__title",descriptionSelector:".card-backlog__description",startDateSelector:".card-backlog__date-span_start",endDateSelector:".card-backlog__date-span_end",dragStartClass:"card-backlog_draggable"},a={parentSelector:".board__users",templateSelector:".template-card-user",elementSelector:".card-user",userNameSelector:".card-user__name",dragOverClass:"card-user_drag-over"},s={parentSelector:".board__dates",templateSelector:".template-calendar-date",elementSelector:".calendar-date",currentDayClass:"calendar-date_current"},r={parentSelector:".board__calendar",templateSelector:".template-calendar-column",elementSelector:".calendar-column"},l={templateSelector:".template-calendar-cell",elementSelector:".calendar-cell",elementClass:"calendar-cell",dragOverClass:"calendar-cell_drag-over"},n={templateSelector:".template-calendar-task",elementSelector:".calendar-task",elementClass:"calendar-task",titleSelector:".calendar-task__title",subtitleSelector:".calendar-task__subtitle",descriptionSelector:".calendar-task__description",startDateSelector:".calendar-task__date-span_start",endDateSelector:".calendar-task__date-span_end"},c="ru-RU",i={weekday:"short",year:"numeric",month:"short",day:"numeric"},d={day:"numeric",month:"numeric"},o="isThemeDark",h=e=>new Date(e).toLocaleDateString(c,i),_=e=>new Date(e).toLocaleDateString("en-CA"),u=new class{constructor(){this._subscribers=[],this._assignedTasks=[],this._backlogTasks=[],this._users=[],this._usersIds={},this._calendarLength=7,this._currentDate=new Date,this._currentDateNumeric=_(new Date),this._startDay=this._updateAndSetDates()}_removeTaskFromBacklog(e){this._backlogTasks=this._backlogTasks.filter((t=>t.id!==e))}_callSubscribers(){this._subscribers.forEach((e=>e()))}_updateAndSetDates(){const e=new Date(this._currentDate.setHours(0,0,0,0));return e.setDate(e.getDate()-e.getDay()+(0===e.getDay()?-6:1))}get assignedTasks(){return this._assignedTasks}get backlogTasks(){return this._backlogTasks}get usersIds(){return this._usersIds}set users(e){this._users=e}get users(){return this._users}get calendarLength(){return this._calendarLength}get startDay(){return this._startDay}set startDay(e){this._startDay=e}get currentDateNumeric(){return this._currentDateNumeric}addTaskToAssignedTasks(e){this._assignedTasks.push(e)}assignTask({type:t,taskId:a,executorId:s,startDate:r}){const l=this._backlogTasks.find((e=>a===e.id));if(l.executor=+s,t===e){if(this._currentDate>Date.parse(r))return;if(l.planEndDate===l.planStartDate)l.planEndDate=r;else{const e=Date.parse(l.planEndDate)-Date.parse(l.planStartDate),t=Date.parse(r)+e;l.planEndDate=_(t)}l.planStartDate=r}this.addTaskToAssignedTasks(l),this._removeTaskFromBacklog(a),this._callSubscribers()}addTaskToBacklog(e){this._backlogTasks.push(e)}mapUsersIds(e){const t=e.reduce(((e,{id:t},a)=>({...e,[a]:t})),{});this._usersIds={...t}}addSubscribers(e){this._subscribers=[...e]}},m=async e=>{return(t=await fetch(`https://varankin_dev.elma365.ru/api/extensions/2a38760e-083a-4dd0-aebc-78b570bfd3c7/script${e}`,{method:"GET"})).ok?t.json():Promise.reject(t);var t},p=class{constructor({templateSelector:e,elementSelector:t}){this._templateSelector=e,this._elementSelector=t}_getTemplate(){return this._template=document.querySelector(this._templateSelector).content,this._template.querySelector(this._elementSelector).cloneNode(!0)}},g=class extends p{constructor(e,{templateSelector:t,elementSelector:a,titleSelector:s,descriptionSelector:r,startDateSelector:l,endDateSelector:n,dragStartClass:c}){super({templateSelector:t,elementSelector:a}),this._cardData=e,this._backlogCard=super._getTemplate(),this._dragStartClass=c,this._cardTitle=this._backlogCard.querySelector(s),this._cardDescription=this._backlogCard.querySelector(r),this._cardStartDate=this._backlogCard.querySelector(l),this._cardEndDate=this._backlogCard.querySelector(n),this._handleDragStart=this._handleDragStart.bind(this),this._handleDragEnd=this._handleDragEnd.bind(this)}_handleDragStart(e){this._backlogCard.classList.add(this._dragStartClass),e.dataTransfer.setData("text/plain",this._cardData.id),e.dataTransfer.effectAllowed="move"}_handleDragEnd(){this._backlogCard.classList.remove(this._dragStartClass)}createElement(){return this._cardTitle.textContent=this._cardData.subject,this._cardDescription.textContent=this._cardData.description,this._cardStartDate.textContent=h(this._cardData.planStartDate),this._cardEndDate.textContent=h(this._cardData.planEndDate),this._backlogCard.setAttribute("id",this._cardData.id),this._backlogCard}setEventListeners(){this._backlogCard.addEventListener("dragstart",this._handleDragStart),this._backlogCard.addEventListener("dragend",this._handleDragEnd)}},S=class{constructor(e){this._container=document.querySelector(e),this.clearItems=this.clearItems.bind(this)}addItem(e){this._container.append(e)}clearItems(){this._container.textContent=""}addTextContent(e){this._container.textContent=e}},D=class extends p{constructor(e,{templateSelector:t,elementSelector:a,titleSelector:s,subtitleSelector:r,descriptionSelector:l,startDateSelector:n,endDateSelector:c}){super({templateSelector:t,elementSelector:a}),this._task=e,this._taskElement=super._getTemplate(),this._titleELement=this._taskElement.querySelector(s),this._subtitleELement=this._taskElement.querySelector(r),this._descriptionElement=this._taskElement.querySelector(l),this._startDateElement=this._taskElement.querySelector(n),this._endDateElement=this._taskElement.querySelector(c)}createElement(){return this._titleELement.textContent=this._task.subject,this._subtitleELement.textContent=this._task.subject,this._descriptionElement.textContent=this._task.description,this._startDateElement.textContent=h(this._task.planStartDate),this._endDateElement.textContent=h(this._task.planEndDate),this._taskElement}},k=class extends p{constructor(e,{templateSelector:t,elementSelector:a}){super({templateSelector:t,elementSelector:a}),this._cell=e,this._cellElement=super._getTemplate()}_addItem(e){this._cellElement.append(e)}createElement(){return this._cellElement.setAttribute("data-executor",this._cell.executor),this._cellElement.setAttribute("data-date",this._cell.date),this._cellElement}renderItems(){this._cell.tasks.forEach((e=>{const t=new D(e,n);this._addItem(t.createElement())}))}},b=class extends p{constructor(e,{templateSelector:t,elementSelector:a}){super({templateSelector:t,elementSelector:a}),this._column=e,this._calendarColumn=super._getTemplate(),this._dayTasksSchema={}}_getTasksForCurrentDay(e){const t=Date.parse(this._column.date);return e.filter((e=>Date.parse(e.planStartDate)<=t&&t<=Date.parse(e.planEndDate)))}_getDayTasksSchema(){this._tasksForCurrentDay=this._getTasksForCurrentDay(u.assignedTasks),this._tasksForCurrentDay&&this._tasksForCurrentDay.forEach((e=>{this._dayTasksSchema[e.executor]?this._dayTasksSchema[e.executor]=[...this._dayTasksSchema[e.executor],e]:this._dayTasksSchema[e.executor]=[e]}))}createCells(){this._getDayTasksSchema();for(let e=0;e<u.users.length;e+=1){const t=u.usersIds[e],a=new k({executor:t,date:this._column.date,tasks:this._dayTasksSchema[t]??[]},l),s=a.createElement();a.renderItems(),this.addItem(s)}}createElement(){return this.createCells(),this._calendarColumn}addItem(e){this._calendarColumn.append(e)}},C=class extends p{constructor({date:e},{templateSelector:t,elementSelector:a,currentDayClass:s}){super({templateSelector:t,elementSelector:a}),this._date=e,this._currentDayClass=s,this._dateElement=super._getTemplate()}createElement(){const e=new Date(this._date);return this._dateElement.textContent=new Date(e).toLocaleDateString(c,d),this._date===u.currentDateNumeric&&this._dateElement.classList.add(this._currentDayClass),this._dateElement}},E=class extends p{constructor(e,{templateSelector:t,elementSelector:a,userNameSelector:s,dragOverClass:r}){super({templateSelector:t,elementSelector:a}),this._cardData=e,this._userCard=super._getTemplate(),this._fullNameElement=this._userCard.querySelector(s),this._dragOverClass=r,this._handleDragOver=this._handleDragOver.bind(this),this._handleDragLeave=this._handleDragLeave.bind(this),this._handleDrop=this._handleDrop.bind(this)}_handleDragOver(e){e.dataTransfer&&"text/plain"===e.dataTransfer.types[0]&&(e.preventDefault(),this._userCard.classList.add(this._dragOverClass))}_handleDragLeave(){this._userCard.classList.remove(this._dragOverClass)}_handleDrop(e){e.preventDefault();const t=e.dataTransfer.getData("text/plain");u.assignTask({type:"assignByUser",taskId:t,executorId:this._cardData.id}),this._handleDragLeave()}createCard(){return this._fullNameElement.textContent=`${this._cardData.firstName} ${this._cardData.surname}`,this._userCard}setEventListeners(){this._userCard.addEventListener("dragover",this._handleDragOver),this._userCard.addEventListener("dragleave",this._handleDragLeave),this._userCard.addEventListener("drop",this._handleDrop)}},y=e=>{setTimeout((()=>{e.removeAttribute("style")}),1100)},v=(e,t,a)=>{t<=a&&(e.setAttribute("style",`animation: slide-in-bottom-up 0.5s ease-out 0.${t}s forwards; opacity: 0;`),y(e))},T=document.querySelector(".page"),L=document.querySelector(".preloader"),f=new class{constructor(e){this._selectors=e,this._popup=document.querySelector(e.popupError)}open(){this._popup.classList.add(this._selectors.popupOpenClass),this._close()}_close(){setTimeout((()=>{this._popup.classList.remove(this._selectors.popupOpenClass)}),3e3)}}({popupError:".popup_error",popupOpenClass:"popup_open"}),x=new S(t.parentSelector),I=new S(a.parentSelector),w=new S(s.parentSelector),q=new class extends S{constructor(e){super(e),this._handleDragOver=this._handleDragOver.bind(this),this._handleDragLeave=this._handleDragLeave.bind(this),this._handleDrop=this._handleDrop.bind(this)}_handleDragOver(e){const{target:t}=e;e.dataTransfer&&"text/plain"===e.dataTransfer.types[0]&&(t.classList.contains(l.elementClass)||t.classList.contains(n.elementClass))&&(e.preventDefault(),this._droppableCell=t.closest(l.elementSelector),this._droppableCell.classList.add(l.dragOverClass))}_handleDragLeave(){this._droppableCell.classList.remove(l.dragOverClass)}_handleDrop(t){t.preventDefault();const a=t.dataTransfer.getData("text/plain");u.assignTask({type:e,taskId:a,executorId:this._droppableCell.dataset.executor,startDate:this._droppableCell.dataset.date}),this._handleDragLeave()}setEventListeners(){this._container.addEventListener("dragover",this._handleDragOver),this._container.addEventListener("dragleave",this._handleDragLeave),this._container.addEventListener("drop",this._handleDrop)}}(r.parentSelector);q.setEventListeners();const O=(e,t,a,s)=>{for(let n=0;n<u.calendarLength;n+=1){const c=u.startDay+864e5*n,i=new e({date:_(c)},a).createElement();s&&(r=i,(l=n)<=u.calendarLength-1&&(r.setAttribute("style",`animation: slide-in-right-left 0.5s ease-out 0.${l}s forwards; opacity: 0;`),y(r))),t.addItem(i)}var r,l},N=e=>O(C,w,s,e),A=e=>O(b,q,r,e),F=e=>{const a=new g(e,t),s=a.createElement();return a.setEventListeners(),s},j=e=>{u.backlogTasks.forEach(((t,a)=>{const s=F(t);e&&v(s,a,6),x.addItem(s)}))};(async()=>{try{const e=await m("/users");(await m("/tasks")).forEach((e=>{e.executor?u.addTaskToAssignedTasks(e):u.addTaskToBacklog(e)})),u.users=e,u.mapUsersIds(e),((e,t)=>{e.forEach(((e,t)=>{const s=new E(e,a),r=s.createCard();v(r,t,4),s.setEventListeners(),I.addItem(r)}))})(e),N(!0),A(!0),j(!0)}catch(e){f.open()}T.classList.remove("page_hidden"),L.classList.remove("preloader_visible")})(),((e,t,a)=>{const s=document.querySelector(".search-form"),r=s.querySelector(".search-form__input"),l=s.querySelector(".button_search");s.addEventListener("submit",(s=>{s.preventDefault();const n=r.value;let c;n.length&&(c=u.backlogTasks.filter((e=>e.subject.toLowerCase().includes(n.toLowerCase()))),e.clearItems(),c.length?c.forEach((a=>{const s=t(a);e.addItem(s)})):(e.addTextContent("Ничего не нашлось"),l.disabled=!0,setTimeout((()=>{e.clearItems(),a(),l.disabled=!1}),3e3)))}))})(x,F,j),((e,t,a,s)=>{const r=document.querySelector(".button_next"),l=document.querySelector(".button_prev");r.addEventListener("click",(()=>{e(),t(),u.startDay+=6048e5,a(),s()})),l.addEventListener("click",(()=>{e(),t(),u.startDay-=6048e5,a(),s()}))})(q.clearItems,w.clearItems,N,A),(({bodySelector:e,bodyNewThemeClass:t,buttonSelector:a})=>{const s=document.querySelector(e),r=document.querySelector(a);JSON.parse(localStorage.getItem(o))&&s.classList.add(t),r.addEventListener("click",(()=>{s.classList.contains(t)?(s.classList.remove(t),localStorage.setItem(o,JSON.stringify(!1))):(s.classList.add(t),localStorage.setItem(o,JSON.stringify(!0)))}))})({bodySelector:".body",bodyNewThemeClass:"body_theme_dark",buttonSelector:".button_theme",buttonNewThemeClass:"button_theme_dark"}),u.addSubscribers([q.clearItems,x.clearItems,A,j])})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFzQjBOLEtBQUtJLFdBQVUsU04wR2hFLENiNUhtQyxDQUNqQ1QsYUFBYyxRQUNkQyxrQkFBbUIsa0JBQ25CQyxlQUFnQixnQkFDaEJRLG9CQUFxQixzQmEySHZCLGlCQUE0QixDQUMxQnBELEVBQWtCbEUsV0FDbEIrRCxFQUFZL0QsV0FDWitFLEVBQ0FJLEsiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90ZXN0LWVsbWEvLi9zcmMvc3RhdGUvdHlwZXMuanMiLCJ3ZWJwYWNrOi8vdGVzdC1lbG1hLy4vc3JjL2NvbmZpZy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vdGVzdC1lbG1hLy4vc3JjL3V0aWxzL2hhbmRsZS1kYXRlcy5qcyIsIndlYnBhY2s6Ly90ZXN0LWVsbWEvLi9zcmMvc3RhdGUvUHJvamVjdFN0YXRlLmpzIiwid2VicGFjazovL3Rlc3QtZWxtYS8uL3NyYy9hcGkvbWFpbi1hcGkuanMiLCJ3ZWJwYWNrOi8vdGVzdC1lbG1hLy4vc3JjL2NvbXBvbmVudHMvQ29tcG9uZW50LmpzIiwid2VicGFjazovL3Rlc3QtZWxtYS8uL3NyYy9jb21wb25lbnRzL0JhY2tsb2dDYXJkLmpzIiwid2VicGFjazovL3Rlc3QtZWxtYS8uL3NyYy9jb21wb25lbnRzL1JlbmRlcmVyU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly90ZXN0LWVsbWEvLi9zcmMvY29tcG9uZW50cy9DYWxlbmRhclRhc2suanMiLCJ3ZWJwYWNrOi8vdGVzdC1lbG1hLy4vc3JjL2NvbXBvbmVudHMvQ2FsZW5kYXJDZWxsLmpzIiwid2VicGFjazovL3Rlc3QtZWxtYS8uL3NyYy9jb21wb25lbnRzL0NhbGVuZGFyQ29sdW1uLmpzIiwid2VicGFjazovL3Rlc3QtZWxtYS8uL3NyYy9jb21wb25lbnRzL0NhbGVuZGFyRGF0ZS5qcyIsIndlYnBhY2s6Ly90ZXN0LWVsbWEvLi9zcmMvY29tcG9uZW50cy9Vc2VyQ2FyZC5qcyIsIndlYnBhY2s6Ly90ZXN0LWVsbWEvLi9zcmMvdXRpbHMvYXBwbHktc3R5bGUtYW5pbWF0aW9uLmpzIiwid2VicGFjazovL3Rlc3QtZWxtYS8uL3NyYy9hcHAuanMiLCJ3ZWJwYWNrOi8vdGVzdC1lbG1hLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBFcnJvci5qcyIsIndlYnBhY2s6Ly90ZXN0LWVsbWEvLi9zcmMvY29tcG9uZW50cy9DYWxlbmRhci5qcyIsIndlYnBhY2s6Ly90ZXN0LWVsbWEvLi9zcmMvY29uZmlnL2NvbmZpZy5qcyIsIndlYnBhY2s6Ly90ZXN0LWVsbWEvLi9zcmMvdXRpbHMvc2VhcmNoLmpzIiwid2VicGFjazovL3Rlc3QtZWxtYS8uL3NyYy91dGlscy9zd2l0Y2gtYmV0d2Vlbi13ZWVrcy5qcyIsIndlYnBhY2s6Ly90ZXN0LWVsbWEvLi9zcmMvdXRpbHMvdG9nZ2xlLWNvbG9yLXRoZW1lLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBBU1NJR05fQllfVVNFUiA9ICdhc3NpZ25CeVVzZXInO1xuZXhwb3J0IGNvbnN0IEFTU0lHTl9CWV9EQVRFID0gJ2Fzc2lnbkJ5RGF0ZSc7XG4iLCJleHBvcnQgY29uc3QgdG9nZ2xlVGhlbWVTZXR0aW5ncyA9IHtcbiAgYm9keVNlbGVjdG9yOiAnLmJvZHknLFxuICBib2R5TmV3VGhlbWVDbGFzczogJ2JvZHlfdGhlbWVfZGFyaycsXG4gIGJ1dHRvblNlbGVjdG9yOiAnLmJ1dHRvbl90aGVtZScsXG4gIGJ1dHRvbk5ld1RoZW1lQ2xhc3M6ICdidXR0b25fdGhlbWVfZGFyaycsXG59O1xuXG5leHBvcnQgY29uc3QgYmFja2xvZ0NhcmRTZWxlY3RvcnMgPSB7XG4gIHBhcmVudFNlbGVjdG9yOiAnLmJhY2tsb2dfX3Rhc2tzLWNvbnRhaW5lcicsXG4gIHRlbXBsYXRlU2VsZWN0b3I6ICcudGVtcGxhdGUtY2FyZC1iYWNrbG9nJyxcbiAgZWxlbWVudFNlbGVjdG9yOiAnLmNhcmQtYmFja2xvZycsXG4gIHRpdGxlU2VsZWN0b3I6ICcuY2FyZC1iYWNrbG9nX190aXRsZScsXG4gIGRlc2NyaXB0aW9uU2VsZWN0b3I6ICcuY2FyZC1iYWNrbG9nX19kZXNjcmlwdGlvbicsXG4gIHN0YXJ0RGF0ZVNlbGVjdG9yOiAnLmNhcmQtYmFja2xvZ19fZGF0ZS1zcGFuX3N0YXJ0JyxcbiAgZW5kRGF0ZVNlbGVjdG9yOiAnLmNhcmQtYmFja2xvZ19fZGF0ZS1zcGFuX2VuZCcsXG4gIGRyYWdTdGFydENsYXNzOiAnY2FyZC1iYWNrbG9nX2RyYWdnYWJsZScsXG59O1xuXG5leHBvcnQgY29uc3QgdXNlcnNDYXJkU2VsZWN0b3JzID0ge1xuICBwYXJlbnRTZWxlY3RvcjogJy5ib2FyZF9fdXNlcnMnLFxuICB0ZW1wbGF0ZVNlbGVjdG9yOiAnLnRlbXBsYXRlLWNhcmQtdXNlcicsXG4gIGVsZW1lbnRTZWxlY3RvcjogJy5jYXJkLXVzZXInLFxuICB1c2VyTmFtZVNlbGVjdG9yOiAnLmNhcmQtdXNlcl9fbmFtZScsXG4gIGRyYWdPdmVyQ2xhc3M6ICdjYXJkLXVzZXJfZHJhZy1vdmVyJyxcbn07XG5cbmV4cG9ydCBjb25zdCBjYWxlbmRhckRhdGVTZWxlY3RvcnMgPSB7XG4gIHBhcmVudFNlbGVjdG9yOiAnLmJvYXJkX19kYXRlcycsXG4gIHRlbXBsYXRlU2VsZWN0b3I6ICcudGVtcGxhdGUtY2FsZW5kYXItZGF0ZScsXG4gIGVsZW1lbnRTZWxlY3RvcjogJy5jYWxlbmRhci1kYXRlJyxcbiAgY3VycmVudERheUNsYXNzOiAnY2FsZW5kYXItZGF0ZV9jdXJyZW50Jyxcbn07XG5cbmV4cG9ydCBjb25zdCBjYWxlbmRhckNvbHVtblNlbGVjdG9ycyA9IHtcbiAgcGFyZW50U2VsZWN0b3I6ICcuYm9hcmRfX2NhbGVuZGFyJyxcbiAgdGVtcGxhdGVTZWxlY3RvcjogJy50ZW1wbGF0ZS1jYWxlbmRhci1jb2x1bW4nLFxuICBlbGVtZW50U2VsZWN0b3I6ICcuY2FsZW5kYXItY29sdW1uJyxcbn07XG5cbmV4cG9ydCBjb25zdCBjYWxlbmRhckNlbGxTZWxlY3RvcnMgPSB7XG4gIHRlbXBsYXRlU2VsZWN0b3I6ICcudGVtcGxhdGUtY2FsZW5kYXItY2VsbCcsXG4gIGVsZW1lbnRTZWxlY3RvcjogJy5jYWxlbmRhci1jZWxsJyxcbiAgZWxlbWVudENsYXNzOiAnY2FsZW5kYXItY2VsbCcsXG4gIGRyYWdPdmVyQ2xhc3M6ICdjYWxlbmRhci1jZWxsX2RyYWctb3ZlcicsXG59O1xuXG5leHBvcnQgY29uc3QgY2FsZW5kYXJUYXNrU2VsZWN0b3JzID0ge1xuICB0ZW1wbGF0ZVNlbGVjdG9yOiAnLnRlbXBsYXRlLWNhbGVuZGFyLXRhc2snLFxuICBlbGVtZW50U2VsZWN0b3I6ICcuY2FsZW5kYXItdGFzaycsXG4gIGVsZW1lbnRDbGFzczogJ2NhbGVuZGFyLXRhc2snLFxuICB0aXRsZVNlbGVjdG9yOiAnLmNhbGVuZGFyLXRhc2tfX3RpdGxlJyxcbiAgc3VidGl0bGVTZWxlY3RvcjogJy5jYWxlbmRhci10YXNrX19zdWJ0aXRsZScsXG4gIGRlc2NyaXB0aW9uU2VsZWN0b3I6ICcuY2FsZW5kYXItdGFza19fZGVzY3JpcHRpb24nLFxuICBzdGFydERhdGVTZWxlY3RvcjogJy5jYWxlbmRhci10YXNrX19kYXRlLXNwYW5fc3RhcnQnLFxuICBlbmREYXRlU2VsZWN0b3I6ICcuY2FsZW5kYXItdGFza19fZGF0ZS1zcGFuX2VuZCcsXG59O1xuXG5leHBvcnQgY29uc3Qgd2Vla0J1dHRvbnNTZWxlY3RvcnMgPSB7XG4gIG5leHRXZWVrQnV0dG9uOiAnLmJ1dHRvbl9uZXh0JyxcbiAgcHJldldlZWtCdXR0b246ICcuYnV0dG9uX3ByZXYnLFxufTtcblxuZXhwb3J0IGNvbnN0IHBvcHVwU2VsZWN0b3JzID0ge1xuICBwb3B1cEVycm9yOiAnLnBvcHVwX2Vycm9yJyxcbiAgcG9wdXBPcGVuQ2xhc3M6ICdwb3B1cF9vcGVuJyxcbn07XG5cbmV4cG9ydCBjb25zdCBzZWFyY2hGb3JtU2VsZWN0b3JzID0ge1xuICBzZWFyY2hGb3JtOiAnLnNlYXJjaC1mb3JtJyxcbiAgc2VhcmNoSW5wdXQ6ICcuc2VhcmNoLWZvcm1fX2lucHV0JyxcbiAgc3VibWl0QnV0dG9uOiAnLmJ1dHRvbl9zZWFyY2gnLFxufTtcblxuZXhwb3J0IGNvbnN0IHByZWxvYWRlclN0YXRlU2VsZWN0b3JzID0ge1xuICBwYWdlU2VsZWN0b3I6ICcucGFnZScsXG4gIHBhZ2VIaWRkZW5DbGFzczogJ3BhZ2VfaGlkZGVuJyxcbiAgcHJlbG9hZGVyU2VsZWN0b3I6ICcucHJlbG9hZGVyJyxcbiAgcHJlbG9hZGVyVmlzaWJsZUNsYXNzOiAncHJlbG9hZGVyX3Zpc2libGUnLFxufTtcblxuZXhwb3J0IGNvbnN0IGRhdGVTZXR0aW5ncyA9IHtcbiAgbG9jYWxlOiAncnUtUlUnLFxuICBvcHRpb25zOiB7XG4gICAgd2Vla2RheTogJ3Nob3J0JyxcbiAgICB5ZWFyOiAnbnVtZXJpYycsXG4gICAgbW9udGg6ICdzaG9ydCcsXG4gICAgZGF5OiAnbnVtZXJpYycsXG4gIH0sXG4gIG51bWVyaWM6IHtcbiAgICBkYXk6ICdudW1lcmljJyxcbiAgICBtb250aDogJ251bWVyaWMnLFxuICB9LFxufTtcblxuZXhwb3J0IGNvbnN0IG1heEluZGV4Rm9yQW5pbWF0aW9uID0ge1xuICB1c2VyczogNCxcbiAgYmFja2xvZ0NhcmRzOiA2LFxufTtcblxuZXhwb3J0IGNvbnN0IGZ1bGxEYXlJbk1pbGxpc2Vjb25kcyA9IDM2MDAgKiAyNCAqIDEwMDA7XG5leHBvcnQgY29uc3QgdGltZXJEZWxheSA9IDMwMDA7XG5leHBvcnQgY29uc3QgbG9jYWxTdG9yYWdlVGhlbWVLZXkgPSAnaXNUaGVtZURhcmsnO1xuIiwiaW1wb3J0IHsgZGF0ZVNldHRpbmdzIH0gZnJvbSAnLi4vY29uZmlnL2NvbnN0YW50cyc7XG5cbmNvbnN0IHJlZmluZVRvU3RyaW5nID0gKGRhdGUpID0+XG4gIG5ldyBEYXRlKGRhdGUpLnRvTG9jYWxlRGF0ZVN0cmluZyhkYXRlU2V0dGluZ3MubG9jYWxlLCBkYXRlU2V0dGluZ3Mub3B0aW9ucyk7XG5cbmNvbnN0IHJlZmluZVRvTnVtZXJpY0RETU0gPSAoZGF0ZSkgPT5cbiAgbmV3IERhdGUoZGF0ZSkudG9Mb2NhbGVEYXRlU3RyaW5nKGRhdGVTZXR0aW5ncy5sb2NhbGUsIGRhdGVTZXR0aW5ncy5udW1lcmljKTtcblxuY29uc3QgcmVmaW5lVG9OdW1lcmljWVlNTUREID0gKGRhdGUpID0+IG5ldyBEYXRlKGRhdGUpLnRvTG9jYWxlRGF0ZVN0cmluZygnZW4tQ0EnKTtcblxuZXhwb3J0IHsgcmVmaW5lVG9TdHJpbmcsIHJlZmluZVRvTnVtZXJpY0RETU0sIHJlZmluZVRvTnVtZXJpY1lZTU1ERCB9O1xuIiwiaW1wb3J0IHsgQVNTSUdOX0JZX0RBVEUgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IHJlZmluZVRvTnVtZXJpY1lZTU1ERCB9IGZyb20gJy4uL3V0aWxzL2hhbmRsZS1kYXRlcyc7XG5cbmNsYXNzIFByb2plY3RTdGF0ZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuX3N1YnNjcmliZXJzID0gW107XG4gICAgdGhpcy5fYXNzaWduZWRUYXNrcyA9IFtdO1xuICAgIHRoaXMuX2JhY2tsb2dUYXNrcyA9IFtdO1xuICAgIHRoaXMuX3VzZXJzID0gW107XG4gICAgdGhpcy5fdXNlcnNJZHMgPSB7fTtcbiAgICB0aGlzLl9jYWxlbmRhckxlbmd0aCA9IDc7XG4gICAgdGhpcy5fY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpO1xuICAgIHRoaXMuX2N1cnJlbnREYXRlTnVtZXJpYyA9IHJlZmluZVRvTnVtZXJpY1lZTU1ERChuZXcgRGF0ZSgpKTtcbiAgICB0aGlzLl9zdGFydERheSA9IHRoaXMuX3VwZGF0ZUFuZFNldERhdGVzKCk7XG4gIH1cblxuICBfcmVtb3ZlVGFza0Zyb21CYWNrbG9nKHRhc2tJZCkge1xuICAgIHRoaXMuX2JhY2tsb2dUYXNrcyA9IHRoaXMuX2JhY2tsb2dUYXNrcy5maWx0ZXIoKHRhc2spID0+IHRhc2suaWQgIT09IHRhc2tJZCk7XG4gIH1cblxuICBfY2FsbFN1YnNjcmliZXJzKCkge1xuICAgIHRoaXMuX3N1YnNjcmliZXJzLmZvckVhY2goKGxpc3RlbmVyKSA9PiBsaXN0ZW5lcigpKTtcbiAgfVxuXG4gIF91cGRhdGVBbmRTZXREYXRlcygpIHtcbiAgICBjb25zdCBzdGFydERhdGUgPSBuZXcgRGF0ZSh0aGlzLl9jdXJyZW50RGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKSk7XG5cbiAgICByZXR1cm4gc3RhcnREYXRlLnNldERhdGUoXG4gICAgICBzdGFydERhdGUuZ2V0RGF0ZSgpIC0gc3RhcnREYXRlLmdldERheSgpICsgKHN0YXJ0RGF0ZS5nZXREYXkoKSA9PT0gMCA/IC02IDogMSlcbiAgICApO1xuICB9XG5cbiAgZ2V0IGFzc2lnbmVkVGFza3MoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2Fzc2lnbmVkVGFza3M7XG4gIH1cblxuICBnZXQgYmFja2xvZ1Rhc2tzKCkge1xuICAgIHJldHVybiB0aGlzLl9iYWNrbG9nVGFza3M7XG4gIH1cblxuICBnZXQgdXNlcnNJZHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3VzZXJzSWRzO1xuICB9XG5cbiAgc2V0IHVzZXJzKHZhbHVlKSB7XG4gICAgdGhpcy5fdXNlcnMgPSB2YWx1ZTtcbiAgfVxuXG4gIGdldCB1c2VycygpIHtcbiAgICByZXR1cm4gdGhpcy5fdXNlcnM7XG4gIH1cblxuICBnZXQgY2FsZW5kYXJMZW5ndGgoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NhbGVuZGFyTGVuZ3RoO1xuICB9XG5cbiAgZ2V0IHN0YXJ0RGF5KCkge1xuICAgIHJldHVybiB0aGlzLl9zdGFydERheTtcbiAgfVxuXG4gIHNldCBzdGFydERheSh2YWx1ZSkge1xuICAgIHRoaXMuX3N0YXJ0RGF5ID0gdmFsdWU7XG4gIH1cblxuICBnZXQgY3VycmVudERhdGVOdW1lcmljKCkge1xuICAgIHJldHVybiB0aGlzLl9jdXJyZW50RGF0ZU51bWVyaWM7XG4gIH1cblxuICBhZGRUYXNrVG9Bc3NpZ25lZFRhc2tzKHRhc2spIHtcbiAgICB0aGlzLl9hc3NpZ25lZFRhc2tzLnB1c2godGFzayk7XG4gIH1cblxuICBhc3NpZ25UYXNrKHsgdHlwZSwgdGFza0lkLCBleGVjdXRvcklkLCBzdGFydERhdGUgfSkge1xuICAgIGNvbnN0IHRhc2tUb0JlQXNzaWduZWQgPSB0aGlzLl9iYWNrbG9nVGFza3MuZmluZCgodGFzaykgPT4gdGFza0lkID09PSB0YXNrLmlkKTtcbiAgICB0YXNrVG9CZUFzc2lnbmVkLmV4ZWN1dG9yID0gK2V4ZWN1dG9ySWQ7XG5cbiAgICAvLyDQt9Cw0L/RgNC+0YEg0LjQtyDQutCw0LvQtdC90LTQsNGA0Y9cbiAgICBpZiAodHlwZSA9PT0gQVNTSUdOX0JZX0RBVEUpIHtcbiAgICAgIGlmICh0aGlzLl9jdXJyZW50RGF0ZSA+IERhdGUucGFyc2Uoc3RhcnREYXRlKSkge1xuICAgICAgICAvLyDQv9C+0L/Ri9GC0LrQsCDQvdCw0LfQvdCw0YfQuNGC0Ywg0LfQsNC00LDQvdC40LUg0L3QsCBcItCy0YfQtdGA0LBcIlxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICh0YXNrVG9CZUFzc2lnbmVkLnBsYW5FbmREYXRlID09PSB0YXNrVG9CZUFzc2lnbmVkLnBsYW5TdGFydERhdGUpIHtcbiAgICAgICAgdGFza1RvQmVBc3NpZ25lZC5wbGFuRW5kRGF0ZSA9IHN0YXJ0RGF0ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGRhdGVEaWZmZXJlbmNlID1cbiAgICAgICAgICBEYXRlLnBhcnNlKHRhc2tUb0JlQXNzaWduZWQucGxhbkVuZERhdGUpIC0gRGF0ZS5wYXJzZSh0YXNrVG9CZUFzc2lnbmVkLnBsYW5TdGFydERhdGUpO1xuICAgICAgICBjb25zdCBuZXdFbmREYXRlID0gRGF0ZS5wYXJzZShzdGFydERhdGUpICsgZGF0ZURpZmZlcmVuY2U7XG4gICAgICAgIHRhc2tUb0JlQXNzaWduZWQucGxhbkVuZERhdGUgPSByZWZpbmVUb051bWVyaWNZWU1NREQobmV3RW5kRGF0ZSk7XG4gICAgICB9XG4gICAgICB0YXNrVG9CZUFzc2lnbmVkLnBsYW5TdGFydERhdGUgPSBzdGFydERhdGU7XG4gICAgfVxuICAgIHRoaXMuYWRkVGFza1RvQXNzaWduZWRUYXNrcyh0YXNrVG9CZUFzc2lnbmVkKTtcbiAgICB0aGlzLl9yZW1vdmVUYXNrRnJvbUJhY2tsb2codGFza0lkKTtcbiAgICB0aGlzLl9jYWxsU3Vic2NyaWJlcnMoKTtcbiAgfVxuXG4gIGFkZFRhc2tUb0JhY2tsb2codGFzaykge1xuICAgIHRoaXMuX2JhY2tsb2dUYXNrcy5wdXNoKHRhc2spO1xuICB9XG5cbiAgbWFwVXNlcnNJZHModXNlcnMpIHtcbiAgICBjb25zdCBpZHMgPSB1c2Vycy5yZWR1Y2UoKG9iaiwgeyBpZCB9LCBpKSA9PiAoeyAuLi5vYmosIFtpXTogaWQgfSksIHt9KTtcbiAgICB0aGlzLl91c2Vyc0lkcyA9IHsgLi4uaWRzIH07XG4gIH1cblxuICBhZGRTdWJzY3JpYmVycyhzdWJzY3JpYmVycykge1xuICAgIHRoaXMuX3N1YnNjcmliZXJzID0gWy4uLnN1YnNjcmliZXJzXTtcbiAgfVxufVxuXG5jb25zdCBTdGF0ZSA9IG5ldyBQcm9qZWN0U3RhdGUoKTtcblxuZXhwb3J0IGRlZmF1bHQgU3RhdGU7XG4iLCJpbXBvcnQgeyBCQVNFX1VSTCB9IGZyb20gJy4uL2NvbmZpZy9jb25maWcnO1xuXG5jb25zdCBjaGVja1NlcnZlclJlc3BvbnNlID0gKHJlcykgPT4gKHJlcy5vayA/IHJlcy5qc29uKCkgOiBQcm9taXNlLnJlamVjdChyZXMpKTtcblxuY29uc3QgZ2V0RGF0YSA9IGFzeW5jIChyb3V0ZSkgPT4ge1xuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHtCQVNFX1VSTH0ke3JvdXRlfWAsIHsgbWV0aG9kOiAnR0VUJyB9KTtcbiAgcmV0dXJuIGNoZWNrU2VydmVyUmVzcG9uc2UocmVzKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGdldERhdGE7XG4iLCJjbGFzcyBDb21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcih7IHRlbXBsYXRlU2VsZWN0b3IsIGVsZW1lbnRTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fdGVtcGxhdGVTZWxlY3RvciA9IHRlbXBsYXRlU2VsZWN0b3I7XG4gICAgdGhpcy5fZWxlbWVudFNlbGVjdG9yID0gZWxlbWVudFNlbGVjdG9yO1xuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIHRoaXMuX3RlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yKS5jb250ZW50O1xuICAgIC8vINGB0LDQvCDRjdC70LXQvNC10L3RglxuICAgIHJldHVybiB0aGlzLl90ZW1wbGF0ZS5xdWVyeVNlbGVjdG9yKHRoaXMuX2VsZW1lbnRTZWxlY3RvcikuY2xvbmVOb2RlKHRydWUpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENvbXBvbmVudDtcbiIsImltcG9ydCBDb21wb25lbnQgZnJvbSAnLi9Db21wb25lbnQnO1xuaW1wb3J0IHsgcmVmaW5lVG9TdHJpbmcgfSBmcm9tICcuLi91dGlscy9oYW5kbGUtZGF0ZXMnO1xuXG5jbGFzcyBCYWNrbG9nQ2FyZCBleHRlbmRzIENvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIGNhcmREYXRhLFxuICAgIHtcbiAgICAgIHRlbXBsYXRlU2VsZWN0b3IsXG4gICAgICBlbGVtZW50U2VsZWN0b3IsXG4gICAgICB0aXRsZVNlbGVjdG9yLFxuICAgICAgZGVzY3JpcHRpb25TZWxlY3RvcixcbiAgICAgIHN0YXJ0RGF0ZVNlbGVjdG9yLFxuICAgICAgZW5kRGF0ZVNlbGVjdG9yLFxuICAgICAgZHJhZ1N0YXJ0Q2xhc3MsXG4gICAgfVxuICApIHtcbiAgICBzdXBlcih7IHRlbXBsYXRlU2VsZWN0b3IsIGVsZW1lbnRTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9jYXJkRGF0YSA9IGNhcmREYXRhO1xuICAgIHRoaXMuX2JhY2tsb2dDYXJkID0gc3VwZXIuX2dldFRlbXBsYXRlKCk7XG4gICAgdGhpcy5fZHJhZ1N0YXJ0Q2xhc3MgPSBkcmFnU3RhcnRDbGFzcztcbiAgICB0aGlzLl9jYXJkVGl0bGUgPSB0aGlzLl9iYWNrbG9nQ2FyZC5xdWVyeVNlbGVjdG9yKHRpdGxlU2VsZWN0b3IpO1xuICAgIHRoaXMuX2NhcmREZXNjcmlwdGlvbiA9IHRoaXMuX2JhY2tsb2dDYXJkLnF1ZXJ5U2VsZWN0b3IoZGVzY3JpcHRpb25TZWxlY3Rvcik7XG4gICAgdGhpcy5fY2FyZFN0YXJ0RGF0ZSA9IHRoaXMuX2JhY2tsb2dDYXJkLnF1ZXJ5U2VsZWN0b3Ioc3RhcnREYXRlU2VsZWN0b3IpO1xuICAgIHRoaXMuX2NhcmRFbmREYXRlID0gdGhpcy5fYmFja2xvZ0NhcmQucXVlcnlTZWxlY3RvcihlbmREYXRlU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZURyYWdTdGFydCA9IHRoaXMuX2hhbmRsZURyYWdTdGFydC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX2hhbmRsZURyYWdFbmQgPSB0aGlzLl9oYW5kbGVEcmFnRW5kLmJpbmQodGhpcyk7XG4gIH1cblxuICBfaGFuZGxlRHJhZ1N0YXJ0KGV2dCkge1xuICAgIHRoaXMuX2JhY2tsb2dDYXJkLmNsYXNzTGlzdC5hZGQodGhpcy5fZHJhZ1N0YXJ0Q2xhc3MpO1xuICAgIGV2dC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9wbGFpbicsIHRoaXMuX2NhcmREYXRhLmlkKTtcbiAgICBldnQuZGF0YVRyYW5zZmVyLmVmZmVjdEFsbG93ZWQgPSAnbW92ZSc7XG4gIH1cblxuICBfaGFuZGxlRHJhZ0VuZCgpIHtcbiAgICB0aGlzLl9iYWNrbG9nQ2FyZC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2RyYWdTdGFydENsYXNzKTtcbiAgfVxuXG4gIGNyZWF0ZUVsZW1lbnQoKSB7XG4gICAgdGhpcy5fY2FyZFRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fY2FyZERhdGEuc3ViamVjdDtcbiAgICB0aGlzLl9jYXJkRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSB0aGlzLl9jYXJkRGF0YS5kZXNjcmlwdGlvbjtcbiAgICB0aGlzLl9jYXJkU3RhcnREYXRlLnRleHRDb250ZW50ID0gcmVmaW5lVG9TdHJpbmcodGhpcy5fY2FyZERhdGEucGxhblN0YXJ0RGF0ZSk7XG4gICAgdGhpcy5fY2FyZEVuZERhdGUudGV4dENvbnRlbnQgPSByZWZpbmVUb1N0cmluZyh0aGlzLl9jYXJkRGF0YS5wbGFuRW5kRGF0ZSk7XG4gICAgdGhpcy5fYmFja2xvZ0NhcmQuc2V0QXR0cmlidXRlKCdpZCcsIHRoaXMuX2NhcmREYXRhLmlkKTtcbiAgICByZXR1cm4gdGhpcy5fYmFja2xvZ0NhcmQ7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9iYWNrbG9nQ2FyZC5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCB0aGlzLl9oYW5kbGVEcmFnU3RhcnQpO1xuICAgIHRoaXMuX2JhY2tsb2dDYXJkLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbmQnLCB0aGlzLl9oYW5kbGVEcmFnRW5kKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBCYWNrbG9nQ2FyZDtcbiIsImNsYXNzIFJlbmRlcmVyU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gICAgdGhpcy5jbGVhckl0ZW1zID0gdGhpcy5jbGVhckl0ZW1zLmJpbmQodGhpcyk7XG4gIH1cblxuICBhZGRJdGVtKGl0ZW0pIHtcbiAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKGl0ZW0pO1xuICB9XG5cbiAgY2xlYXJJdGVtcygpIHtcbiAgICB0aGlzLl9jb250YWluZXIudGV4dENvbnRlbnQgPSAnJztcbiAgfVxuXG4gIGFkZFRleHRDb250ZW50KGNvbnRlbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIudGV4dENvbnRlbnQgPSBjb250ZW50O1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFJlbmRlcmVyU2VjdGlvbjtcbiIsImltcG9ydCBDb21wb25lbnQgZnJvbSAnLi9Db21wb25lbnQnO1xuaW1wb3J0IHsgcmVmaW5lVG9TdHJpbmcgfSBmcm9tICcuLi91dGlscy9oYW5kbGUtZGF0ZXMnO1xuXG5jbGFzcyBDYWxlbmRhclRhc2sgZXh0ZW5kcyBDb21wb25lbnQge1xuICBjb25zdHJ1Y3RvcihcbiAgICB0YXNrLFxuICAgIHtcbiAgICAgIHRlbXBsYXRlU2VsZWN0b3IsXG4gICAgICBlbGVtZW50U2VsZWN0b3IsXG4gICAgICB0aXRsZVNlbGVjdG9yLFxuICAgICAgc3VidGl0bGVTZWxlY3RvcixcbiAgICAgIGRlc2NyaXB0aW9uU2VsZWN0b3IsXG4gICAgICBzdGFydERhdGVTZWxlY3RvcixcbiAgICAgIGVuZERhdGVTZWxlY3RvcixcbiAgICB9XG4gICkge1xuICAgIHN1cGVyKHsgdGVtcGxhdGVTZWxlY3RvciwgZWxlbWVudFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX3Rhc2sgPSB0YXNrO1xuICAgIHRoaXMuX3Rhc2tFbGVtZW50ID0gc3VwZXIuX2dldFRlbXBsYXRlKCk7XG4gICAgdGhpcy5fdGl0bGVFTGVtZW50ID0gdGhpcy5fdGFza0VsZW1lbnQucXVlcnlTZWxlY3Rvcih0aXRsZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9zdWJ0aXRsZUVMZW1lbnQgPSB0aGlzLl90YXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKHN1YnRpdGxlU2VsZWN0b3IpO1xuICAgIHRoaXMuX2Rlc2NyaXB0aW9uRWxlbWVudCA9IHRoaXMuX3Rhc2tFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoZGVzY3JpcHRpb25TZWxlY3Rvcik7XG4gICAgdGhpcy5fc3RhcnREYXRlRWxlbWVudCA9IHRoaXMuX3Rhc2tFbGVtZW50LnF1ZXJ5U2VsZWN0b3Ioc3RhcnREYXRlU2VsZWN0b3IpO1xuICAgIHRoaXMuX2VuZERhdGVFbGVtZW50ID0gdGhpcy5fdGFza0VsZW1lbnQucXVlcnlTZWxlY3RvcihlbmREYXRlU2VsZWN0b3IpO1xuICB9XG5cbiAgY3JlYXRlRWxlbWVudCgpIHtcbiAgICB0aGlzLl90aXRsZUVMZW1lbnQudGV4dENvbnRlbnQgPSB0aGlzLl90YXNrLnN1YmplY3Q7XG4gICAgdGhpcy5fc3VidGl0bGVFTGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5fdGFzay5zdWJqZWN0O1xuICAgIHRoaXMuX2Rlc2NyaXB0aW9uRWxlbWVudC50ZXh0Q29udGVudCA9IHRoaXMuX3Rhc2suZGVzY3JpcHRpb247XG4gICAgdGhpcy5fc3RhcnREYXRlRWxlbWVudC50ZXh0Q29udGVudCA9IHJlZmluZVRvU3RyaW5nKHRoaXMuX3Rhc2sucGxhblN0YXJ0RGF0ZSk7XG4gICAgdGhpcy5fZW5kRGF0ZUVsZW1lbnQudGV4dENvbnRlbnQgPSByZWZpbmVUb1N0cmluZyh0aGlzLl90YXNrLnBsYW5FbmREYXRlKTtcblxuICAgIHJldHVybiB0aGlzLl90YXNrRWxlbWVudDtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDYWxlbmRhclRhc2s7XG4iLCJpbXBvcnQgQ29tcG9uZW50IGZyb20gJy4vQ29tcG9uZW50JztcbmltcG9ydCBDYWxlbmRhclRhc2sgZnJvbSAnLi9DYWxlbmRhclRhc2snO1xuaW1wb3J0IHsgY2FsZW5kYXJUYXNrU2VsZWN0b3JzIH0gZnJvbSAnLi4vY29uZmlnL2NvbnN0YW50cyc7XG5cbmNsYXNzIENhbGVuZGFyQ2VsbCBleHRlbmRzIENvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKGNlbGwsIHsgdGVtcGxhdGVTZWxlY3RvciwgZWxlbWVudFNlbGVjdG9yIH0pIHtcbiAgICBzdXBlcih7IHRlbXBsYXRlU2VsZWN0b3IsIGVsZW1lbnRTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9jZWxsID0gY2VsbDtcbiAgICB0aGlzLl9jZWxsRWxlbWVudCA9IHN1cGVyLl9nZXRUZW1wbGF0ZSgpO1xuICB9XG5cbiAgX2FkZEl0ZW0oaXRlbSkge1xuICAgIHRoaXMuX2NlbGxFbGVtZW50LmFwcGVuZChpdGVtKTtcbiAgfVxuXG4gIGNyZWF0ZUVsZW1lbnQoKSB7XG4gICAgdGhpcy5fY2VsbEVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLWV4ZWN1dG9yJywgdGhpcy5fY2VsbC5leGVjdXRvcik7XG4gICAgdGhpcy5fY2VsbEVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLWRhdGUnLCB0aGlzLl9jZWxsLmRhdGUpO1xuXG4gICAgcmV0dXJuIHRoaXMuX2NlbGxFbGVtZW50O1xuICB9XG5cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5fY2VsbC50YXNrcy5mb3JFYWNoKCh0YXNrKSA9PiB7XG4gICAgICBjb25zdCBuZXdUYXNrID0gbmV3IENhbGVuZGFyVGFzayh0YXNrLCBjYWxlbmRhclRhc2tTZWxlY3RvcnMpO1xuICAgICAgdGhpcy5fYWRkSXRlbShuZXdUYXNrLmNyZWF0ZUVsZW1lbnQoKSk7XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2FsZW5kYXJDZWxsO1xuIiwiaW1wb3J0IFByb2plY3RTdGF0ZSBmcm9tICcuLi9zdGF0ZS9Qcm9qZWN0U3RhdGUnO1xuaW1wb3J0IENvbXBvbmVudCBmcm9tICcuL0NvbXBvbmVudCc7XG5pbXBvcnQgQ2FsZW5kYXJDZWxsIGZyb20gJy4vQ2FsZW5kYXJDZWxsJztcbmltcG9ydCB7IGNhbGVuZGFyQ2VsbFNlbGVjdG9ycyB9IGZyb20gJy4uL2NvbmZpZy9jb25zdGFudHMnO1xuXG5jbGFzcyBDYWxlbmRhckNvbHVtbiBleHRlbmRzIENvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKGNvbHVtbiwgeyB0ZW1wbGF0ZVNlbGVjdG9yLCBlbGVtZW50U2VsZWN0b3IgfSkge1xuICAgIHN1cGVyKHsgdGVtcGxhdGVTZWxlY3RvciwgZWxlbWVudFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX2NvbHVtbiA9IGNvbHVtbjtcbiAgICB0aGlzLl9jYWxlbmRhckNvbHVtbiA9IHN1cGVyLl9nZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX2RheVRhc2tzU2NoZW1hID0ge307XG4gIH1cblxuICBfZ2V0VGFza3NGb3JDdXJyZW50RGF5KHRhc2tzKSB7XG4gICAgY29uc3QgcGFyc2VkQ29sdW1uRGF0ZSA9IERhdGUucGFyc2UodGhpcy5fY29sdW1uLmRhdGUpO1xuICAgIHJldHVybiB0YXNrcy5maWx0ZXIoXG4gICAgICAodGFzaykgPT5cbiAgICAgICAgRGF0ZS5wYXJzZSh0YXNrLnBsYW5TdGFydERhdGUpIDw9IHBhcnNlZENvbHVtbkRhdGUgJiZcbiAgICAgICAgcGFyc2VkQ29sdW1uRGF0ZSA8PSBEYXRlLnBhcnNlKHRhc2sucGxhbkVuZERhdGUpXG4gICAgKTtcbiAgfVxuXG4gIF9nZXREYXlUYXNrc1NjaGVtYSgpIHtcbiAgICB0aGlzLl90YXNrc0ZvckN1cnJlbnREYXkgPSB0aGlzLl9nZXRUYXNrc0ZvckN1cnJlbnREYXkoUHJvamVjdFN0YXRlLmFzc2lnbmVkVGFza3MpO1xuXG4gICAgaWYgKHRoaXMuX3Rhc2tzRm9yQ3VycmVudERheSkge1xuICAgICAgdGhpcy5fdGFza3NGb3JDdXJyZW50RGF5LmZvckVhY2goKHRhc2spID0+IHtcbiAgICAgICAgaWYgKCF0aGlzLl9kYXlUYXNrc1NjaGVtYVt0YXNrLmV4ZWN1dG9yXSkge1xuICAgICAgICAgIHRoaXMuX2RheVRhc2tzU2NoZW1hW3Rhc2suZXhlY3V0b3JdID0gW3Rhc2tdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuX2RheVRhc2tzU2NoZW1hW3Rhc2suZXhlY3V0b3JdID0gWy4uLnRoaXMuX2RheVRhc2tzU2NoZW1hW3Rhc2suZXhlY3V0b3JdLCB0YXNrXTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgY3JlYXRlQ2VsbHMoKSB7XG4gICAgdGhpcy5fZ2V0RGF5VGFza3NTY2hlbWEoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IFByb2plY3RTdGF0ZS51c2Vycy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgY29uc3QgdXNlcklkID0gUHJvamVjdFN0YXRlLnVzZXJzSWRzW2ldO1xuICAgICAgY29uc3QgY29sdW1uQ2VsbCA9IG5ldyBDYWxlbmRhckNlbGwoXG4gICAgICAgIHsgZXhlY3V0b3I6IHVzZXJJZCwgZGF0ZTogdGhpcy5fY29sdW1uLmRhdGUsIHRhc2tzOiB0aGlzLl9kYXlUYXNrc1NjaGVtYVt1c2VySWRdID8/IFtdIH0sXG4gICAgICAgIGNhbGVuZGFyQ2VsbFNlbGVjdG9yc1xuICAgICAgKTtcbiAgICAgIGNvbnN0IGNlbGxFbGVtZW50ID0gY29sdW1uQ2VsbC5jcmVhdGVFbGVtZW50KCk7XG4gICAgICBjb2x1bW5DZWxsLnJlbmRlckl0ZW1zKCk7XG4gICAgICB0aGlzLmFkZEl0ZW0oY2VsbEVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIGNyZWF0ZUVsZW1lbnQoKSB7XG4gICAgdGhpcy5jcmVhdGVDZWxscygpO1xuICAgIHJldHVybiB0aGlzLl9jYWxlbmRhckNvbHVtbjtcbiAgfVxuXG4gIGFkZEl0ZW0oaXRlbSkge1xuICAgIHRoaXMuX2NhbGVuZGFyQ29sdW1uLmFwcGVuZChpdGVtKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDYWxlbmRhckNvbHVtbjtcbiIsImltcG9ydCBDb21wb25lbnQgZnJvbSAnLi9Db21wb25lbnQnO1xuaW1wb3J0IFByb2plY3RTdGF0ZSBmcm9tICcuLi9zdGF0ZS9Qcm9qZWN0U3RhdGUnO1xuaW1wb3J0IHsgcmVmaW5lVG9OdW1lcmljRERNTSB9IGZyb20gJy4uL3V0aWxzL2hhbmRsZS1kYXRlcyc7XG5cbmNsYXNzIENhbGVuZGFyRGF0ZSBleHRlbmRzIENvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKHsgZGF0ZSB9LCB7IHRlbXBsYXRlU2VsZWN0b3IsIGVsZW1lbnRTZWxlY3RvciwgY3VycmVudERheUNsYXNzIH0pIHtcbiAgICBzdXBlcih7IHRlbXBsYXRlU2VsZWN0b3IsIGVsZW1lbnRTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9kYXRlID0gZGF0ZTtcbiAgICB0aGlzLl9jdXJyZW50RGF5Q2xhc3MgPSBjdXJyZW50RGF5Q2xhc3M7XG4gICAgdGhpcy5fZGF0ZUVsZW1lbnQgPSBzdXBlci5fZ2V0VGVtcGxhdGUoKTtcbiAgfVxuXG4gIGNyZWF0ZUVsZW1lbnQoKSB7XG4gICAgY29uc3QgY2VsbERhdGUgPSBuZXcgRGF0ZSh0aGlzLl9kYXRlKTtcbiAgICB0aGlzLl9kYXRlRWxlbWVudC50ZXh0Q29udGVudCA9IHJlZmluZVRvTnVtZXJpY0RETU0oY2VsbERhdGUpO1xuICAgIGlmICh0aGlzLl9kYXRlID09PSBQcm9qZWN0U3RhdGUuY3VycmVudERhdGVOdW1lcmljKSB7XG4gICAgICB0aGlzLl9kYXRlRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2N1cnJlbnREYXlDbGFzcyk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9kYXRlRWxlbWVudDtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDYWxlbmRhckRhdGU7XG4iLCJpbXBvcnQgUHJvamVjdFN0YXRlIGZyb20gJy4uL3N0YXRlL1Byb2plY3RTdGF0ZSc7XG5pbXBvcnQgQ29tcG9uZW50IGZyb20gJy4vQ29tcG9uZW50JztcbmltcG9ydCB7IEFTU0lHTl9CWV9VU0VSIH0gZnJvbSAnLi4vc3RhdGUvdHlwZXMnO1xuXG5jbGFzcyBVc2VyQ2FyZCBleHRlbmRzIENvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKGNhcmREYXRhLCB7IHRlbXBsYXRlU2VsZWN0b3IsIGVsZW1lbnRTZWxlY3RvciwgdXNlck5hbWVTZWxlY3RvciwgZHJhZ092ZXJDbGFzcyB9KSB7XG4gICAgc3VwZXIoeyB0ZW1wbGF0ZVNlbGVjdG9yLCBlbGVtZW50U2VsZWN0b3IgfSk7XG4gICAgdGhpcy5fY2FyZERhdGEgPSBjYXJkRGF0YTtcbiAgICB0aGlzLl91c2VyQ2FyZCA9IHN1cGVyLl9nZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX2Z1bGxOYW1lRWxlbWVudCA9IHRoaXMuX3VzZXJDYXJkLnF1ZXJ5U2VsZWN0b3IodXNlck5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fZHJhZ092ZXJDbGFzcyA9IGRyYWdPdmVyQ2xhc3M7XG4gICAgdGhpcy5faGFuZGxlRHJhZ092ZXIgPSB0aGlzLl9oYW5kbGVEcmFnT3Zlci5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX2hhbmRsZURyYWdMZWF2ZSA9IHRoaXMuX2hhbmRsZURyYWdMZWF2ZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX2hhbmRsZURyb3AgPSB0aGlzLl9oYW5kbGVEcm9wLmJpbmQodGhpcyk7XG4gIH1cblxuICBfaGFuZGxlRHJhZ092ZXIoZXZ0KSB7XG4gICAgaWYgKGV2dC5kYXRhVHJhbnNmZXIgJiYgZXZ0LmRhdGFUcmFuc2Zlci50eXBlc1swXSA9PT0gJ3RleHQvcGxhaW4nKSB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX3VzZXJDYXJkLmNsYXNzTGlzdC5hZGQodGhpcy5fZHJhZ092ZXJDbGFzcyk7XG4gICAgfVxuICB9XG5cbiAgX2hhbmRsZURyYWdMZWF2ZSgpIHtcbiAgICB0aGlzLl91c2VyQ2FyZC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2RyYWdPdmVyQ2xhc3MpO1xuICB9XG5cbiAgX2hhbmRsZURyb3AoZXZ0KSB7XG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgdGFza0lkID0gZXZ0LmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJyk7XG4gICAgUHJvamVjdFN0YXRlLmFzc2lnblRhc2soeyB0eXBlOiBBU1NJR05fQllfVVNFUiwgdGFza0lkLCBleGVjdXRvcklkOiB0aGlzLl9jYXJkRGF0YS5pZCB9KTtcbiAgICB0aGlzLl9oYW5kbGVEcmFnTGVhdmUoKTtcbiAgfVxuXG4gIGNyZWF0ZUNhcmQoKSB7XG4gICAgdGhpcy5fZnVsbE5hbWVFbGVtZW50LnRleHRDb250ZW50ID0gYCR7dGhpcy5fY2FyZERhdGEuZmlyc3ROYW1lfSAke3RoaXMuX2NhcmREYXRhLnN1cm5hbWV9YDtcbiAgICByZXR1cm4gdGhpcy5fdXNlckNhcmQ7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl91c2VyQ2FyZC5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIHRoaXMuX2hhbmRsZURyYWdPdmVyKTtcbiAgICB0aGlzLl91c2VyQ2FyZC5hZGRFdmVudExpc3RlbmVyKCdkcmFnbGVhdmUnLCB0aGlzLl9oYW5kbGVEcmFnTGVhdmUpO1xuICAgIHRoaXMuX3VzZXJDYXJkLmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCB0aGlzLl9oYW5kbGVEcm9wKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBVc2VyQ2FyZDtcbiIsImNvbnN0IHJlbW92ZUFuaW1hdGlvbiA9IChlbGVtZW50KSA9PiB7XG4gIC8vINGD0LTQsNC70LXQvdC40LUg0LTQu9GPINCy0L7RgdGB0YLQsNC90L7QstC70LXQvdC40Y8g0YPRgNC+0LLQvdC10Lkg0L3QsNC70L7QttC10L3QuNGPINC4INC00L7RgdGC0YPQv9C90L7RgdGC0Lgg0YHQstC+0LnRgdGC0LLQsCB0cmFuc2Zvcm1cbiAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gIH0sIDExMDApO1xufTtcblxuZXhwb3J0IGNvbnN0IGFwcGx5U2xpZGVJbkJvdHRvbVVwQW5pbSA9IChlbGVtZW50LCBpbmRleCwgbGFzdEluZGV4KSA9PiB7XG4gIGlmIChpbmRleCA8PSBsYXN0SW5kZXgpIHtcbiAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShcbiAgICAgICdzdHlsZScsXG4gICAgICBgYW5pbWF0aW9uOiBzbGlkZS1pbi1ib3R0b20tdXAgMC41cyBlYXNlLW91dCAwLiR7aW5kZXh9cyBmb3J3YXJkczsgb3BhY2l0eTogMDtgXG4gICAgKTtcbiAgICByZW1vdmVBbmltYXRpb24oZWxlbWVudCk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBhcHBseVNsaWRlSW5SaWdodExlZnRBbmltID0gKGVsZW1lbnQsIGluZGV4LCBsYXN0SW5kZXgpID0+IHtcbiAgaWYgKGluZGV4IDw9IGxhc3RJbmRleCkge1xuICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKFxuICAgICAgJ3N0eWxlJyxcbiAgICAgIGBhbmltYXRpb246IHNsaWRlLWluLXJpZ2h0LWxlZnQgMC41cyBlYXNlLW91dCAwLiR7aW5kZXh9cyBmb3J3YXJkczsgb3BhY2l0eTogMDtgXG4gICAgKTtcbiAgICByZW1vdmVBbmltYXRpb24oZWxlbWVudCk7XG4gIH1cbn07XG4iLCJpbXBvcnQgJy4vaW5kZXguY3NzJztcbmltcG9ydCBQcm9qZWN0U3RhdGUgZnJvbSAnLi9zdGF0ZS9Qcm9qZWN0U3RhdGUnO1xuaW1wb3J0IHtcbiAgYmFja2xvZ0NhcmRTZWxlY3RvcnMsXG4gIGNhbGVuZGFyQ29sdW1uU2VsZWN0b3JzLFxuICBjYWxlbmRhckRhdGVTZWxlY3RvcnMsXG4gIGZ1bGxEYXlJbk1pbGxpc2Vjb25kcyxcbiAgbWF4SW5kZXhGb3JBbmltYXRpb24sXG4gIHBvcHVwU2VsZWN0b3JzLFxuICBwcmVsb2FkZXJTdGF0ZVNlbGVjdG9ycyxcbiAgdG9nZ2xlVGhlbWVTZXR0aW5ncyxcbiAgdXNlcnNDYXJkU2VsZWN0b3JzLFxufSBmcm9tICcuL2NvbmZpZy9jb25zdGFudHMnO1xuaW1wb3J0IHsgVEFTS1NfUk9VVEUsIFVTRVJTX1JPVVRFIH0gZnJvbSAnLi9jb25maWcvY29uZmlnJztcbmltcG9ydCB7IHJlZmluZVRvTnVtZXJpY1lZTU1ERCB9IGZyb20gJy4vdXRpbHMvaGFuZGxlLWRhdGVzJztcbmltcG9ydCB7IGluaXRTd2l0Y2hCZXR3ZWVuV2Vla3MsIGluaXRUb2dnbGVDb2xvclRoZW1lIH0gZnJvbSAnLi91dGlscyc7XG5pbXBvcnQgZ2V0RGF0YSBmcm9tICcuL2FwaS9tYWluLWFwaSc7XG5pbXBvcnQge1xuICBCYWNrbG9nQ2FyZCxcbiAgQ2FsZW5kYXIsXG4gIENhbGVuZGFyQ29sdW1uLFxuICBDYWxlbmRhckRhdGUsXG4gIFBvcHVwRXJyb3IsXG4gIFJlbmRlcmVyU2VjdGlvbixcbiAgVXNlckNhcmQsXG59IGZyb20gJy4vY29tcG9uZW50cyc7XG5pbXBvcnQgaW5pdFNlYXJjaCBmcm9tICcuL3V0aWxzL3NlYXJjaCc7XG5pbXBvcnQgeyBhcHBseVNsaWRlSW5Cb3R0b21VcEFuaW0sIGFwcGx5U2xpZGVJblJpZ2h0TGVmdEFuaW0gfSBmcm9tICcuL3V0aWxzL2FwcGx5LXN0eWxlLWFuaW1hdGlvbic7XG5cbmNvbnN0IHBhZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByZWxvYWRlclN0YXRlU2VsZWN0b3JzLnBhZ2VTZWxlY3Rvcik7XG5jb25zdCBwcmVsb2FkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByZWxvYWRlclN0YXRlU2VsZWN0b3JzLnByZWxvYWRlclNlbGVjdG9yKTtcbmNvbnN0IHBvcHVwRXJyb3IgPSBuZXcgUG9wdXBFcnJvcihwb3B1cFNlbGVjdG9ycyk7XG4vLyDQutC+0L3RgtC10LnQvdC10YDRiy3RgNC10L3QtNC10YDQtdGA0YtcbmNvbnN0IGJhY2tsb2dMaXN0ID0gbmV3IFJlbmRlcmVyU2VjdGlvbihiYWNrbG9nQ2FyZFNlbGVjdG9ycy5wYXJlbnRTZWxlY3Rvcik7XG5jb25zdCB1c2Vyc0xpc3QgPSBuZXcgUmVuZGVyZXJTZWN0aW9uKHVzZXJzQ2FyZFNlbGVjdG9ycy5wYXJlbnRTZWxlY3Rvcik7XG5jb25zdCBkYXRlc0NvbnRhaW5lciA9IG5ldyBSZW5kZXJlclNlY3Rpb24oY2FsZW5kYXJEYXRlU2VsZWN0b3JzLnBhcmVudFNlbGVjdG9yKTtcbmNvbnN0IGNhbGVuZGFyQ29udGFpbmVyID0gbmV3IENhbGVuZGFyKGNhbGVuZGFyQ29sdW1uU2VsZWN0b3JzLnBhcmVudFNlbGVjdG9yKTtcbmNhbGVuZGFyQ29udGFpbmVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IHJlbmRlckNhbGVuZGFySXRlbXMgPSAoSXRlbUNvbnN0cnVjdG9yLCBwYXJlbnRDb250YWluZXIsIHNlbGVjdG9ycywgaXNBbmltYXRlZCkgPT4ge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IFByb2plY3RTdGF0ZS5jYWxlbmRhckxlbmd0aDsgaSArPSAxKSB7XG4gICAgY29uc3QgdGhpc0RhdGUgPSBQcm9qZWN0U3RhdGUuc3RhcnREYXkgKyBmdWxsRGF5SW5NaWxsaXNlY29uZHMgKiBpO1xuICAgIGNvbnN0IGRhdGVTdHJpbmcgPSByZWZpbmVUb051bWVyaWNZWU1NREQodGhpc0RhdGUpO1xuXG4gICAgY29uc3QgdGhpc0l0ZW0gPSBuZXcgSXRlbUNvbnN0cnVjdG9yKHsgZGF0ZTogZGF0ZVN0cmluZyB9LCBzZWxlY3RvcnMpO1xuICAgIGNvbnN0IGRhdGVFbGVtZW50ID0gdGhpc0l0ZW0uY3JlYXRlRWxlbWVudCgpO1xuICAgIGlmIChpc0FuaW1hdGVkKSB7XG4gICAgICBhcHBseVNsaWRlSW5SaWdodExlZnRBbmltKGRhdGVFbGVtZW50LCBpLCBQcm9qZWN0U3RhdGUuY2FsZW5kYXJMZW5ndGggLSAxKTtcbiAgICB9XG4gICAgcGFyZW50Q29udGFpbmVyLmFkZEl0ZW0oZGF0ZUVsZW1lbnQpO1xuICB9XG59O1xuXG5jb25zdCByZW5kZXJEYXRlcyA9IChpc0FuaW1hdGVkKSA9PlxuICByZW5kZXJDYWxlbmRhckl0ZW1zKENhbGVuZGFyRGF0ZSwgZGF0ZXNDb250YWluZXIsIGNhbGVuZGFyRGF0ZVNlbGVjdG9ycywgaXNBbmltYXRlZCk7XG5jb25zdCByZW5kZXJDb2x1bW5zID0gKGlzQW5pbWF0ZWQpID0+XG4gIHJlbmRlckNhbGVuZGFySXRlbXMoQ2FsZW5kYXJDb2x1bW4sIGNhbGVuZGFyQ29udGFpbmVyLCBjYWxlbmRhckNvbHVtblNlbGVjdG9ycywgaXNBbmltYXRlZCk7XG5cbmNvbnN0IGNyZWF0ZUJhY2tsb2dDYXJkID0gKHRhc2spID0+IHtcbiAgY29uc3QgYmFja2xvZ0NhcmQgPSBuZXcgQmFja2xvZ0NhcmQodGFzaywgYmFja2xvZ0NhcmRTZWxlY3RvcnMpO1xuICBjb25zdCBuZXdCYWNrbG9nQ2FyZCA9IGJhY2tsb2dDYXJkLmNyZWF0ZUVsZW1lbnQoKTtcbiAgYmFja2xvZ0NhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgcmV0dXJuIG5ld0JhY2tsb2dDYXJkO1xufTtcblxuY29uc3QgcmVuZGVyQmFja2xvZ1Rhc2tzID0gKGlzQW5pbWF0ZWQpID0+IHtcbiAgUHJvamVjdFN0YXRlLmJhY2tsb2dUYXNrcy5mb3JFYWNoKCh0YXNrLCBpKSA9PiB7XG4gICAgY29uc3QgYmFja2xvZ0NhcmQgPSBjcmVhdGVCYWNrbG9nQ2FyZCh0YXNrKTtcbiAgICBpZiAoaXNBbmltYXRlZCkge1xuICAgICAgYXBwbHlTbGlkZUluQm90dG9tVXBBbmltKGJhY2tsb2dDYXJkLCBpLCBtYXhJbmRleEZvckFuaW1hdGlvbi5iYWNrbG9nQ2FyZHMpO1xuICAgIH1cbiAgICBiYWNrbG9nTGlzdC5hZGRJdGVtKGJhY2tsb2dDYXJkKTtcbiAgfSk7XG59O1xuXG5jb25zdCByZW5kZXJVc2VycyA9ICh1c2VycywgaXNBbmltYXRlZCkgPT5cbiAgdXNlcnMuZm9yRWFjaCgodXNlciwgaSkgPT4ge1xuICAgIGNvbnN0IHVzZXJDYXJkID0gbmV3IFVzZXJDYXJkKHVzZXIsIHVzZXJzQ2FyZFNlbGVjdG9ycyk7XG4gICAgY29uc3QgbmV3VXNlckNhcmQgPSB1c2VyQ2FyZC5jcmVhdGVDYXJkKCk7XG4gICAgaWYgKGlzQW5pbWF0ZWQpIHtcbiAgICAgIGFwcGx5U2xpZGVJbkJvdHRvbVVwQW5pbShuZXdVc2VyQ2FyZCwgaSwgbWF4SW5kZXhGb3JBbmltYXRpb24udXNlcnMpO1xuICAgIH1cbiAgICB1c2VyQ2FyZC5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHVzZXJzTGlzdC5hZGRJdGVtKG5ld1VzZXJDYXJkKTtcbiAgfSk7XG5cbi8vINC/0LXRgNCy0LDRjyDQvtGC0YDQuNGB0L7QstC60LAg0Lgg0L7QsdGA0LDQsdC+0YLQutCwINC00LDQvdC90YvRhSDRgSDRgdC10YDQstC10YDQsFxuY29uc3QgZ2V0SW5pdGlhbERhdGEgPSBhc3luYyAoKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgdXNlcnMgPSBhd2FpdCBnZXREYXRhKFVTRVJTX1JPVVRFKTtcbiAgICBjb25zdCB0YXNrcyA9IGF3YWl0IGdldERhdGEoVEFTS1NfUk9VVEUpO1xuXG4gICAgLy8g0YHQvtGA0YLQuNGA0L7QstC60LAg0LfQsNC00LDQvdC40Lkg0Lgg0LTQvtCx0LDQstC70LXQvdC40LUg0LjRhSDQsiDRgdGC0LXQudGCXG4gICAgdGFza3MuZm9yRWFjaCgodGFzaykgPT4ge1xuICAgICAgaWYgKHRhc2suZXhlY3V0b3IpIFByb2plY3RTdGF0ZS5hZGRUYXNrVG9Bc3NpZ25lZFRhc2tzKHRhc2spO1xuICAgICAgZWxzZSBQcm9qZWN0U3RhdGUuYWRkVGFza1RvQmFja2xvZyh0YXNrKTtcbiAgICB9KTtcbiAgICAvLyDRhNC+0YDQvNC40YDQvtCy0LDQvdC40LUg0L7QsdGK0LXQutGC0LAg0YEgaWQg0LjRgdC/0L7Qu9C90LjRgtC10LvQtdC5XG4gICAgUHJvamVjdFN0YXRlLnVzZXJzID0gdXNlcnM7XG4gICAgUHJvamVjdFN0YXRlLm1hcFVzZXJzSWRzKHVzZXJzKTtcbiAgICAvLyDRgNC10L3QtNC10YDQuNC90LNcbiAgICByZW5kZXJVc2Vycyh1c2VycywgdHJ1ZSk7XG4gICAgcmVuZGVyRGF0ZXModHJ1ZSk7XG4gICAgcmVuZGVyQ29sdW1ucyh0cnVlKTtcbiAgICByZW5kZXJCYWNrbG9nVGFza3ModHJ1ZSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHBvcHVwRXJyb3Iub3BlbigpO1xuICB9XG4gIHBhZ2UuY2xhc3NMaXN0LnJlbW92ZShwcmVsb2FkZXJTdGF0ZVNlbGVjdG9ycy5wYWdlSGlkZGVuQ2xhc3MpO1xuICBwcmVsb2FkZXIuY2xhc3NMaXN0LnJlbW92ZShwcmVsb2FkZXJTdGF0ZVNlbGVjdG9ycy5wcmVsb2FkZXJWaXNpYmxlQ2xhc3MpO1xufTtcblxuZ2V0SW5pdGlhbERhdGEoKTtcblxuLy8g0L/QvtC40YHQulxuaW5pdFNlYXJjaChiYWNrbG9nTGlzdCwgY3JlYXRlQmFja2xvZ0NhcmQsIHJlbmRlckJhY2tsb2dUYXNrcyk7XG4vLyDQv9C10YDQtdC70LjRgdGC0YvQstCw0L3QuNC1INC60LDQu9C10L3QtNCw0YDRj1xuaW5pdFN3aXRjaEJldHdlZW5XZWVrcyhcbiAgY2FsZW5kYXJDb250YWluZXIuY2xlYXJJdGVtcyxcbiAgZGF0ZXNDb250YWluZXIuY2xlYXJJdGVtcyxcbiAgcmVuZGVyRGF0ZXMsXG4gIHJlbmRlckNvbHVtbnNcbik7XG4vLyDQv9C10YDQtdC60LvRjtGH0LXQvdC40LUg0YLQtdC80YtcbmluaXRUb2dnbGVDb2xvclRoZW1lKHRvZ2dsZVRoZW1lU2V0dGluZ3MpO1xuXG4vLyDQtNC+0LHQsNCy0LvQtdC90LjQtSDQvdCw0LHQu9GO0LTQsNGC0LXQu9C10Lkg0LIg0YHRgtC10LnRgiDQtNC70Y8g0YDQtdGA0LXQvdC00LXRgNCwXG5Qcm9qZWN0U3RhdGUuYWRkU3Vic2NyaWJlcnMoW1xuICBjYWxlbmRhckNvbnRhaW5lci5jbGVhckl0ZW1zLFxuICBiYWNrbG9nTGlzdC5jbGVhckl0ZW1zLFxuICByZW5kZXJDb2x1bW5zLFxuICByZW5kZXJCYWNrbG9nVGFza3MsXG5dKTtcbiIsImltcG9ydCB7IHRpbWVyRGVsYXkgfSBmcm9tICcuLi9jb25maWcvY29uc3RhbnRzJztcblxuY2xhc3MgUG9wdXBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9ycykge1xuICAgIHRoaXMuX3NlbGVjdG9ycyA9IHNlbGVjdG9ycztcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLnBvcHVwRXJyb3IpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NlbGVjdG9ycy5wb3B1cE9wZW5DbGFzcyk7XG4gICAgdGhpcy5fY2xvc2UoKTtcbiAgfVxuXG4gIF9jbG9zZSgpIHtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2VsZWN0b3JzLnBvcHVwT3BlbkNsYXNzKTtcbiAgICB9LCB0aW1lckRlbGF5KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cEVycm9yO1xuIiwiaW1wb3J0IFByb2plY3RTdGF0ZSBmcm9tICcuLi9zdGF0ZS9Qcm9qZWN0U3RhdGUnO1xuaW1wb3J0IFJlbmRlcmVyU2VjdGlvbiBmcm9tICcuL1JlbmRlcmVyU2VjdGlvbic7XG5pbXBvcnQgeyBBU1NJR05fQllfREFURSB9IGZyb20gJy4uL3N0YXRlL3R5cGVzJztcbmltcG9ydCB7IGNhbGVuZGFyQ2VsbFNlbGVjdG9ycywgY2FsZW5kYXJUYXNrU2VsZWN0b3JzIH0gZnJvbSAnLi4vY29uZmlnL2NvbnN0YW50cyc7XG5cbmNsYXNzIENhbGVuZGFyIGV4dGVuZHMgUmVuZGVyZXJTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICBzdXBlcihjb250YWluZXJTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlRHJhZ092ZXIgPSB0aGlzLl9oYW5kbGVEcmFnT3Zlci5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX2hhbmRsZURyYWdMZWF2ZSA9IHRoaXMuX2hhbmRsZURyYWdMZWF2ZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX2hhbmRsZURyb3AgPSB0aGlzLl9oYW5kbGVEcm9wLmJpbmQodGhpcyk7XG4gIH1cblxuICBfaGFuZGxlRHJhZ092ZXIoZXZ0KSB7XG4gICAgY29uc3QgeyB0YXJnZXQgfSA9IGV2dDtcbiAgICBpZiAoXG4gICAgICBldnQuZGF0YVRyYW5zZmVyICYmXG4gICAgICBldnQuZGF0YVRyYW5zZmVyLnR5cGVzWzBdID09PSAndGV4dC9wbGFpbicgJiZcbiAgICAgICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKGNhbGVuZGFyQ2VsbFNlbGVjdG9ycy5lbGVtZW50Q2xhc3MpIHx8XG4gICAgICAgIHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoY2FsZW5kYXJUYXNrU2VsZWN0b3JzLmVsZW1lbnRDbGFzcykpXG4gICAgKSB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2Ryb3BwYWJsZUNlbGwgPSB0YXJnZXQuY2xvc2VzdChjYWxlbmRhckNlbGxTZWxlY3RvcnMuZWxlbWVudFNlbGVjdG9yKTtcbiAgICAgIHRoaXMuX2Ryb3BwYWJsZUNlbGwuY2xhc3NMaXN0LmFkZChjYWxlbmRhckNlbGxTZWxlY3RvcnMuZHJhZ092ZXJDbGFzcyk7XG4gICAgfVxuICB9XG5cbiAgX2hhbmRsZURyYWdMZWF2ZSgpIHtcbiAgICB0aGlzLl9kcm9wcGFibGVDZWxsLmNsYXNzTGlzdC5yZW1vdmUoY2FsZW5kYXJDZWxsU2VsZWN0b3JzLmRyYWdPdmVyQ2xhc3MpO1xuICB9XG5cbiAgX2hhbmRsZURyb3AoZXZ0KSB7XG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgdGFza0lkID0gZXZ0LmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJyk7XG4gICAgUHJvamVjdFN0YXRlLmFzc2lnblRhc2soe1xuICAgICAgdHlwZTogQVNTSUdOX0JZX0RBVEUsXG4gICAgICB0YXNrSWQsXG4gICAgICBleGVjdXRvcklkOiB0aGlzLl9kcm9wcGFibGVDZWxsLmRhdGFzZXQuZXhlY3V0b3IsXG4gICAgICBzdGFydERhdGU6IHRoaXMuX2Ryb3BwYWJsZUNlbGwuZGF0YXNldC5kYXRlLFxuICAgIH0pO1xuICAgIHRoaXMuX2hhbmRsZURyYWdMZWF2ZSgpO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgdGhpcy5faGFuZGxlRHJhZ092ZXIpO1xuICAgIHRoaXMuX2NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdkcmFnbGVhdmUnLCB0aGlzLl9oYW5kbGVEcmFnTGVhdmUpO1xuICAgIHRoaXMuX2NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgdGhpcy5faGFuZGxlRHJvcCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2FsZW5kYXI7XG4iLCJleHBvcnQgY29uc3QgQkFTRV9VUkwgPVxuICAnaHR0cHM6Ly92YXJhbmtpbl9kZXYuZWxtYTM2NS5ydS9hcGkvZXh0ZW5zaW9ucy8yYTM4NzYwZS0wODNhLTRkZDAtYWViYy03OGI1NzBiZmQzYzcvc2NyaXB0JztcbmV4cG9ydCBjb25zdCBVU0VSU19ST1VURSA9ICcvdXNlcnMnO1xuZXhwb3J0IGNvbnN0IFRBU0tTX1JPVVRFID0gJy90YXNrcyc7XG4iLCJpbXBvcnQgeyBzZWFyY2hGb3JtU2VsZWN0b3JzLCB0aW1lckRlbGF5IH0gZnJvbSAnLi4vY29uZmlnL2NvbnN0YW50cyc7XG5pbXBvcnQgUHJvamVjdFN0YXRlIGZyb20gJy4uL3N0YXRlL1Byb2plY3RTdGF0ZSc7XG5cbmNvbnN0IGluaXRTZWFyY2ggPSAoY29udGFpbmVyLCBjcmVhdGVDYXJkQ2FsbGJhY2ssIHJlbmRlckNhbGxiYWNrKSA9PiB7XG4gIGNvbnN0IHNlYXJjaEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlYXJjaEZvcm1TZWxlY3RvcnMuc2VhcmNoRm9ybSk7XG4gIGNvbnN0IHNlYXJjaElucHV0ID0gc2VhcmNoRm9ybS5xdWVyeVNlbGVjdG9yKHNlYXJjaEZvcm1TZWxlY3RvcnMuc2VhcmNoSW5wdXQpO1xuICBjb25zdCBzdWJtaXRCdXR0b24gPSBzZWFyY2hGb3JtLnF1ZXJ5U2VsZWN0b3Ioc2VhcmNoRm9ybVNlbGVjdG9ycy5zdWJtaXRCdXR0b24pO1xuXG4gIGNvbnN0IGhhbmRsZVNlYXJjaCA9IChldnQpID0+IHtcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBrZXl3b3JkID0gc2VhcmNoSW5wdXQudmFsdWU7XG4gICAgbGV0IHJlc3VsdDtcbiAgICBpZiAoa2V5d29yZC5sZW5ndGgpIHtcbiAgICAgIHJlc3VsdCA9IFByb2plY3RTdGF0ZS5iYWNrbG9nVGFza3MuZmlsdGVyKCh0YXNrKSA9PlxuICAgICAgICB0YXNrLnN1YmplY3QudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhrZXl3b3JkLnRvTG93ZXJDYXNlKCkpXG4gICAgICApO1xuICAgICAgY29udGFpbmVyLmNsZWFySXRlbXMoKTtcblxuICAgICAgaWYgKHJlc3VsdC5sZW5ndGgpIHtcbiAgICAgICAgcmVzdWx0LmZvckVhY2goKHRhc2spID0+IHtcbiAgICAgICAgICBjb25zdCBiYWNrbG9nQ2FyZCA9IGNyZWF0ZUNhcmRDYWxsYmFjayh0YXNrKTtcbiAgICAgICAgICBjb250YWluZXIuYWRkSXRlbShiYWNrbG9nQ2FyZCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29udGFpbmVyLmFkZFRleHRDb250ZW50KCfQndC40YfQtdCz0L4g0L3QtSDQvdCw0YjQu9C+0YHRjCcpO1xuICAgICAgICBzdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBjb250YWluZXIuY2xlYXJJdGVtcygpO1xuICAgICAgICAgIHJlbmRlckNhbGxiYWNrKCk7XG4gICAgICAgICAgc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgIH0sIHRpbWVyRGVsYXkpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBzZWFyY2hGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGhhbmRsZVNlYXJjaCk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBpbml0U2VhcmNoO1xuIiwiaW1wb3J0IFByb2plY3RTdGF0ZSBmcm9tICcuLi9zdGF0ZS9Qcm9qZWN0U3RhdGUnO1xuaW1wb3J0IHsgZnVsbERheUluTWlsbGlzZWNvbmRzLCB3ZWVrQnV0dG9uc1NlbGVjdG9ycyB9IGZyb20gJy4uL2NvbmZpZy9jb25zdGFudHMnO1xuXG5jb25zdCBpbml0U3dpdGNoQmV0d2VlbldlZWtzID0gKFxuICBjbGVhckNvbnRhaW5lckNhbGxiYWNrLFxuICBjbGVhckRhdGVzQ2FsbGJhY2ssXG4gIHJlbmRlckRhdGVzLFxuICByZW5kZXJDZWxsc0NhbGxiYWNrXG4pID0+IHtcbiAgY29uc3Qgc2hvd05leHRXZWVrID0gKCkgPT4ge1xuICAgIGNsZWFyQ29udGFpbmVyQ2FsbGJhY2soKTtcbiAgICBjbGVhckRhdGVzQ2FsbGJhY2soKTtcbiAgICBQcm9qZWN0U3RhdGUuc3RhcnREYXkgKz0gZnVsbERheUluTWlsbGlzZWNvbmRzICogNztcbiAgICByZW5kZXJEYXRlcygpO1xuICAgIHJlbmRlckNlbGxzQ2FsbGJhY2soKTtcbiAgfTtcblxuICBjb25zdCBzaG93UHJldldlZWsgPSAoKSA9PiB7XG4gICAgY2xlYXJDb250YWluZXJDYWxsYmFjaygpO1xuICAgIGNsZWFyRGF0ZXNDYWxsYmFjaygpO1xuICAgIFByb2plY3RTdGF0ZS5zdGFydERheSAtPSBmdWxsRGF5SW5NaWxsaXNlY29uZHMgKiA3O1xuICAgIHJlbmRlckRhdGVzKCk7XG4gICAgcmVuZGVyQ2VsbHNDYWxsYmFjaygpO1xuICB9O1xuXG4gIGNvbnN0IG5leHRXZWVrQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih3ZWVrQnV0dG9uc1NlbGVjdG9ycy5uZXh0V2Vla0J1dHRvbik7XG4gIGNvbnN0IHByZXZXZWVrQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih3ZWVrQnV0dG9uc1NlbGVjdG9ycy5wcmV2V2Vla0J1dHRvbik7XG5cbiAgbmV4dFdlZWtCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzaG93TmV4dFdlZWspO1xuICBwcmV2V2Vla0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNob3dQcmV2V2Vlayk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBpbml0U3dpdGNoQmV0d2VlbldlZWtzO1xuIiwiaW1wb3J0IHsgbG9jYWxTdG9yYWdlVGhlbWVLZXkgfSBmcm9tICcuLi9jb25maWcvY29uc3RhbnRzJztcblxuY29uc3QgaW5pdFRvZ2dsZUNvbG9yVGhlbWUgPSAoeyBib2R5U2VsZWN0b3IsIGJvZHlOZXdUaGVtZUNsYXNzLCBidXR0b25TZWxlY3RvciB9KSA9PiB7XG4gIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGJvZHlTZWxlY3Rvcik7XG4gIGNvbnN0IGNoYW5nZUNvbG9yVGhlbWVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGJ1dHRvblNlbGVjdG9yKTtcblxuICBjb25zdCBpc1RoZW1lRGFyayA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0obG9jYWxTdG9yYWdlVGhlbWVLZXkpKTtcblxuICBpZiAoaXNUaGVtZURhcmspIHtcbiAgICBib2R5LmNsYXNzTGlzdC5hZGQoYm9keU5ld1RoZW1lQ2xhc3MpO1xuICB9XG5cbiAgY29uc3QgdG9nZ2xlQW5kTWVtb1RoZW1lID0gKCkgPT4ge1xuICAgIGlmIChib2R5LmNsYXNzTGlzdC5jb250YWlucyhib2R5TmV3VGhlbWVDbGFzcykpIHtcbiAgICAgIGJvZHkuY2xhc3NMaXN0LnJlbW92ZShib2R5TmV3VGhlbWVDbGFzcyk7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShsb2NhbFN0b3JhZ2VUaGVtZUtleSwgSlNPTi5zdHJpbmdpZnkoZmFsc2UpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYm9keS5jbGFzc0xpc3QuYWRkKGJvZHlOZXdUaGVtZUNsYXNzKTtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGxvY2FsU3RvcmFnZVRoZW1lS2V5LCBKU09OLnN0cmluZ2lmeSh0cnVlKSk7XG4gICAgfVxuICB9O1xuXG4gIGNoYW5nZUNvbG9yVGhlbWVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGVBbmRNZW1vVGhlbWUpO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgaW5pdFRvZ2dsZUNvbG9yVGhlbWU7XG4iXSwibmFtZXMiOlsiQVNTSUdOX0JZX0RBVEUiLCJiYWNrbG9nQ2FyZFNlbGVjdG9ycyIsInBhcmVudFNlbGVjdG9yIiwidGVtcGxhdGVTZWxlY3RvciIsImVsZW1lbnRTZWxlY3RvciIsInRpdGxlU2VsZWN0b3IiLCJkZXNjcmlwdGlvblNlbGVjdG9yIiwic3RhcnREYXRlU2VsZWN0b3IiLCJlbmREYXRlU2VsZWN0b3IiLCJkcmFnU3RhcnRDbGFzcyIsInVzZXJzQ2FyZFNlbGVjdG9ycyIsInVzZXJOYW1lU2VsZWN0b3IiLCJkcmFnT3ZlckNsYXNzIiwiY2FsZW5kYXJEYXRlU2VsZWN0b3JzIiwiY3VycmVudERheUNsYXNzIiwiY2FsZW5kYXJDb2x1bW5TZWxlY3RvcnMiLCJjYWxlbmRhckNlbGxTZWxlY3RvcnMiLCJlbGVtZW50Q2xhc3MiLCJjYWxlbmRhclRhc2tTZWxlY3RvcnMiLCJzdWJ0aXRsZVNlbGVjdG9yIiwiZGF0ZVNldHRpbmdzIiwid2Vla2RheSIsInllYXIiLCJtb250aCIsImRheSIsImxvY2FsU3RvcmFnZVRoZW1lS2V5IiwicmVmaW5lVG9TdHJpbmciLCJkYXRlIiwiRGF0ZSIsInRvTG9jYWxlRGF0ZVN0cmluZyIsInJlZmluZVRvTnVtZXJpY1lZTU1ERCIsImNvbnN0cnVjdG9yIiwidGhpcyIsIl9zdWJzY3JpYmVycyIsIl9hc3NpZ25lZFRhc2tzIiwiX2JhY2tsb2dUYXNrcyIsIl91c2VycyIsIl91c2Vyc0lkcyIsIl9jYWxlbmRhckxlbmd0aCIsIl9jdXJyZW50RGF0ZSIsIl9jdXJyZW50RGF0ZU51bWVyaWMiLCJfc3RhcnREYXkiLCJfdXBkYXRlQW5kU2V0RGF0ZXMiLCJfcmVtb3ZlVGFza0Zyb21CYWNrbG9nIiwidGFza0lkIiwiZmlsdGVyIiwidGFzayIsImlkIiwiX2NhbGxTdWJzY3JpYmVycyIsImZvckVhY2giLCJsaXN0ZW5lciIsInN0YXJ0RGF0ZSIsInNldEhvdXJzIiwic2V0RGF0ZSIsImdldERhdGUiLCJnZXREYXkiLCJhc3NpZ25lZFRhc2tzIiwiYmFja2xvZ1Rhc2tzIiwidXNlcnNJZHMiLCJ1c2VycyIsInZhbHVlIiwiY2FsZW5kYXJMZW5ndGgiLCJzdGFydERheSIsImN1cnJlbnREYXRlTnVtZXJpYyIsImFkZFRhc2tUb0Fzc2lnbmVkVGFza3MiLCJwdXNoIiwiYXNzaWduVGFzayIsInR5cGUiLCJleGVjdXRvcklkIiwidGFza1RvQmVBc3NpZ25lZCIsImZpbmQiLCJleGVjdXRvciIsInBhcnNlIiwicGxhbkVuZERhdGUiLCJwbGFuU3RhcnREYXRlIiwiZGF0ZURpZmZlcmVuY2UiLCJuZXdFbmREYXRlIiwiYWRkVGFza1RvQmFja2xvZyIsIm1hcFVzZXJzSWRzIiwiaWRzIiwicmVkdWNlIiwib2JqIiwiaSIsImFkZFN1YnNjcmliZXJzIiwic3Vic2NyaWJlcnMiLCJhc3luYyIsInJvdXRlIiwicmVzIiwiZmV0Y2giLCJtZXRob2QiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0IiwiX3RlbXBsYXRlU2VsZWN0b3IiLCJfZWxlbWVudFNlbGVjdG9yIiwiX2dldFRlbXBsYXRlIiwiX3RlbXBsYXRlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsImNhcmREYXRhIiwic3VwZXIiLCJfY2FyZERhdGEiLCJfYmFja2xvZ0NhcmQiLCJfZHJhZ1N0YXJ0Q2xhc3MiLCJfY2FyZFRpdGxlIiwiX2NhcmREZXNjcmlwdGlvbiIsIl9jYXJkU3RhcnREYXRlIiwiX2NhcmRFbmREYXRlIiwiX2hhbmRsZURyYWdTdGFydCIsImJpbmQiLCJfaGFuZGxlRHJhZ0VuZCIsImV2dCIsImNsYXNzTGlzdCIsImFkZCIsImRhdGFUcmFuc2ZlciIsInNldERhdGEiLCJlZmZlY3RBbGxvd2VkIiwicmVtb3ZlIiwiY3JlYXRlRWxlbWVudCIsInRleHRDb250ZW50Iiwic3ViamVjdCIsImRlc2NyaXB0aW9uIiwic2V0QXR0cmlidXRlIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJhZGRFdmVudExpc3RlbmVyIiwiY29udGFpbmVyU2VsZWN0b3IiLCJfY29udGFpbmVyIiwiY2xlYXJJdGVtcyIsImFkZEl0ZW0iLCJpdGVtIiwiYXBwZW5kIiwiYWRkVGV4dENvbnRlbnQiLCJfdGFzayIsIl90YXNrRWxlbWVudCIsIl90aXRsZUVMZW1lbnQiLCJfc3VidGl0bGVFTGVtZW50IiwiX2Rlc2NyaXB0aW9uRWxlbWVudCIsIl9zdGFydERhdGVFbGVtZW50IiwiX2VuZERhdGVFbGVtZW50IiwiY2VsbCIsIl9jZWxsIiwiX2NlbGxFbGVtZW50IiwiX2FkZEl0ZW0iLCJyZW5kZXJJdGVtcyIsInRhc2tzIiwibmV3VGFzayIsImNvbHVtbiIsIl9jb2x1bW4iLCJfY2FsZW5kYXJDb2x1bW4iLCJfZGF5VGFza3NTY2hlbWEiLCJfZ2V0VGFza3NGb3JDdXJyZW50RGF5IiwicGFyc2VkQ29sdW1uRGF0ZSIsIl9nZXREYXlUYXNrc1NjaGVtYSIsIl90YXNrc0ZvckN1cnJlbnREYXkiLCJjcmVhdGVDZWxscyIsInVzZXJJZCIsImNvbHVtbkNlbGwiLCJjZWxsRWxlbWVudCIsIl9kYXRlIiwiX2N1cnJlbnREYXlDbGFzcyIsIl9kYXRlRWxlbWVudCIsImNlbGxEYXRlIiwiX3VzZXJDYXJkIiwiX2Z1bGxOYW1lRWxlbWVudCIsIl9kcmFnT3ZlckNsYXNzIiwiX2hhbmRsZURyYWdPdmVyIiwiX2hhbmRsZURyYWdMZWF2ZSIsIl9oYW5kbGVEcm9wIiwidHlwZXMiLCJwcmV2ZW50RGVmYXVsdCIsImdldERhdGEiLCJjcmVhdGVDYXJkIiwiZmlyc3ROYW1lIiwic3VybmFtZSIsInJlbW92ZUFuaW1hdGlvbiIsImVsZW1lbnQiLCJzZXRUaW1lb3V0IiwicmVtb3ZlQXR0cmlidXRlIiwiYXBwbHlTbGlkZUluQm90dG9tVXBBbmltIiwiaW5kZXgiLCJsYXN0SW5kZXgiLCJwYWdlIiwicHJlbG9hZGVyIiwicG9wdXBFcnJvciIsInNlbGVjdG9ycyIsIl9zZWxlY3RvcnMiLCJfcG9wdXAiLCJvcGVuIiwicG9wdXBPcGVuQ2xhc3MiLCJfY2xvc2UiLCJiYWNrbG9nTGlzdCIsInVzZXJzTGlzdCIsImRhdGVzQ29udGFpbmVyIiwiY2FsZW5kYXJDb250YWluZXIiLCJ0YXJnZXQiLCJjb250YWlucyIsIl9kcm9wcGFibGVDZWxsIiwiY2xvc2VzdCIsImRhdGFzZXQiLCJyZW5kZXJDYWxlbmRhckl0ZW1zIiwiSXRlbUNvbnN0cnVjdG9yIiwicGFyZW50Q29udGFpbmVyIiwiaXNBbmltYXRlZCIsInRoaXNEYXRlIiwiZGF0ZUVsZW1lbnQiLCJyZW5kZXJEYXRlcyIsInJlbmRlckNvbHVtbnMiLCJjcmVhdGVCYWNrbG9nQ2FyZCIsImJhY2tsb2dDYXJkIiwibmV3QmFja2xvZ0NhcmQiLCJyZW5kZXJCYWNrbG9nVGFza3MiLCJ1c2VyIiwidXNlckNhcmQiLCJuZXdVc2VyQ2FyZCIsInJlbmRlclVzZXJzIiwiZXJyIiwiZ2V0SW5pdGlhbERhdGEiLCJjb250YWluZXIiLCJjcmVhdGVDYXJkQ2FsbGJhY2siLCJyZW5kZXJDYWxsYmFjayIsInNlYXJjaEZvcm0iLCJzZWFyY2hJbnB1dCIsInN1Ym1pdEJ1dHRvbiIsImtleXdvcmQiLCJyZXN1bHQiLCJsZW5ndGgiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwiZGlzYWJsZWQiLCJjbGVhckNvbnRhaW5lckNhbGxiYWNrIiwiY2xlYXJEYXRlc0NhbGxiYWNrIiwicmVuZGVyQ2VsbHNDYWxsYmFjayIsIm5leHRXZWVrQnV0dG9uIiwicHJldldlZWtCdXR0b24iLCJmdWxsRGF5SW5NaWxsaXNlY29uZHMiLCJib2R5U2VsZWN0b3IiLCJib2R5TmV3VGhlbWVDbGFzcyIsImJ1dHRvblNlbGVjdG9yIiwiYm9keSIsImNoYW5nZUNvbG9yVGhlbWVCdXR0b24iLCJKU09OIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJidXR0b25OZXdUaGVtZUNsYXNzIl0sInNvdXJjZVJvb3QiOiIifQ==