(()=>{"use strict";const e="assignByDate",t={parentSelector:".backlog__tasks-container",templateSelector:".template-card-backlog",elementSelector:".card-backlog",titleSelector:".card-backlog__title",descriptionSelector:".card-backlog__description",startDateSelector:".card-backlog__date-span_start",endDateSelector:".card-backlog__date-span_end",dragStartClass:"card-backlog_draggable"},a={parentSelector:".board__users",templateSelector:".template-card-user",elementSelector:".card-user",userNameSelector:".card-user__name",dragOverClass:"card-user_drag-over"},s={parentSelector:".board__dates",templateSelector:".template-calendar-date",elementSelector:".calendar-date",currentDayClass:"calendar-date_current"},r={parentSelector:".board__calendar",templateSelector:".template-calendar-column",elementSelector:".calendar-column"},l={templateSelector:".template-calendar-cell",elementSelector:".calendar-cell",elementClass:"calendar-cell",dragOverClass:"calendar-cell_drag-over"},n={templateSelector:".template-calendar-task",elementSelector:".calendar-task",elementClass:"calendar-task",titleSelector:".calendar-task__title",subtitleSelector:".calendar-task__subtitle",descriptionSelector:".calendar-task__description",startDateSelector:".calendar-task__date-span_start",endDateSelector:".calendar-task__date-span_end"},c="ru-RU",i={weekday:"short",year:"numeric",month:"short",day:"numeric"},d={day:"numeric",month:"numeric"},o="isThemeDark",h=e=>new Date(e).toLocaleDateString(c,i),_=e=>new Date(e).toLocaleDateString("en-CA"),u=new class{constructor(){this._subscribers=[],this._assignedTasks=[],this._backlogTasks=[],this._users=[],this._usersIds={},this._calendarLength=7,this._currentDate=new Date,this._currentDateNumeric=_(new Date),this._startDay=this._updateAndSetDates()}_removeTaskFromBacklog(e){this._backlogTasks=this._backlogTasks.filter((t=>t.id!==e))}_callSubscribers(){this._subscribers.forEach((e=>e()))}_updateAndSetDates(){const e=new Date(this._currentDate.setHours(0,0,0,0));return e.setDate(e.getDate()-e.getDay()+(0===e.getDay()?-6:1))}get assignedTasks(){return this._assignedTasks}get backlogTasks(){return this._backlogTasks}get usersIds(){return this._usersIds}set users(e){this._users=e}get users(){return this._users}get calendarLength(){return this._calendarLength}get startDay(){return this._startDay}set startDay(e){this._startDay=e}get currentDateNumeric(){return this._currentDateNumeric}addTaskToAssignedTasks(e){this._assignedTasks.push(e)}assignTask({type:t,taskId:a,executorId:s,startDate:r}){const l=this._backlogTasks.find((e=>a===e.id));if(l.executor=+s,t===e){if(this._currentDate>Date.parse(r))return;if(l.planEndDate===l.planStartDate)l.planEndDate=r;else{const e=Date.parse(l.planEndDate)-Date.parse(l.planStartDate),t=Date.parse(r)+e;l.planEndDate=_(t)}l.planStartDate=r}this.addTaskToAssignedTasks(l),this._removeTaskFromBacklog(a),this._callSubscribers()}addTaskToBacklog(e){this._backlogTasks.push(e)}mapUsersIds(e){const t=e.reduce(((e,{id:t},a)=>({...e,[a]:t})),{});this._usersIds={...t}}addSubscribers(e){this._subscribers=[...e]}},m=async e=>{return(t=await fetch(`https://varankin_dev.elma365.ru/api/extensions/2a38760e-083a-4dd0-aebc-78b570bfd3c7/script${e}`,{method:"GET"})).ok?t.json():Promise.reject(t);var t},p=class{constructor({templateSelector:e,elementSelector:t}){this._templateSelector=e,this._elementSelector=t}_getTemplate(){return this._template=document.querySelector(this._templateSelector).content,this._template.querySelector(this._elementSelector).cloneNode(!0)}},S=class extends p{constructor(e,{templateSelector:t,elementSelector:a,titleSelector:s,descriptionSelector:r,startDateSelector:l,endDateSelector:n,dragStartClass:c}){super({templateSelector:t,elementSelector:a}),this._cardData=e,this._backlogCard=super._getTemplate(),this._dragStartClass=c,this._cardTitle=this._backlogCard.querySelector(s),this._cardDescription=this._backlogCard.querySelector(r),this._cardStartDate=this._backlogCard.querySelector(l),this._cardEndDate=this._backlogCard.querySelector(n),this._handleDragStart=this._handleDragStart.bind(this),this._handleDragEnd=this._handleDragEnd.bind(this)}_handleDragStart(e){this._backlogCard.classList.add(this._dragStartClass),e.dataTransfer.setData("text/plain",this._cardData.id),e.dataTransfer.effectAllowed="move"}_handleDragEnd(){this._backlogCard.classList.remove(this._dragStartClass)}createElement(){return this._cardTitle.textContent=this._cardData.subject,this._cardDescription.textContent=this._cardData.description,this._cardStartDate.textContent=h(this._cardData.planStartDate),this._cardEndDate.textContent=h(this._cardData.planEndDate),this._backlogCard.setAttribute("id",this._cardData.id),this._backlogCard}setEventListeners(){this._backlogCard.addEventListener("dragstart",this._handleDragStart),this._backlogCard.addEventListener("dragend",this._handleDragEnd)}},g=class{constructor(e){this._container=document.querySelector(e),this.clearItems=this.clearItems.bind(this)}addItem(e){this._container.append(e)}clearItems(){this._container.textContent=""}addTextContent(e){this._container.textContent=e}},D=class extends p{constructor(e,{templateSelector:t,elementSelector:a,titleSelector:s,subtitleSelector:r,descriptionSelector:l,startDateSelector:n,endDateSelector:c}){super({templateSelector:t,elementSelector:a}),this._task=e,this._taskElement=super._getTemplate(),this._titleELement=this._taskElement.querySelector(s),this._subtitleELement=this._taskElement.querySelector(r),this._descriptionElement=this._taskElement.querySelector(l),this._startDateElement=this._taskElement.querySelector(n),this._endDateElement=this._taskElement.querySelector(c)}createElement(){return this._titleELement.textContent=this._task.subject,this._subtitleELement.textContent=this._task.subject,this._descriptionElement.textContent=this._task.description,this._startDateElement.textContent=h(this._task.planStartDate),this._endDateElement.textContent=h(this._task.planEndDate),this._taskElement}},k=class extends p{constructor(e,{templateSelector:t,elementSelector:a}){super({templateSelector:t,elementSelector:a}),this._cell=e,this._cellElement=super._getTemplate()}_addItem(e){this._cellElement.append(e)}createElement(){return this._cellElement.setAttribute("data-executor",this._cell.executor),this._cellElement.setAttribute("data-date",this._cell.date),this._cellElement}renderItems(){this._cell.tasks.forEach((e=>{const t=new D(e,n);this._addItem(t.createElement())}))}},b=class extends p{constructor(e,{templateSelector:t,elementSelector:a}){super({templateSelector:t,elementSelector:a}),this._column=e,this._calendarColumn=super._getTemplate(),this._dayTasksSchema={}}_getTasksForCurrentDay(e){const t=Date.parse(this._column.date);return e.filter((e=>Date.parse(e.planStartDate)<=t&&t<=Date.parse(e.planEndDate)))}_getDayTasksSchema(){this._tasksForCurrentDay=this._getTasksForCurrentDay(u.assignedTasks),this._tasksForCurrentDay&&this._tasksForCurrentDay.forEach((e=>{this._dayTasksSchema[e.executor]?this._dayTasksSchema[e.executor]=[...this._dayTasksSchema[e.executor],e]:this._dayTasksSchema[e.executor]=[e]}))}createCells(){this._getDayTasksSchema();for(let e=0;e<u.users.length;e+=1){const t=u.usersIds[e],a=new k({executor:t,date:this._column.date,tasks:this._dayTasksSchema[t]??[]},l),s=a.createElement();a.renderItems(),this.addItem(s)}}createElement(){return this.createCells(),this._calendarColumn}addItem(e){this._calendarColumn.append(e)}},C=class extends p{constructor({date:e},{templateSelector:t,elementSelector:a,currentDayClass:s}){super({templateSelector:t,elementSelector:a}),this._date=e,this._currentDayClass=s,this._dateElement=super._getTemplate()}createElement(){const e=new Date(this._date);return this._dateElement.textContent=new Date(e).toLocaleDateString(c,d),this._date===u.currentDateNumeric&&this._dateElement.classList.add(this._currentDayClass),this._dateElement}},E=class extends p{constructor(e,{templateSelector:t,elementSelector:a,userNameSelector:s,dragOverClass:r}){super({templateSelector:t,elementSelector:a}),this._cardData=e,this._userCard=super._getTemplate(),this._fullNameElement=this._userCard.querySelector(s),this._dragOverClass=r,this._handleDragOver=this._handleDragOver.bind(this),this._handleDragLeave=this._handleDragLeave.bind(this),this._handleDrop=this._handleDrop.bind(this)}_handleDragOver(e){e.dataTransfer&&"text/plain"===e.dataTransfer.types[0]&&(e.preventDefault(),this._userCard.classList.add(this._dragOverClass))}_handleDragLeave(){this._userCard.classList.remove(this._dragOverClass)}_handleDrop(e){e.preventDefault();const t=e.dataTransfer.getData("text/plain");u.assignTask({type:"assignByUser",taskId:t,executorId:this._cardData.id}),this._handleDragLeave()}createCard(){return this._fullNameElement.textContent=`${this._cardData.firstName} ${this._cardData.surname}`,this._userCard}setEventListeners(){this._userCard.addEventListener("dragover",this._handleDragOver),this._userCard.addEventListener("dragleave",this._handleDragLeave),this._userCard.addEventListener("drop",this._handleDrop)}},y=e=>{setTimeout((()=>{e.removeAttribute("style")}),1100)},v=(e,t)=>{e.setAttribute("style",`animation: slide-in-bottom-up 0.5s ease-out 0.${t}s forwards; opacity: 0;`),y(e)},T=(e,t)=>{e.setAttribute("style",`animation: slide-in-right-left 0.5s ease-out 0.${t}s forwards; opacity: 0;`),y(e)},L=document.querySelector(".page"),f=document.querySelector(".preloader"),x=new class{constructor(e){this._selectors=e,this._popup=document.querySelector(e.popupError)}open(){this._popup.classList.add(this._selectors.popupOpenClass),this._close()}_close(){setTimeout((()=>{this._popup.classList.remove(this._selectors.popupOpenClass)}),3e3)}}({popupError:".popup_error",popupOpenClass:"popup_open"}),I=new g(t.parentSelector),w=new g(a.parentSelector),q=new g(s.parentSelector),O=new class extends g{constructor(e){super(e),this._handleDragOver=this._handleDragOver.bind(this),this._handleDragLeave=this._handleDragLeave.bind(this),this._handleDrop=this._handleDrop.bind(this)}_handleDragOver(e){const{target:t}=e;e.dataTransfer&&"text/plain"===e.dataTransfer.types[0]&&(t.classList.contains(l.elementClass)||t.classList.contains(n.elementClass))&&(e.preventDefault(),this._droppableCell=t.closest(l.elementSelector),this._droppableCell.classList.add(l.dragOverClass))}_handleDragLeave(){this._droppableCell.classList.remove(l.dragOverClass)}_handleDrop(t){t.preventDefault();const a=t.dataTransfer.getData("text/plain");u.assignTask({type:e,taskId:a,executorId:this._droppableCell.dataset.executor,startDate:this._droppableCell.dataset.date}),this._handleDragLeave()}setEventListeners(){this._container.addEventListener("dragover",this._handleDragOver),this._container.addEventListener("dragleave",this._handleDragLeave),this._container.addEventListener("drop",this._handleDrop)}}(r.parentSelector);O.setEventListeners();const N=e=>{for(let t=0;t<u.calendarLength;t+=1){const a=u.startDay+864e5*t,l=_(a),n=new C({date:l},s),c=new b({date:l},r),i=n.createElement(),d=c.createElement();e&&(T(i,t),T(d,t)),q.addItem(i),O.addItem(d)}},A=e=>{const a=new S(e,t),s=a.createElement();return a.setEventListeners(),s},F=e=>{u.backlogTasks.forEach(((t,a)=>{const s=A(t);e&&a<=12&&v(s,a),I.addItem(s)}))};Promise.all([m("/users"),m("/tasks")]).then((([e,t])=>{t.forEach((e=>{e.executor?u.addTaskToAssignedTasks(e):u.addTaskToBacklog(e)})),u.users=e,u.mapUsersIds(e),((e,t)=>{e.forEach(((e,t)=>{const s=new E(e,a),r=s.createCard();t<=8&&v(r,t),s.setEventListeners(),w.addItem(r)}))})(e),N(!0),F(!0)})).catch((()=>x.open())).finally((()=>{L.classList.remove("page_hidden"),f.classList.remove("preloader_visible")})),((e,t,a)=>{const s=document.querySelector(".search-form"),r=s.querySelector(".search-form__input"),l=s.querySelector(".button_search");s.addEventListener("submit",(s=>{s.preventDefault();const n=r.value;let c;n.length&&(c=u.backlogTasks.filter((e=>e.subject.toLowerCase().includes(n.toLowerCase()))),e.clearItems(),c.length?c.forEach((a=>{const s=t(a);e.addItem(s)})):(e.addTextContent("Ничего не нашлось"),l.disabled=!0,setTimeout((()=>{e.clearItems(),a(),l.disabled=!1}),3e3)))}))})(I,A,F),((e,t,a)=>{const s=document.querySelector(".button_next"),r=document.querySelector(".button_prev");s.addEventListener("click",(()=>{e(),t(),u.startDay+=6048e5,a()})),r.addEventListener("click",(()=>{e(),t(),u.startDay-=6048e5,a()}))})(O.clearItems,q.clearItems,N),(({bodySelector:e,bodyNewThemeClass:t,buttonSelector:a})=>{const s=document.querySelector(e),r=document.querySelector(a);JSON.parse(localStorage.getItem(o))&&s.classList.add(t),r.addEventListener("click",(()=>{s.classList.contains(t)?(s.classList.remove(t),localStorage.setItem(o,JSON.stringify(!1))):(s.classList.add(t),localStorage.setItem(o,JSON.stringify(!0)))}))})({bodySelector:".body",bodyNewThemeClass:"body_theme_dark",buttonSelector:".button_theme",buttonNewThemeClass:"button_theme_dark"}),u.addSubscribers([O.clearItems,I.clearItems,q.clearItems,N,F])})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVuZGxlLmpzIiwibWFwcGluZ3MiOiJtQkFBTyxNQUNNQSxFQUFpQixlQ01qQkMsRUFBdUIsQ0FDbENDLGVBQWdCLDRCQUNoQkMsaUJBQWtCLHlCQUNsQkMsZ0JBQWlCLGdCQUNqQkMsY0FBZSx1QkFDZkMsb0JBQXFCLDZCQUNyQkMsa0JBQW1CLGlDQUNuQkMsZ0JBQWlCLCtCQUNqQkMsZUFBZ0IsMEJBR0xDLEVBQXFCLENBQ2hDUixlQUFnQixnQkFDaEJDLGlCQUFrQixzQkFDbEJDLGdCQUFpQixhQUNqQk8saUJBQWtCLG1CQUNsQkMsY0FBZSx1QkFHSkMsRUFBd0IsQ0FDbkNYLGVBQWdCLGdCQUNoQkMsaUJBQWtCLDBCQUNsQkMsZ0JBQWlCLGlCQUNqQlUsZ0JBQWlCLHlCQUdOQyxFQUEwQixDQUNyQ2IsZUFBZ0IsbUJBQ2hCQyxpQkFBa0IsNEJBQ2xCQyxnQkFBaUIsb0JBR05ZLEVBQXdCLENBQ25DYixpQkFBa0IsMEJBQ2xCQyxnQkFBaUIsaUJBQ2pCYSxhQUFjLGdCQUNkTCxjQUFlLDJCQUdKTSxFQUF3QixDQUNuQ2YsaUJBQWtCLDBCQUNsQkMsZ0JBQWlCLGlCQUNqQmEsYUFBYyxnQkFDZFosY0FBZSx3QkFDZmMsaUJBQWtCLDJCQUNsQmIsb0JBQXFCLDhCQUNyQkMsa0JBQW1CLGtDQUNuQkMsZ0JBQWlCLGlDQTBCTlksRUFDSCxRQURHQSxFQUVGLENBQ1BDLFFBQVMsUUFDVEMsS0FBTSxVQUNOQyxNQUFPLFFBQ1BDLElBQUssV0FOSUosRUFRRixDQUNQSSxJQUFLLFVBQ0xELE1BQU8sV0FXRUUsRUFBdUIsY0NuRzlCQyxFQUFrQkMsR0FDdEIsSUFBSUMsS0FBS0QsR0FBTUUsbUJBQW1CVCxFQUFxQkEsR0FLbkRVLEVBQXlCSCxHQUFTLElBQUlDLEtBQUtELEdBQU1FLG1CQUFtQixTQzBHMUUsRUFGYyxJQTdHZCxNQUNFRSxjQUNFQyxLQUFLQyxhQUFlLEdBQ3BCRCxLQUFLRSxlQUFpQixHQUN0QkYsS0FBS0csY0FBZ0IsR0FDckJILEtBQUtJLE9BQVMsR0FDZEosS0FBS0ssVUFBWSxHQUNqQkwsS0FBS00sZ0JBQWtCLEVBQ3ZCTixLQUFLTyxhQUFlLElBQUlYLEtBQ3hCSSxLQUFLUSxvQkFBc0JWLEVBQXNCLElBQUlGLE1BQ3JESSxLQUFLUyxVQUFZVCxLQUFLVSxxQkFHeEJDLHVCQUF1QkMsR0FDckJaLEtBQUtHLGNBQWdCSCxLQUFLRyxjQUFjVSxRQUFRQyxHQUFTQSxFQUFLQyxLQUFPSCxJQUd2RUksbUJBQ0VoQixLQUFLQyxhQUFhZ0IsU0FBU0MsR0FBYUEsTUFHMUNSLHFCQUNFLE1BQU1TLEVBQVksSUFBSXZCLEtBQUtJLEtBQUtPLGFBQWFhLFNBQVMsRUFBRyxFQUFHLEVBQUcsSUFFL0QsT0FBT0QsRUFBVUUsUUFDZkYsRUFBVUcsVUFBWUgsRUFBVUksVUFBbUMsSUFBdkJKLEVBQVVJLFVBQWtCLEVBQUksSUFJNUVDLG9CQUNGLE9BQU94QixLQUFLRSxlQUdWdUIsbUJBQ0YsT0FBT3pCLEtBQUtHLGNBR1Z1QixlQUNGLE9BQU8xQixLQUFLSyxVQUdWc0IsVUFBTUMsR0FDUjVCLEtBQUtJLE9BQVN3QixFQUdaRCxZQUNGLE9BQU8zQixLQUFLSSxPQUdWeUIscUJBQ0YsT0FBTzdCLEtBQUtNLGdCQUdWd0IsZUFDRixPQUFPOUIsS0FBS1MsVUFHVnFCLGFBQVNGLEdBQ1g1QixLQUFLUyxVQUFZbUIsRUFHZkcseUJBQ0YsT0FBTy9CLEtBQUtRLG9CQUdkd0IsdUJBQXVCbEIsR0FDckJkLEtBQUtFLGVBQWUrQixLQUFLbkIsR0FHM0JvQixZQUFXLEtBQUVDLEVBQUksT0FBRXZCLEVBQU0sV0FBRXdCLEVBQVUsVUFBRWpCLElBQ3JDLE1BQU1rQixFQUFtQnJDLEtBQUtHLGNBQWNtQyxNQUFNeEIsR0FBU0YsSUFBV0UsRUFBS0MsS0FJM0UsR0FIQXNCLEVBQWlCRSxVQUFZSCxFQUd6QkQsSUFBU25FLEVBQWdCLENBQzNCLEdBQUlnQyxLQUFLTyxhQUFlWCxLQUFLNEMsTUFBTXJCLEdBRWpDLE9BR0YsR0FBSWtCLEVBQWlCSSxjQUFnQkosRUFBaUJLLGNBQ3BETCxFQUFpQkksWUFBY3RCLE1BQzFCLENBQ0wsTUFBTXdCLEVBQ0ovQyxLQUFLNEMsTUFBTUgsRUFBaUJJLGFBQWU3QyxLQUFLNEMsTUFBTUgsRUFBaUJLLGVBQ25FRSxFQUFhaEQsS0FBSzRDLE1BQU1yQixHQUFhd0IsRUFDM0NOLEVBQWlCSSxZQUFjM0MsRUFBc0I4QyxHQUV2RFAsRUFBaUJLLGNBQWdCdkIsRUFFbkNuQixLQUFLZ0MsdUJBQXVCSyxHQUM1QnJDLEtBQUtXLHVCQUF1QkMsR0FDNUJaLEtBQUtnQixtQkFHUDZCLGlCQUFpQi9CLEdBQ2ZkLEtBQUtHLGNBQWM4QixLQUFLbkIsR0FHMUJnQyxZQUFZbkIsR0FDVixNQUFNb0IsRUFBTXBCLEVBQU1xQixRQUFPLENBQUNDLEdBQU9sQyxHQUFBQSxHQUFNbUMsS0FBTSxJQUFNRCxFQUFLLENBQUNDLEdBQUluQyxLQUFPLElBQ3BFZixLQUFLSyxVQUFZLElBQUswQyxHQUd4QkksZUFBZUMsR0FDYnBELEtBQUtDLGFBQWUsSUFBSW1ELEtDbkc1QixFQUxnQkMsTUFBT0MsSUFFckIsT0FKMkJDLFFBR1RDLE1BQU0sNkZBQWNGLElBQVMsQ0FBRUcsT0FBUSxTQUhqQkMsR0FBS0gsRUFBSUksT0FBU0MsUUFBUUMsT0FBT04sR0FBL0MsSUFBQ0EsR0NXN0IsRUFiQSxNQUNFeEQsYUFBWSxpQkFBRTVCLEVBQWdCLGdCQUFFQyxJQUM5QjRCLEtBQUs4RCxrQkFBb0IzRixFQUN6QjZCLEtBQUsrRCxpQkFBbUIzRixFQUcxQjRGLGVBR0UsT0FGQWhFLEtBQUtpRSxVQUFZQyxTQUFTQyxjQUFjbkUsS0FBSzhELG1CQUFtQk0sUUFFekRwRSxLQUFLaUUsVUFBVUUsY0FBY25FLEtBQUsrRCxrQkFBa0JNLFdBQVUsS0M0Q3pFLEVBbERBLGNBQTBCLEVBQ3hCdEUsWUFDRXVFLEdBQ0EsaUJBQ0VuRyxFQUFnQixnQkFDaEJDLEVBQWUsY0FDZkMsRUFBYSxvQkFDYkMsRUFBbUIsa0JBQ25CQyxFQUFpQixnQkFDakJDLEVBQWUsZUFDZkMsSUFHRjhGLE1BQU0sQ0FBRXBHLGlCQUFBQSxFQUFrQkMsZ0JBQUFBLElBQzFCNEIsS0FBS3dFLFVBQVlGLEVBQ2pCdEUsS0FBS3lFLGFBQWVGLE1BQU1QLGVBQzFCaEUsS0FBSzBFLGdCQUFrQmpHLEVBQ3ZCdUIsS0FBSzJFLFdBQWEzRSxLQUFLeUUsYUFBYU4sY0FBYzlGLEdBQ2xEMkIsS0FBSzRFLGlCQUFtQjVFLEtBQUt5RSxhQUFhTixjQUFjN0YsR0FDeEQwQixLQUFLNkUsZUFBaUI3RSxLQUFLeUUsYUFBYU4sY0FBYzVGLEdBQ3REeUIsS0FBSzhFLGFBQWU5RSxLQUFLeUUsYUFBYU4sY0FBYzNGLEdBQ3BEd0IsS0FBSytFLGlCQUFtQi9FLEtBQUsrRSxpQkFBaUJDLEtBQUtoRixNQUNuREEsS0FBS2lGLGVBQWlCakYsS0FBS2lGLGVBQWVELEtBQUtoRixNQUdqRCtFLGlCQUFpQkcsR0FDZmxGLEtBQUt5RSxhQUFhVSxVQUFVQyxJQUFJcEYsS0FBSzBFLGlCQUNyQ1EsRUFBSUcsYUFBYUMsUUFBUSxhQUFjdEYsS0FBS3dFLFVBQVV6RCxJQUN0RG1FLEVBQUlHLGFBQWFFLGNBQWdCLE9BR25DTixpQkFDRWpGLEtBQUt5RSxhQUFhVSxVQUFVSyxPQUFPeEYsS0FBSzBFLGlCQUcxQ2UsZ0JBTUUsT0FMQXpGLEtBQUsyRSxXQUFXZSxZQUFjMUYsS0FBS3dFLFVBQVVtQixRQUM3QzNGLEtBQUs0RSxpQkFBaUJjLFlBQWMxRixLQUFLd0UsVUFBVW9CLFlBQ25ENUYsS0FBSzZFLGVBQWVhLFlBQWNoRyxFQUFlTSxLQUFLd0UsVUFBVTlCLGVBQ2hFMUMsS0FBSzhFLGFBQWFZLFlBQWNoRyxFQUFlTSxLQUFLd0UsVUFBVS9CLGFBQzlEekMsS0FBS3lFLGFBQWFvQixhQUFhLEtBQU03RixLQUFLd0UsVUFBVXpELElBQzdDZixLQUFLeUUsYUFHZHFCLG9CQUNFOUYsS0FBS3lFLGFBQWFzQixpQkFBaUIsWUFBYS9GLEtBQUsrRSxrQkFDckQvRSxLQUFLeUUsYUFBYXNCLGlCQUFpQixVQUFXL0YsS0FBS2lGLGtCQzlCdkQsRUFuQkEsTUFDRWxGLFlBQVlpRyxHQUNWaEcsS0FBS2lHLFdBQWEvQixTQUFTQyxjQUFjNkIsR0FDekNoRyxLQUFLa0csV0FBYWxHLEtBQUtrRyxXQUFXbEIsS0FBS2hGLE1BR3pDbUcsUUFBUUMsR0FDTnBHLEtBQUtpRyxXQUFXSSxPQUFPRCxHQUd6QkYsYUFDRWxHLEtBQUtpRyxXQUFXUCxZQUFjLEdBR2hDWSxlQUFlbEMsR0FDYnBFLEtBQUtpRyxXQUFXUCxZQUFjdEIsSUNzQmxDLEVBbENBLGNBQTJCLEVBQ3pCckUsWUFDRWUsR0FDQSxpQkFDRTNDLEVBQWdCLGdCQUNoQkMsRUFBZSxjQUNmQyxFQUFhLGlCQUNiYyxFQUFnQixvQkFDaEJiLEVBQW1CLGtCQUNuQkMsRUFBaUIsZ0JBQ2pCQyxJQUdGK0YsTUFBTSxDQUFFcEcsaUJBQUFBLEVBQWtCQyxnQkFBQUEsSUFDMUI0QixLQUFLdUcsTUFBUXpGLEVBQ2JkLEtBQUt3RyxhQUFlakMsTUFBTVAsZUFDMUJoRSxLQUFLeUcsY0FBZ0J6RyxLQUFLd0csYUFBYXJDLGNBQWM5RixHQUNyRDJCLEtBQUswRyxpQkFBbUIxRyxLQUFLd0csYUFBYXJDLGNBQWNoRixHQUN4RGEsS0FBSzJHLG9CQUFzQjNHLEtBQUt3RyxhQUFhckMsY0FBYzdGLEdBQzNEMEIsS0FBSzRHLGtCQUFvQjVHLEtBQUt3RyxhQUFhckMsY0FBYzVGLEdBQ3pEeUIsS0FBSzZHLGdCQUFrQjdHLEtBQUt3RyxhQUFhckMsY0FBYzNGLEdBR3pEaUgsZ0JBT0UsT0FOQXpGLEtBQUt5RyxjQUFjZixZQUFjMUYsS0FBS3VHLE1BQU1aLFFBQzVDM0YsS0FBSzBHLGlCQUFpQmhCLFlBQWMxRixLQUFLdUcsTUFBTVosUUFDL0MzRixLQUFLMkcsb0JBQW9CakIsWUFBYzFGLEtBQUt1RyxNQUFNWCxZQUNsRDVGLEtBQUs0RyxrQkFBa0JsQixZQUFjaEcsRUFBZU0sS0FBS3VHLE1BQU03RCxlQUMvRDFDLEtBQUs2RyxnQkFBZ0JuQixZQUFjaEcsRUFBZU0sS0FBS3VHLE1BQU05RCxhQUV0RHpDLEtBQUt3RyxlQ0hoQixFQTFCQSxjQUEyQixFQUN6QnpHLFlBQVkrRyxHQUFNLGlCQUFFM0ksRUFBZ0IsZ0JBQUVDLElBQ3BDbUcsTUFBTSxDQUFFcEcsaUJBQUFBLEVBQWtCQyxnQkFBQUEsSUFDMUI0QixLQUFLK0csTUFBUUQsRUFDYjlHLEtBQUtnSCxhQUFlekMsTUFBTVAsZUFHNUJpRCxTQUFTYixHQUNQcEcsS0FBS2dILGFBQWFYLE9BQU9ELEdBRzNCWCxnQkFJRSxPQUhBekYsS0FBS2dILGFBQWFuQixhQUFhLGdCQUFpQjdGLEtBQUsrRyxNQUFNeEUsVUFDM0R2QyxLQUFLZ0gsYUFBYW5CLGFBQWEsWUFBYTdGLEtBQUsrRyxNQUFNcEgsTUFFaERLLEtBQUtnSCxhQUdkRSxjQUNFbEgsS0FBSytHLE1BQU1JLE1BQU1sRyxTQUFTSCxJQUN4QixNQUFNc0csRUFBVSxJQUFJLEVBQWF0RyxFQUFNNUIsR0FDdkNjLEtBQUtpSCxTQUFTRyxFQUFRM0Isc0JDbUM1QixFQXZEQSxjQUE2QixFQUMzQjFGLFlBQVlzSCxHQUFRLGlCQUFFbEosRUFBZ0IsZ0JBQUVDLElBQ3RDbUcsTUFBTSxDQUFFcEcsaUJBQUFBLEVBQWtCQyxnQkFBQUEsSUFDMUI0QixLQUFLc0gsUUFBVUQsRUFDZnJILEtBQUt1SCxnQkFBa0JoRCxNQUFNUCxlQUM3QmhFLEtBQUt3SCxnQkFBa0IsR0FHekJDLHVCQUF1Qk4sR0FDckIsTUFBTU8sRUFBbUI5SCxLQUFLNEMsTUFBTXhDLEtBQUtzSCxRQUFRM0gsTUFDakQsT0FBT3dILEVBQU10RyxRQUNWQyxHQUNDbEIsS0FBSzRDLE1BQU0xQixFQUFLNEIsZ0JBQWtCZ0YsR0FDbENBLEdBQW9COUgsS0FBSzRDLE1BQU0xQixFQUFLMkIsZUFJMUNrRixxQkFDRTNILEtBQUs0SCxvQkFBc0I1SCxLQUFLeUgsdUJBQXVCLGlCQUVuRHpILEtBQUs0SCxxQkFDUDVILEtBQUs0SCxvQkFBb0IzRyxTQUFTSCxJQUMzQmQsS0FBS3dILGdCQUFnQjFHLEVBQUt5QixVQUc3QnZDLEtBQUt3SCxnQkFBZ0IxRyxFQUFLeUIsVUFBWSxJQUFJdkMsS0FBS3dILGdCQUFnQjFHLEVBQUt5QixVQUFXekIsR0FGL0VkLEtBQUt3SCxnQkFBZ0IxRyxFQUFLeUIsVUFBWSxDQUFDekIsTUFRL0MrRyxjQUNFN0gsS0FBSzJILHFCQUNMLElBQUssSUFBSXpFLEVBQUksRUFBR0EsRUFBSSxlQUEyQkEsR0FBSyxFQUFHLENBQ3JELE1BQU00RSxFQUFTLFdBQXNCNUUsR0FDL0I2RSxFQUFhLElBQUksRUFDckIsQ0FBRXhGLFNBQVV1RixFQUFRbkksS0FBTUssS0FBS3NILFFBQVEzSCxLQUFNd0gsTUFBT25ILEtBQUt3SCxnQkFBZ0JNLElBQVcsSUFDcEY5SSxHQUVJZ0osRUFBY0QsRUFBV3RDLGdCQUMvQnNDLEVBQVdiLGNBQ1hsSCxLQUFLbUcsUUFBUTZCLElBSWpCdkMsZ0JBRUUsT0FEQXpGLEtBQUs2SCxjQUNFN0gsS0FBS3VILGdCQUdkcEIsUUFBUUMsR0FDTnBHLEtBQUt1SCxnQkFBZ0JsQixPQUFPRCxLQ2xDaEMsRUFsQkEsY0FBMkIsRUFDekJyRyxhQUFZLEtBQUVKLElBQVEsaUJBQUV4QixFQUFnQixnQkFBRUMsRUFBZSxnQkFBRVUsSUFDekR5RixNQUFNLENBQUVwRyxpQkFBQUEsRUFBa0JDLGdCQUFBQSxJQUMxQjRCLEtBQUtpSSxNQUFRdEksRUFDYkssS0FBS2tJLGlCQUFtQnBKLEVBQ3hCa0IsS0FBS21JLGFBQWU1RCxNQUFNUCxlQUc1QnlCLGdCQUNFLE1BQU0yQyxFQUFXLElBQUl4SSxLQUFLSSxLQUFLaUksT0FLL0IsT0FKQWpJLEtBQUttSSxhQUFhekMsWVRScEIsSUFBSTlGLEtTUWtEd0ksR1RSdkN2SSxtQkFBbUJULEVBQXFCQSxHU1NqRFksS0FBS2lJLFFBQVUsc0JBQ2pCakksS0FBS21JLGFBQWFoRCxVQUFVQyxJQUFJcEYsS0FBS2tJLGtCQUVoQ2xJLEtBQUttSSxlQzRCaEIsRUExQ0EsY0FBdUIsRUFDckJwSSxZQUFZdUUsR0FBVSxpQkFBRW5HLEVBQWdCLGdCQUFFQyxFQUFlLGlCQUFFTyxFQUFnQixjQUFFQyxJQUMzRTJGLE1BQU0sQ0FBRXBHLGlCQUFBQSxFQUFrQkMsZ0JBQUFBLElBQzFCNEIsS0FBS3dFLFVBQVlGLEVBQ2pCdEUsS0FBS3FJLFVBQVk5RCxNQUFNUCxlQUN2QmhFLEtBQUtzSSxpQkFBbUJ0SSxLQUFLcUksVUFBVWxFLGNBQWN4RixHQUNyRHFCLEtBQUt1SSxlQUFpQjNKLEVBQ3RCb0IsS0FBS3dJLGdCQUFrQnhJLEtBQUt3SSxnQkFBZ0J4RCxLQUFLaEYsTUFDakRBLEtBQUt5SSxpQkFBbUJ6SSxLQUFLeUksaUJBQWlCekQsS0FBS2hGLE1BQ25EQSxLQUFLMEksWUFBYzFJLEtBQUswSSxZQUFZMUQsS0FBS2hGLE1BRzNDd0ksZ0JBQWdCdEQsR0FDVkEsRUFBSUcsY0FBOEMsZUFBOUJILEVBQUlHLGFBQWFzRCxNQUFNLEtBQzdDekQsRUFBSTBELGlCQUNKNUksS0FBS3FJLFVBQVVsRCxVQUFVQyxJQUFJcEYsS0FBS3VJLGlCQUl0Q0UsbUJBQ0V6SSxLQUFLcUksVUFBVWxELFVBQVVLLE9BQU94RixLQUFLdUksZ0JBR3ZDRyxZQUFZeEQsR0FDVkEsRUFBSTBELGlCQUNKLE1BQU1oSSxFQUFTc0UsRUFBSUcsYUFBYXdELFFBQVEsY0FDeEMsYUFBd0IsQ0FBRTFHLEtaOUJBLGVZOEJzQnZCLE9BQUFBLEVBQVF3QixXQUFZcEMsS0FBS3dFLFVBQVV6RCxLQUNuRmYsS0FBS3lJLG1CQUdQSyxhQUVFLE9BREE5SSxLQUFLc0ksaUJBQWlCNUMsWUFBYyxHQUFHMUYsS0FBS3dFLFVBQVV1RSxhQUFhL0ksS0FBS3dFLFVBQVV3RSxVQUMzRWhKLEtBQUtxSSxVQUdkdkMsb0JBQ0U5RixLQUFLcUksVUFBVXRDLGlCQUFpQixXQUFZL0YsS0FBS3dJLGlCQUNqRHhJLEtBQUtxSSxVQUFVdEMsaUJBQWlCLFlBQWEvRixLQUFLeUksa0JBQ2xEekksS0FBS3FJLFVBQVV0QyxpQkFBaUIsT0FBUS9GLEtBQUswSSxlQzFDM0NPLEVBQW1CQyxJQUV2QkMsWUFBVyxLQUNURCxFQUFRRSxnQkFBZ0IsV0FDdkIsT0FHUUMsRUFBMkIsQ0FBQ0gsRUFBU0ksS0FDaERKLEVBQVFyRCxhQUNOLFFBQ0EsaURBQWlEeUQsNEJBRW5ETCxFQUFnQkMsSUFHTEssRUFBNEIsQ0FBQ0wsRUFBU0ksS0FDakRKLEVBQVFyRCxhQUNOLFFBQ0Esa0RBQWtEeUQsNEJBRXBETCxFQUFnQkMsSUNTWk0sRUFBT3RGLFNBQVNDLGNiNkNOLFNhNUNWc0YsRUFBWXZGLFNBQVNDLGNiOENOLGNhN0NmdUYsRUFBYSxJQzdCbkIsTUFDRTNKLFlBQVk0SixHQUNWM0osS0FBSzRKLFdBQWFELEVBQ2xCM0osS0FBSzZKLE9BQVMzRixTQUFTQyxjQUFjd0YsRUFBVUQsWUFHakRJLE9BQ0U5SixLQUFLNkosT0FBTzFFLFVBQVVDLElBQUlwRixLQUFLNEosV0FBV0csZ0JBQzFDL0osS0FBS2dLLFNBR1BBLFNBQ0ViLFlBQVcsS0FDVG5KLEtBQUs2SixPQUFPMUUsVUFBVUssT0FBT3hGLEtBQUs0SixXQUFXRyxrQmRxRnpCLE9BdENJLENBQzVCTCxXQUFZLGVBQ1pLLGVBQWdCLGVhL0JaRSxFQUFjLElBQUksRUFBZ0JoTSxFQUFxQkMsZ0JBQ3ZEZ00sRUFBWSxJQUFJLEVBQWdCeEwsRUFBbUJSLGdCQUNuRGlNLEVBQWlCLElBQUksRUFBZ0J0TCxFQUFzQlgsZ0JBQzNEa00sRUFBb0IsSUUvQjFCLGNBQXVCLEVBQ3JCckssWUFBWWlHLEdBQ1Z6QixNQUFNeUIsR0FDTmhHLEtBQUt3SSxnQkFBa0J4SSxLQUFLd0ksZ0JBQWdCeEQsS0FBS2hGLE1BQ2pEQSxLQUFLeUksaUJBQW1CekksS0FBS3lJLGlCQUFpQnpELEtBQUtoRixNQUNuREEsS0FBSzBJLFlBQWMxSSxLQUFLMEksWUFBWTFELEtBQUtoRixNQUczQ3dJLGdCQUFnQnRELEdBQ2QsTUFBTSxPQUFFbUYsR0FBV25GLEVBRWpCQSxFQUFJRyxjQUMwQixlQUE5QkgsRUFBSUcsYUFBYXNELE1BQU0sS0FDdEIwQixFQUFPbEYsVUFBVW1GLFNBQVN0TCxFQUFzQkMsZUFDL0NvTCxFQUFPbEYsVUFBVW1GLFNBQVNwTCxFQUFzQkQsaUJBRWxEaUcsRUFBSTBELGlCQUNKNUksS0FBS3VLLGVBQWlCRixFQUFPRyxRQUFReEwsRUFBc0JaLGlCQUMzRDRCLEtBQUt1SyxlQUFlcEYsVUFBVUMsSUFBSXBHLEVBQXNCSixnQkFJNUQ2SixtQkFDRXpJLEtBQUt1SyxlQUFlcEYsVUFBVUssT0FBT3hHLEVBQXNCSixlQUc3RDhKLFlBQVl4RCxHQUNWQSxFQUFJMEQsaUJBQ0osTUFBTWhJLEVBQVNzRSxFQUFJRyxhQUFhd0QsUUFBUSxjQUN4QyxhQUF3QixDQUN0QjFHLEtBQU1uRSxFQUNONEMsT0FBQUEsRUFDQXdCLFdBQVlwQyxLQUFLdUssZUFBZUUsUUFBUWxJLFNBQ3hDcEIsVUFBV25CLEtBQUt1SyxlQUFlRSxRQUFROUssT0FFekNLLEtBQUt5SSxtQkFHUDNDLG9CQUNFOUYsS0FBS2lHLFdBQVdGLGlCQUFpQixXQUFZL0YsS0FBS3dJLGlCQUNsRHhJLEtBQUtpRyxXQUFXRixpQkFBaUIsWUFBYS9GLEtBQUt5SSxrQkFDbkR6SSxLQUFLaUcsV0FBV0YsaUJBQWlCLE9BQVEvRixLQUFLMEksZUZWWDNKLEVBQXdCYixnQkFDL0RrTSxFQUFrQnRFLG9CQUVsQixNQUFNNEUsRUFBa0JDLElBQ3RCLElBQUssSUFBSXpILEVBQUksRUFBR0EsRUFBSSxpQkFBNkJBLEdBQUssRUFBRyxDQUN2RCxNQUFNMEgsRUFBVyxXYjBEZ0IsTWExRGdDMUgsRUFDM0QySCxFQUFhL0ssRUFBc0I4SyxHQUVuQ0UsRUFBYSxJQUFJLEVBQWEsQ0FBRW5MLEtBQU1rTCxHQUFjaE0sR0FDcERrTSxFQUFlLElBQUksRUFBZSxDQUFFcEwsS0FBTWtMLEdBQWM5TCxHQUN4RGlNLEVBQWNGLEVBQVdyRixnQkFDekJ3RixFQUFnQkYsRUFBYXRGLGdCQUMvQmtGLElBQ0ZwQixFQUEwQnlCLEVBQWE5SCxHQUN2Q3FHLEVBQTBCMEIsRUFBZS9ILElBRTNDaUgsRUFBZWhFLFFBQVE2RSxHQUN2QlosRUFBa0JqRSxRQUFROEUsS0FJeEJDLEVBQXFCcEssSUFDekIsTUFBTXFLLEVBQWMsSUFBSSxFQUFZckssRUFBTTdDLEdBQ3BDbU4sRUFBaUJELEVBQVkxRixnQkFFbkMsT0FEQTBGLEVBQVlyRixvQkFDTHNGLEdBR0hDLEVBQXNCVixJQUMxQix3QkFBa0MsQ0FBQzdKLEVBQU1vQyxLQUN2QyxNQUFNaUksRUFBY0QsRUFBa0JwSyxHQUNsQzZKLEdBQWN6SCxHYjZCTixJYTVCVm1HLEVBQXlCOEIsRUFBYWpJLEdBRXhDK0csRUFBWTlELFFBQVFnRixPQWlCdEJ2SCxRQUFRMEgsSUFBSSxDQUFDLEVHckZZLFVIcUZVLEVHcEZWLFlIcUZ0QkMsTUFBSyxFQUFFNUosRUFBT3dGLE1BRWJBLEVBQU1sRyxTQUFTSCxJQUNUQSxFQUFLeUIsU0FBVSx5QkFBb0N6QixHQUNsRCxtQkFBOEJBLE1BR3JDLFFBQXFCYSxFQUNyQixjQUF5QkEsR0F0QlgsRUFBQ0EsRUFBT2dKLEtBQzFCaEosRUFBTVYsU0FBUSxDQUFDdUssRUFBTXRJLEtBQ25CLE1BQU11SSxFQUFXLElBQUksRUFBU0QsRUFBTTlNLEdBQzlCZ04sRUFBY0QsRUFBUzNDLGFBQ1g1RixHYmlCYixHYWhCSG1HLEVBQXlCcUMsRUFBYXhJLEdBRXhDdUksRUFBUzNGLG9CQUNUb0UsRUFBVS9ELFFBQVF1RixPQWdCaEJDLENBQVloSyxHQUNaK0ksR0FBZSxHQUNmVyxHQUFtQixNQUVwQk8sT0FBTSxJQUFNbEMsRUFBV0ksU0FDdkIrQixTQUFRLEtBQ1ByQyxFQUFLckUsVUFBVUssT2I3QkYsZWE4QmJpRSxFQUFVdEUsVUFBVUssT2I1QkQsd0JpQjFFTixFQUFDc0csRUFBV0MsRUFBb0JDLEtBQ2pELE1BQU1DLEVBQWEvSCxTQUFTQyxjakJnRWhCLGdCaUIvRE4rSCxFQUFjRCxFQUFXOUgsY2pCZ0VsQix1QmlCL0RQZ0ksRUFBZUYsRUFBVzlILGNqQmdFbEIsa0JpQm5DZDhILEVBQVdsRyxpQkFBaUIsVUEzQk5iLElBQ3BCQSxFQUFJMEQsaUJBQ0osTUFBTXdELEVBQVVGLEVBQVl0SyxNQUM1QixJQUFJeUssRUFDQUQsRUFBUUUsU0FDVkQsRUFBUyx1QkFBa0N2TCxHQUN6Q0EsRUFBSzZFLFFBQVE0RyxjQUFjQyxTQUFTSixFQUFRRyxpQkFFOUNULEVBQVU1RixhQUVObUcsRUFBT0MsT0FDVEQsRUFBT3BMLFNBQVNILElBQ2QsTUFBTXFLLEVBQWNZLEVBQW1CakwsR0FDdkNnTCxFQUFVM0YsUUFBUWdGLE9BR3BCVyxFQUFVeEYsZUFBZSxxQkFDekI2RixFQUFhTSxVQUFXLEVBQ3hCdEQsWUFBVyxLQUNUMkMsRUFBVTVGLGFBQ1Y4RixJQUNBRyxFQUFhTSxVQUFXLElqQnVFUixXYVkxQixDQUFXeEMsRUFBYWlCLEVBQW1CRyxHSzdHWixFQUFDcUIsRUFBd0JDLEVBQW9CWCxLQUMxRSxNQWNNWSxFQUFpQjFJLFNBQVNDLGNsQndDaEIsZ0JrQnZDVjBJLEVBQWlCM0ksU0FBU0MsY2xCd0NoQixnQmtCdENoQnlJLEVBQWU3RyxpQkFBaUIsU0FqQlgsS0FDbkIyRyxJQUNBQyxJQUNBLFlBQXlCRyxPQUN6QmQsT0FjRmEsRUFBZTlHLGlCQUFpQixTQVhYLEtBQ25CMkcsSUFDQUMsSUFDQSxZQUF5QkcsT0FDekJkLFFMbUdKLENBQXVCNUIsRUFBa0JsRSxXQUFZaUUsRUFBZWpFLFdBQVl3RSxHTWhIbkQsR0FBR3FDLGFBQUFBLEVBQWNDLGtCQUFBQSxFQUFtQkMsZUFBQUEsTUFDL0QsTUFBTUMsRUFBT2hKLFNBQVNDLGNBQWM0SSxHQUM5QkksRUFBeUJqSixTQUFTQyxjQUFjOEksR0FFbENHLEtBQUs1SyxNQUFNNkssYUFBYUMsUUFBUTdOLEtBR2xEeU4sRUFBSy9ILFVBQVVDLElBQUk0SCxHQWFyQkcsRUFBdUJwSCxpQkFBaUIsU0FWYixLQUNyQm1ILEVBQUsvSCxVQUFVbUYsU0FBUzBDLElBQzFCRSxFQUFLL0gsVUFBVUssT0FBT3dILEdBQ3RCSyxhQUFhRSxRQUFROU4sRUFBc0IyTixLQUFLSSxXQUFVLE1BRTFETixFQUFLL0gsVUFBVUMsSUFBSTRILEdBQ25CSyxhQUFhRSxRQUFROU4sRUFBc0IyTixLQUFLSSxXQUFVLFNOa0doRSxDYnBIbUMsQ0FDakNULGFBQWMsUUFDZEMsa0JBQW1CLGtCQUNuQkMsZUFBZ0IsZ0JBQ2hCUSxvQkFBcUIsc0JhbUh2QixpQkFBNEIsQ0FDMUJyRCxFQUFrQmxFLFdBQ2xCK0QsRUFBWS9ELFdBQ1ppRSxFQUFlakUsV0FDZndFLEVBQ0FXLEsiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90ZXN0LWVsbWEvLi9zcmMvc3RhdGUvdHlwZXMuanMiLCJ3ZWJwYWNrOi8vdGVzdC1lbG1hLy4vc3JjL2NvbmZpZy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vdGVzdC1lbG1hLy4vc3JjL3V0aWxzL2hhbmRsZS1kYXRlcy5qcyIsIndlYnBhY2s6Ly90ZXN0LWVsbWEvLi9zcmMvc3RhdGUvUHJvamVjdFN0YXRlLmpzIiwid2VicGFjazovL3Rlc3QtZWxtYS8uL3NyYy9hcGkvbWFpbi1hcGkuanMiLCJ3ZWJwYWNrOi8vdGVzdC1lbG1hLy4vc3JjL2NvbXBvbmVudHMvQ29tcG9uZW50LmpzIiwid2VicGFjazovL3Rlc3QtZWxtYS8uL3NyYy9jb21wb25lbnRzL0JhY2tsb2dDYXJkLmpzIiwid2VicGFjazovL3Rlc3QtZWxtYS8uL3NyYy9jb21wb25lbnRzL1JlbmRlcmVyU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly90ZXN0LWVsbWEvLi9zcmMvY29tcG9uZW50cy9DYWxlbmRhclRhc2suanMiLCJ3ZWJwYWNrOi8vdGVzdC1lbG1hLy4vc3JjL2NvbXBvbmVudHMvQ2FsZW5kYXJDZWxsLmpzIiwid2VicGFjazovL3Rlc3QtZWxtYS8uL3NyYy9jb21wb25lbnRzL0NhbGVuZGFyQ29sdW1uLmpzIiwid2VicGFjazovL3Rlc3QtZWxtYS8uL3NyYy9jb21wb25lbnRzL0NhbGVuZGFyRGF0ZS5qcyIsIndlYnBhY2s6Ly90ZXN0LWVsbWEvLi9zcmMvY29tcG9uZW50cy9Vc2VyQ2FyZC5qcyIsIndlYnBhY2s6Ly90ZXN0LWVsbWEvLi9zcmMvdXRpbHMvYXBwbHktc3R5bGUtYW5pbWF0aW9uLmpzIiwid2VicGFjazovL3Rlc3QtZWxtYS8uL3NyYy9hcHAuanMiLCJ3ZWJwYWNrOi8vdGVzdC1lbG1hLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBFcnJvci5qcyIsIndlYnBhY2s6Ly90ZXN0LWVsbWEvLi9zcmMvY29tcG9uZW50cy9DYWxlbmRhci5qcyIsIndlYnBhY2s6Ly90ZXN0LWVsbWEvLi9zcmMvY29uZmlnL2NvbmZpZy5qcyIsIndlYnBhY2s6Ly90ZXN0LWVsbWEvLi9zcmMvdXRpbHMvc2VhcmNoLmpzIiwid2VicGFjazovL3Rlc3QtZWxtYS8uL3NyYy91dGlscy9zd2l0Y2gtYmV0d2Vlbi13ZWVrcy5qcyIsIndlYnBhY2s6Ly90ZXN0LWVsbWEvLi9zcmMvdXRpbHMvdG9nZ2xlLWNvbG9yLXRoZW1lLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBBU1NJR05fQllfVVNFUiA9ICdhc3NpZ25CeVVzZXInO1xuZXhwb3J0IGNvbnN0IEFTU0lHTl9CWV9EQVRFID0gJ2Fzc2lnbkJ5RGF0ZSc7XG4iLCJleHBvcnQgY29uc3QgdG9nZ2xlVGhlbWVTZXR0aW5ncyA9IHtcbiAgYm9keVNlbGVjdG9yOiAnLmJvZHknLFxuICBib2R5TmV3VGhlbWVDbGFzczogJ2JvZHlfdGhlbWVfZGFyaycsXG4gIGJ1dHRvblNlbGVjdG9yOiAnLmJ1dHRvbl90aGVtZScsXG4gIGJ1dHRvbk5ld1RoZW1lQ2xhc3M6ICdidXR0b25fdGhlbWVfZGFyaycsXG59O1xuXG5leHBvcnQgY29uc3QgYmFja2xvZ0NhcmRTZWxlY3RvcnMgPSB7XG4gIHBhcmVudFNlbGVjdG9yOiAnLmJhY2tsb2dfX3Rhc2tzLWNvbnRhaW5lcicsXG4gIHRlbXBsYXRlU2VsZWN0b3I6ICcudGVtcGxhdGUtY2FyZC1iYWNrbG9nJyxcbiAgZWxlbWVudFNlbGVjdG9yOiAnLmNhcmQtYmFja2xvZycsXG4gIHRpdGxlU2VsZWN0b3I6ICcuY2FyZC1iYWNrbG9nX190aXRsZScsXG4gIGRlc2NyaXB0aW9uU2VsZWN0b3I6ICcuY2FyZC1iYWNrbG9nX19kZXNjcmlwdGlvbicsXG4gIHN0YXJ0RGF0ZVNlbGVjdG9yOiAnLmNhcmQtYmFja2xvZ19fZGF0ZS1zcGFuX3N0YXJ0JyxcbiAgZW5kRGF0ZVNlbGVjdG9yOiAnLmNhcmQtYmFja2xvZ19fZGF0ZS1zcGFuX2VuZCcsXG4gIGRyYWdTdGFydENsYXNzOiAnY2FyZC1iYWNrbG9nX2RyYWdnYWJsZScsXG59O1xuXG5leHBvcnQgY29uc3QgdXNlcnNDYXJkU2VsZWN0b3JzID0ge1xuICBwYXJlbnRTZWxlY3RvcjogJy5ib2FyZF9fdXNlcnMnLFxuICB0ZW1wbGF0ZVNlbGVjdG9yOiAnLnRlbXBsYXRlLWNhcmQtdXNlcicsXG4gIGVsZW1lbnRTZWxlY3RvcjogJy5jYXJkLXVzZXInLFxuICB1c2VyTmFtZVNlbGVjdG9yOiAnLmNhcmQtdXNlcl9fbmFtZScsXG4gIGRyYWdPdmVyQ2xhc3M6ICdjYXJkLXVzZXJfZHJhZy1vdmVyJyxcbn07XG5cbmV4cG9ydCBjb25zdCBjYWxlbmRhckRhdGVTZWxlY3RvcnMgPSB7XG4gIHBhcmVudFNlbGVjdG9yOiAnLmJvYXJkX19kYXRlcycsXG4gIHRlbXBsYXRlU2VsZWN0b3I6ICcudGVtcGxhdGUtY2FsZW5kYXItZGF0ZScsXG4gIGVsZW1lbnRTZWxlY3RvcjogJy5jYWxlbmRhci1kYXRlJyxcbiAgY3VycmVudERheUNsYXNzOiAnY2FsZW5kYXItZGF0ZV9jdXJyZW50Jyxcbn07XG5cbmV4cG9ydCBjb25zdCBjYWxlbmRhckNvbHVtblNlbGVjdG9ycyA9IHtcbiAgcGFyZW50U2VsZWN0b3I6ICcuYm9hcmRfX2NhbGVuZGFyJyxcbiAgdGVtcGxhdGVTZWxlY3RvcjogJy50ZW1wbGF0ZS1jYWxlbmRhci1jb2x1bW4nLFxuICBlbGVtZW50U2VsZWN0b3I6ICcuY2FsZW5kYXItY29sdW1uJyxcbn07XG5cbmV4cG9ydCBjb25zdCBjYWxlbmRhckNlbGxTZWxlY3RvcnMgPSB7XG4gIHRlbXBsYXRlU2VsZWN0b3I6ICcudGVtcGxhdGUtY2FsZW5kYXItY2VsbCcsXG4gIGVsZW1lbnRTZWxlY3RvcjogJy5jYWxlbmRhci1jZWxsJyxcbiAgZWxlbWVudENsYXNzOiAnY2FsZW5kYXItY2VsbCcsXG4gIGRyYWdPdmVyQ2xhc3M6ICdjYWxlbmRhci1jZWxsX2RyYWctb3ZlcicsXG59O1xuXG5leHBvcnQgY29uc3QgY2FsZW5kYXJUYXNrU2VsZWN0b3JzID0ge1xuICB0ZW1wbGF0ZVNlbGVjdG9yOiAnLnRlbXBsYXRlLWNhbGVuZGFyLXRhc2snLFxuICBlbGVtZW50U2VsZWN0b3I6ICcuY2FsZW5kYXItdGFzaycsXG4gIGVsZW1lbnRDbGFzczogJ2NhbGVuZGFyLXRhc2snLFxuICB0aXRsZVNlbGVjdG9yOiAnLmNhbGVuZGFyLXRhc2tfX3RpdGxlJyxcbiAgc3VidGl0bGVTZWxlY3RvcjogJy5jYWxlbmRhci10YXNrX19zdWJ0aXRsZScsXG4gIGRlc2NyaXB0aW9uU2VsZWN0b3I6ICcuY2FsZW5kYXItdGFza19fZGVzY3JpcHRpb24nLFxuICBzdGFydERhdGVTZWxlY3RvcjogJy5jYWxlbmRhci10YXNrX19kYXRlLXNwYW5fc3RhcnQnLFxuICBlbmREYXRlU2VsZWN0b3I6ICcuY2FsZW5kYXItdGFza19fZGF0ZS1zcGFuX2VuZCcsXG59O1xuXG5leHBvcnQgY29uc3Qgd2Vla0J1dHRvbnNTZWxlY3RvcnMgPSB7XG4gIG5leHRXZWVrQnV0dG9uOiAnLmJ1dHRvbl9uZXh0JyxcbiAgcHJldldlZWtCdXR0b246ICcuYnV0dG9uX3ByZXYnLFxufTtcblxuZXhwb3J0IGNvbnN0IHBvcHVwU2VsZWN0b3JzID0ge1xuICBwb3B1cEVycm9yOiAnLnBvcHVwX2Vycm9yJyxcbiAgcG9wdXBPcGVuQ2xhc3M6ICdwb3B1cF9vcGVuJyxcbn07XG5cbmV4cG9ydCBjb25zdCBzZWFyY2hGb3JtU2VsZWN0b3JzID0ge1xuICBzZWFyY2hGb3JtOiAnLnNlYXJjaC1mb3JtJyxcbiAgc2VhcmNoSW5wdXQ6ICcuc2VhcmNoLWZvcm1fX2lucHV0JyxcbiAgc3VibWl0QnV0dG9uOiAnLmJ1dHRvbl9zZWFyY2gnLFxufTtcblxuZXhwb3J0IGNvbnN0IHByZWxvYWRlclN0YXRlU2VsZWN0b3JzID0ge1xuICBwYWdlU2VsZWN0b3I6ICcucGFnZScsXG4gIHBhZ2VIaWRkZW5DbGFzczogJ3BhZ2VfaGlkZGVuJyxcbiAgcHJlbG9hZGVyU2VsZWN0b3I6ICcucHJlbG9hZGVyJyxcbiAgcHJlbG9hZGVyVmlzaWJsZUNsYXNzOiAncHJlbG9hZGVyX3Zpc2libGUnLFxufTtcblxuZXhwb3J0IGNvbnN0IGRhdGVTZXR0aW5ncyA9IHtcbiAgbG9jYWxlOiAncnUtUlUnLFxuICBvcHRpb25zOiB7XG4gICAgd2Vla2RheTogJ3Nob3J0JyxcbiAgICB5ZWFyOiAnbnVtZXJpYycsXG4gICAgbW9udGg6ICdzaG9ydCcsXG4gICAgZGF5OiAnbnVtZXJpYycsXG4gIH0sXG4gIG51bWVyaWM6IHtcbiAgICBkYXk6ICdudW1lcmljJyxcbiAgICBtb250aDogJ251bWVyaWMnLFxuICB9LFxufTtcblxuZXhwb3J0IGNvbnN0IG1heEluZGV4Rm9yQW5pbWF0aW9uID0ge1xuICB1c2VyczogOCxcbiAgYmFja2xvZ0NhcmRzOiAxMixcbn07XG5cbmV4cG9ydCBjb25zdCBmdWxsRGF5SW5NaWxsaXNlY29uZHMgPSAzNjAwICogMjQgKiAxMDAwO1xuZXhwb3J0IGNvbnN0IHRpbWVyRGVsYXkgPSAzMDAwO1xuZXhwb3J0IGNvbnN0IGxvY2FsU3RvcmFnZVRoZW1lS2V5ID0gJ2lzVGhlbWVEYXJrJztcbiIsImltcG9ydCB7IGRhdGVTZXR0aW5ncyB9IGZyb20gJy4uL2NvbmZpZy9jb25zdGFudHMnO1xuXG5jb25zdCByZWZpbmVUb1N0cmluZyA9IChkYXRlKSA9PlxuICBuZXcgRGF0ZShkYXRlKS50b0xvY2FsZURhdGVTdHJpbmcoZGF0ZVNldHRpbmdzLmxvY2FsZSwgZGF0ZVNldHRpbmdzLm9wdGlvbnMpO1xuXG5jb25zdCByZWZpbmVUb051bWVyaWNERE1NID0gKGRhdGUpID0+XG4gIG5ldyBEYXRlKGRhdGUpLnRvTG9jYWxlRGF0ZVN0cmluZyhkYXRlU2V0dGluZ3MubG9jYWxlLCBkYXRlU2V0dGluZ3MubnVtZXJpYyk7XG5cbmNvbnN0IHJlZmluZVRvTnVtZXJpY1lZTU1ERCA9IChkYXRlKSA9PiBuZXcgRGF0ZShkYXRlKS50b0xvY2FsZURhdGVTdHJpbmcoJ2VuLUNBJyk7XG5cbmV4cG9ydCB7IHJlZmluZVRvU3RyaW5nLCByZWZpbmVUb051bWVyaWNERE1NLCByZWZpbmVUb051bWVyaWNZWU1NREQgfTtcbiIsImltcG9ydCB7IEFTU0lHTl9CWV9EQVRFIH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyByZWZpbmVUb051bWVyaWNZWU1NREQgfSBmcm9tICcuLi91dGlscy9oYW5kbGUtZGF0ZXMnO1xuXG5jbGFzcyBQcm9qZWN0U3RhdGUge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLl9zdWJzY3JpYmVycyA9IFtdO1xuICAgIHRoaXMuX2Fzc2lnbmVkVGFza3MgPSBbXTtcbiAgICB0aGlzLl9iYWNrbG9nVGFza3MgPSBbXTtcbiAgICB0aGlzLl91c2VycyA9IFtdO1xuICAgIHRoaXMuX3VzZXJzSWRzID0ge307XG4gICAgdGhpcy5fY2FsZW5kYXJMZW5ndGggPSA3O1xuICAgIHRoaXMuX2N1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcbiAgICB0aGlzLl9jdXJyZW50RGF0ZU51bWVyaWMgPSByZWZpbmVUb051bWVyaWNZWU1NREQobmV3IERhdGUoKSk7XG4gICAgdGhpcy5fc3RhcnREYXkgPSB0aGlzLl91cGRhdGVBbmRTZXREYXRlcygpO1xuICB9XG5cbiAgX3JlbW92ZVRhc2tGcm9tQmFja2xvZyh0YXNrSWQpIHtcbiAgICB0aGlzLl9iYWNrbG9nVGFza3MgPSB0aGlzLl9iYWNrbG9nVGFza3MuZmlsdGVyKCh0YXNrKSA9PiB0YXNrLmlkICE9PSB0YXNrSWQpO1xuICB9XG5cbiAgX2NhbGxTdWJzY3JpYmVycygpIHtcbiAgICB0aGlzLl9zdWJzY3JpYmVycy5mb3JFYWNoKChsaXN0ZW5lcikgPT4gbGlzdGVuZXIoKSk7XG4gIH1cblxuICBfdXBkYXRlQW5kU2V0RGF0ZXMoKSB7XG4gICAgY29uc3Qgc3RhcnREYXRlID0gbmV3IERhdGUodGhpcy5fY3VycmVudERhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCkpO1xuXG4gICAgcmV0dXJuIHN0YXJ0RGF0ZS5zZXREYXRlKFxuICAgICAgc3RhcnREYXRlLmdldERhdGUoKSAtIHN0YXJ0RGF0ZS5nZXREYXkoKSArIChzdGFydERhdGUuZ2V0RGF5KCkgPT09IDAgPyAtNiA6IDEpXG4gICAgKTtcbiAgfVxuXG4gIGdldCBhc3NpZ25lZFRhc2tzKCkge1xuICAgIHJldHVybiB0aGlzLl9hc3NpZ25lZFRhc2tzO1xuICB9XG5cbiAgZ2V0IGJhY2tsb2dUYXNrcygpIHtcbiAgICByZXR1cm4gdGhpcy5fYmFja2xvZ1Rhc2tzO1xuICB9XG5cbiAgZ2V0IHVzZXJzSWRzKCkge1xuICAgIHJldHVybiB0aGlzLl91c2Vyc0lkcztcbiAgfVxuXG4gIHNldCB1c2Vycyh2YWx1ZSkge1xuICAgIHRoaXMuX3VzZXJzID0gdmFsdWU7XG4gIH1cblxuICBnZXQgdXNlcnMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3VzZXJzO1xuICB9XG5cbiAgZ2V0IGNhbGVuZGFyTGVuZ3RoKCkge1xuICAgIHJldHVybiB0aGlzLl9jYWxlbmRhckxlbmd0aDtcbiAgfVxuXG4gIGdldCBzdGFydERheSgpIHtcbiAgICByZXR1cm4gdGhpcy5fc3RhcnREYXk7XG4gIH1cblxuICBzZXQgc3RhcnREYXkodmFsdWUpIHtcbiAgICB0aGlzLl9zdGFydERheSA9IHZhbHVlO1xuICB9XG5cbiAgZ2V0IGN1cnJlbnREYXRlTnVtZXJpYygpIHtcbiAgICByZXR1cm4gdGhpcy5fY3VycmVudERhdGVOdW1lcmljO1xuICB9XG5cbiAgYWRkVGFza1RvQXNzaWduZWRUYXNrcyh0YXNrKSB7XG4gICAgdGhpcy5fYXNzaWduZWRUYXNrcy5wdXNoKHRhc2spO1xuICB9XG5cbiAgYXNzaWduVGFzayh7IHR5cGUsIHRhc2tJZCwgZXhlY3V0b3JJZCwgc3RhcnREYXRlIH0pIHtcbiAgICBjb25zdCB0YXNrVG9CZUFzc2lnbmVkID0gdGhpcy5fYmFja2xvZ1Rhc2tzLmZpbmQoKHRhc2spID0+IHRhc2tJZCA9PT0gdGFzay5pZCk7XG4gICAgdGFza1RvQmVBc3NpZ25lZC5leGVjdXRvciA9ICtleGVjdXRvcklkO1xuXG4gICAgLy8g0LfQsNC/0YDQvtGBINC40Lcg0LrQsNC70LXQvdC00LDRgNGPXG4gICAgaWYgKHR5cGUgPT09IEFTU0lHTl9CWV9EQVRFKSB7XG4gICAgICBpZiAodGhpcy5fY3VycmVudERhdGUgPiBEYXRlLnBhcnNlKHN0YXJ0RGF0ZSkpIHtcbiAgICAgICAgLy8g0L/QvtC/0YvRgtC60LAg0L3QsNC30L3QsNGH0LjRgtGMINC30LDQtNCw0L3QuNC1INC90LAgXCLQstGH0LXRgNCwXCJcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAodGFza1RvQmVBc3NpZ25lZC5wbGFuRW5kRGF0ZSA9PT0gdGFza1RvQmVBc3NpZ25lZC5wbGFuU3RhcnREYXRlKSB7XG4gICAgICAgIHRhc2tUb0JlQXNzaWduZWQucGxhbkVuZERhdGUgPSBzdGFydERhdGU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBkYXRlRGlmZmVyZW5jZSA9XG4gICAgICAgICAgRGF0ZS5wYXJzZSh0YXNrVG9CZUFzc2lnbmVkLnBsYW5FbmREYXRlKSAtIERhdGUucGFyc2UodGFza1RvQmVBc3NpZ25lZC5wbGFuU3RhcnREYXRlKTtcbiAgICAgICAgY29uc3QgbmV3RW5kRGF0ZSA9IERhdGUucGFyc2Uoc3RhcnREYXRlKSArIGRhdGVEaWZmZXJlbmNlO1xuICAgICAgICB0YXNrVG9CZUFzc2lnbmVkLnBsYW5FbmREYXRlID0gcmVmaW5lVG9OdW1lcmljWVlNTUREKG5ld0VuZERhdGUpO1xuICAgICAgfVxuICAgICAgdGFza1RvQmVBc3NpZ25lZC5wbGFuU3RhcnREYXRlID0gc3RhcnREYXRlO1xuICAgIH1cbiAgICB0aGlzLmFkZFRhc2tUb0Fzc2lnbmVkVGFza3ModGFza1RvQmVBc3NpZ25lZCk7XG4gICAgdGhpcy5fcmVtb3ZlVGFza0Zyb21CYWNrbG9nKHRhc2tJZCk7XG4gICAgdGhpcy5fY2FsbFN1YnNjcmliZXJzKCk7XG4gIH1cblxuICBhZGRUYXNrVG9CYWNrbG9nKHRhc2spIHtcbiAgICB0aGlzLl9iYWNrbG9nVGFza3MucHVzaCh0YXNrKTtcbiAgfVxuXG4gIG1hcFVzZXJzSWRzKHVzZXJzKSB7XG4gICAgY29uc3QgaWRzID0gdXNlcnMucmVkdWNlKChvYmosIHsgaWQgfSwgaSkgPT4gKHsgLi4ub2JqLCBbaV06IGlkIH0pLCB7fSk7XG4gICAgdGhpcy5fdXNlcnNJZHMgPSB7IC4uLmlkcyB9O1xuICB9XG5cbiAgYWRkU3Vic2NyaWJlcnMoc3Vic2NyaWJlcnMpIHtcbiAgICB0aGlzLl9zdWJzY3JpYmVycyA9IFsuLi5zdWJzY3JpYmVyc107XG4gIH1cbn1cblxuY29uc3QgU3RhdGUgPSBuZXcgUHJvamVjdFN0YXRlKCk7XG5cbmV4cG9ydCBkZWZhdWx0IFN0YXRlO1xuIiwiaW1wb3J0IHsgQkFTRV9VUkwgfSBmcm9tICcuLi9jb25maWcvY29uZmlnJztcblxuY29uc3QgY2hlY2tTZXJ2ZXJSZXNwb25zZSA9IChyZXMpID0+IChyZXMub2sgPyByZXMuanNvbigpIDogUHJvbWlzZS5yZWplY3QocmVzKSk7XG5cbmNvbnN0IGdldERhdGEgPSBhc3luYyAocm91dGUpID0+IHtcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7QkFTRV9VUkx9JHtyb3V0ZX1gLCB7IG1ldGhvZDogJ0dFVCcgfSk7XG4gIHJldHVybiBjaGVja1NlcnZlclJlc3BvbnNlKHJlcyk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBnZXREYXRhO1xuIiwiY2xhc3MgQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoeyB0ZW1wbGF0ZVNlbGVjdG9yLCBlbGVtZW50U2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IgPSB0ZW1wbGF0ZVNlbGVjdG9yO1xuICAgIHRoaXMuX2VsZW1lbnRTZWxlY3RvciA9IGVsZW1lbnRTZWxlY3RvcjtcbiAgfVxuXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICB0aGlzLl90ZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fdGVtcGxhdGVTZWxlY3RvcikuY29udGVudDtcbiAgICAvLyDRgdCw0Lwg0Y3Qu9C10LzQtdC90YJcbiAgICByZXR1cm4gdGhpcy5fdGVtcGxhdGUucXVlcnlTZWxlY3Rvcih0aGlzLl9lbGVtZW50U2VsZWN0b3IpLmNsb25lTm9kZSh0cnVlKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDb21wb25lbnQ7XG4iLCJpbXBvcnQgQ29tcG9uZW50IGZyb20gJy4vQ29tcG9uZW50JztcbmltcG9ydCB7IHJlZmluZVRvU3RyaW5nIH0gZnJvbSAnLi4vdXRpbHMvaGFuZGxlLWRhdGVzJztcblxuY2xhc3MgQmFja2xvZ0NhcmQgZXh0ZW5kcyBDb21wb25lbnQge1xuICBjb25zdHJ1Y3RvcihcbiAgICBjYXJkRGF0YSxcbiAgICB7XG4gICAgICB0ZW1wbGF0ZVNlbGVjdG9yLFxuICAgICAgZWxlbWVudFNlbGVjdG9yLFxuICAgICAgdGl0bGVTZWxlY3RvcixcbiAgICAgIGRlc2NyaXB0aW9uU2VsZWN0b3IsXG4gICAgICBzdGFydERhdGVTZWxlY3RvcixcbiAgICAgIGVuZERhdGVTZWxlY3RvcixcbiAgICAgIGRyYWdTdGFydENsYXNzLFxuICAgIH1cbiAgKSB7XG4gICAgc3VwZXIoeyB0ZW1wbGF0ZVNlbGVjdG9yLCBlbGVtZW50U2VsZWN0b3IgfSk7XG4gICAgdGhpcy5fY2FyZERhdGEgPSBjYXJkRGF0YTtcbiAgICB0aGlzLl9iYWNrbG9nQ2FyZCA9IHN1cGVyLl9nZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX2RyYWdTdGFydENsYXNzID0gZHJhZ1N0YXJ0Q2xhc3M7XG4gICAgdGhpcy5fY2FyZFRpdGxlID0gdGhpcy5fYmFja2xvZ0NhcmQucXVlcnlTZWxlY3Rvcih0aXRsZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9jYXJkRGVzY3JpcHRpb24gPSB0aGlzLl9iYWNrbG9nQ2FyZC5xdWVyeVNlbGVjdG9yKGRlc2NyaXB0aW9uU2VsZWN0b3IpO1xuICAgIHRoaXMuX2NhcmRTdGFydERhdGUgPSB0aGlzLl9iYWNrbG9nQ2FyZC5xdWVyeVNlbGVjdG9yKHN0YXJ0RGF0ZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9jYXJkRW5kRGF0ZSA9IHRoaXMuX2JhY2tsb2dDYXJkLnF1ZXJ5U2VsZWN0b3IoZW5kRGF0ZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVEcmFnU3RhcnQgPSB0aGlzLl9oYW5kbGVEcmFnU3RhcnQuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9oYW5kbGVEcmFnRW5kID0gdGhpcy5faGFuZGxlRHJhZ0VuZC5iaW5kKHRoaXMpO1xuICB9XG5cbiAgX2hhbmRsZURyYWdTdGFydChldnQpIHtcbiAgICB0aGlzLl9iYWNrbG9nQ2FyZC5jbGFzc0xpc3QuYWRkKHRoaXMuX2RyYWdTdGFydENsYXNzKTtcbiAgICBldnQuZGF0YVRyYW5zZmVyLnNldERhdGEoJ3RleHQvcGxhaW4nLCB0aGlzLl9jYXJkRGF0YS5pZCk7XG4gICAgZXZ0LmRhdGFUcmFuc2Zlci5lZmZlY3RBbGxvd2VkID0gJ21vdmUnO1xuICB9XG5cbiAgX2hhbmRsZURyYWdFbmQoKSB7XG4gICAgdGhpcy5fYmFja2xvZ0NhcmQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9kcmFnU3RhcnRDbGFzcyk7XG4gIH1cblxuICBjcmVhdGVFbGVtZW50KCkge1xuICAgIHRoaXMuX2NhcmRUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX2NhcmREYXRhLnN1YmplY3Q7XG4gICAgdGhpcy5fY2FyZERlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gdGhpcy5fY2FyZERhdGEuZGVzY3JpcHRpb247XG4gICAgdGhpcy5fY2FyZFN0YXJ0RGF0ZS50ZXh0Q29udGVudCA9IHJlZmluZVRvU3RyaW5nKHRoaXMuX2NhcmREYXRhLnBsYW5TdGFydERhdGUpO1xuICAgIHRoaXMuX2NhcmRFbmREYXRlLnRleHRDb250ZW50ID0gcmVmaW5lVG9TdHJpbmcodGhpcy5fY2FyZERhdGEucGxhbkVuZERhdGUpO1xuICAgIHRoaXMuX2JhY2tsb2dDYXJkLnNldEF0dHJpYnV0ZSgnaWQnLCB0aGlzLl9jYXJkRGF0YS5pZCk7XG4gICAgcmV0dXJuIHRoaXMuX2JhY2tsb2dDYXJkO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fYmFja2xvZ0NhcmQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgdGhpcy5faGFuZGxlRHJhZ1N0YXJ0KTtcbiAgICB0aGlzLl9iYWNrbG9nQ2FyZC5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW5kJywgdGhpcy5faGFuZGxlRHJhZ0VuZCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQmFja2xvZ0NhcmQ7XG4iLCJjbGFzcyBSZW5kZXJlclNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcihjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICAgIHRoaXMuY2xlYXJJdGVtcyA9IHRoaXMuY2xlYXJJdGVtcy5iaW5kKHRoaXMpO1xuICB9XG5cbiAgYWRkSXRlbShpdGVtKSB7XG4gICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZChpdGVtKTtcbiAgfVxuXG4gIGNsZWFySXRlbXMoKSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnRleHRDb250ZW50ID0gJyc7XG4gIH1cblxuICBhZGRUZXh0Q29udGVudChjb250ZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnRleHRDb250ZW50ID0gY29udGVudDtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBSZW5kZXJlclNlY3Rpb247XG4iLCJpbXBvcnQgQ29tcG9uZW50IGZyb20gJy4vQ29tcG9uZW50JztcbmltcG9ydCB7IHJlZmluZVRvU3RyaW5nIH0gZnJvbSAnLi4vdXRpbHMvaGFuZGxlLWRhdGVzJztcblxuY2xhc3MgQ2FsZW5kYXJUYXNrIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoXG4gICAgdGFzayxcbiAgICB7XG4gICAgICB0ZW1wbGF0ZVNlbGVjdG9yLFxuICAgICAgZWxlbWVudFNlbGVjdG9yLFxuICAgICAgdGl0bGVTZWxlY3RvcixcbiAgICAgIHN1YnRpdGxlU2VsZWN0b3IsXG4gICAgICBkZXNjcmlwdGlvblNlbGVjdG9yLFxuICAgICAgc3RhcnREYXRlU2VsZWN0b3IsXG4gICAgICBlbmREYXRlU2VsZWN0b3IsXG4gICAgfVxuICApIHtcbiAgICBzdXBlcih7IHRlbXBsYXRlU2VsZWN0b3IsIGVsZW1lbnRTZWxlY3RvciB9KTtcbiAgICB0aGlzLl90YXNrID0gdGFzaztcbiAgICB0aGlzLl90YXNrRWxlbWVudCA9IHN1cGVyLl9nZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX3RpdGxlRUxlbWVudCA9IHRoaXMuX3Rhc2tFbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGl0bGVTZWxlY3Rvcik7XG4gICAgdGhpcy5fc3VidGl0bGVFTGVtZW50ID0gdGhpcy5fdGFza0VsZW1lbnQucXVlcnlTZWxlY3RvcihzdWJ0aXRsZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9kZXNjcmlwdGlvbkVsZW1lbnQgPSB0aGlzLl90YXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKGRlc2NyaXB0aW9uU2VsZWN0b3IpO1xuICAgIHRoaXMuX3N0YXJ0RGF0ZUVsZW1lbnQgPSB0aGlzLl90YXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKHN0YXJ0RGF0ZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9lbmREYXRlRWxlbWVudCA9IHRoaXMuX3Rhc2tFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoZW5kRGF0ZVNlbGVjdG9yKTtcbiAgfVxuXG4gIGNyZWF0ZUVsZW1lbnQoKSB7XG4gICAgdGhpcy5fdGl0bGVFTGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5fdGFzay5zdWJqZWN0O1xuICAgIHRoaXMuX3N1YnRpdGxlRUxlbWVudC50ZXh0Q29udGVudCA9IHRoaXMuX3Rhc2suc3ViamVjdDtcbiAgICB0aGlzLl9kZXNjcmlwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQgPSB0aGlzLl90YXNrLmRlc2NyaXB0aW9uO1xuICAgIHRoaXMuX3N0YXJ0RGF0ZUVsZW1lbnQudGV4dENvbnRlbnQgPSByZWZpbmVUb1N0cmluZyh0aGlzLl90YXNrLnBsYW5TdGFydERhdGUpO1xuICAgIHRoaXMuX2VuZERhdGVFbGVtZW50LnRleHRDb250ZW50ID0gcmVmaW5lVG9TdHJpbmcodGhpcy5fdGFzay5wbGFuRW5kRGF0ZSk7XG5cbiAgICByZXR1cm4gdGhpcy5fdGFza0VsZW1lbnQ7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2FsZW5kYXJUYXNrO1xuIiwiaW1wb3J0IENvbXBvbmVudCBmcm9tICcuL0NvbXBvbmVudCc7XG5pbXBvcnQgQ2FsZW5kYXJUYXNrIGZyb20gJy4vQ2FsZW5kYXJUYXNrJztcbmltcG9ydCB7IGNhbGVuZGFyVGFza1NlbGVjdG9ycyB9IGZyb20gJy4uL2NvbmZpZy9jb25zdGFudHMnO1xuXG5jbGFzcyBDYWxlbmRhckNlbGwgZXh0ZW5kcyBDb21wb25lbnQge1xuICBjb25zdHJ1Y3RvcihjZWxsLCB7IHRlbXBsYXRlU2VsZWN0b3IsIGVsZW1lbnRTZWxlY3RvciB9KSB7XG4gICAgc3VwZXIoeyB0ZW1wbGF0ZVNlbGVjdG9yLCBlbGVtZW50U2VsZWN0b3IgfSk7XG4gICAgdGhpcy5fY2VsbCA9IGNlbGw7XG4gICAgdGhpcy5fY2VsbEVsZW1lbnQgPSBzdXBlci5fZ2V0VGVtcGxhdGUoKTtcbiAgfVxuXG4gIF9hZGRJdGVtKGl0ZW0pIHtcbiAgICB0aGlzLl9jZWxsRWxlbWVudC5hcHBlbmQoaXRlbSk7XG4gIH1cblxuICBjcmVhdGVFbGVtZW50KCkge1xuICAgIHRoaXMuX2NlbGxFbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1leGVjdXRvcicsIHRoaXMuX2NlbGwuZXhlY3V0b3IpO1xuICAgIHRoaXMuX2NlbGxFbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1kYXRlJywgdGhpcy5fY2VsbC5kYXRlKTtcblxuICAgIHJldHVybiB0aGlzLl9jZWxsRWxlbWVudDtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKCkge1xuICAgIHRoaXMuX2NlbGwudGFza3MuZm9yRWFjaCgodGFzaykgPT4ge1xuICAgICAgY29uc3QgbmV3VGFzayA9IG5ldyBDYWxlbmRhclRhc2sodGFzaywgY2FsZW5kYXJUYXNrU2VsZWN0b3JzKTtcbiAgICAgIHRoaXMuX2FkZEl0ZW0obmV3VGFzay5jcmVhdGVFbGVtZW50KCkpO1xuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENhbGVuZGFyQ2VsbDtcbiIsImltcG9ydCBQcm9qZWN0U3RhdGUgZnJvbSAnLi4vc3RhdGUvUHJvamVjdFN0YXRlJztcbmltcG9ydCBDb21wb25lbnQgZnJvbSAnLi9Db21wb25lbnQnO1xuaW1wb3J0IENhbGVuZGFyQ2VsbCBmcm9tICcuL0NhbGVuZGFyQ2VsbCc7XG5pbXBvcnQgeyBjYWxlbmRhckNlbGxTZWxlY3RvcnMgfSBmcm9tICcuLi9jb25maWcvY29uc3RhbnRzJztcblxuY2xhc3MgQ2FsZW5kYXJDb2x1bW4gZXh0ZW5kcyBDb21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcihjb2x1bW4sIHsgdGVtcGxhdGVTZWxlY3RvciwgZWxlbWVudFNlbGVjdG9yIH0pIHtcbiAgICBzdXBlcih7IHRlbXBsYXRlU2VsZWN0b3IsIGVsZW1lbnRTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9jb2x1bW4gPSBjb2x1bW47XG4gICAgdGhpcy5fY2FsZW5kYXJDb2x1bW4gPSBzdXBlci5fZ2V0VGVtcGxhdGUoKTtcbiAgICB0aGlzLl9kYXlUYXNrc1NjaGVtYSA9IHt9O1xuICB9XG5cbiAgX2dldFRhc2tzRm9yQ3VycmVudERheSh0YXNrcykge1xuICAgIGNvbnN0IHBhcnNlZENvbHVtbkRhdGUgPSBEYXRlLnBhcnNlKHRoaXMuX2NvbHVtbi5kYXRlKTtcbiAgICByZXR1cm4gdGFza3MuZmlsdGVyKFxuICAgICAgKHRhc2spID0+XG4gICAgICAgIERhdGUucGFyc2UodGFzay5wbGFuU3RhcnREYXRlKSA8PSBwYXJzZWRDb2x1bW5EYXRlICYmXG4gICAgICAgIHBhcnNlZENvbHVtbkRhdGUgPD0gRGF0ZS5wYXJzZSh0YXNrLnBsYW5FbmREYXRlKVxuICAgICk7XG4gIH1cblxuICBfZ2V0RGF5VGFza3NTY2hlbWEoKSB7XG4gICAgdGhpcy5fdGFza3NGb3JDdXJyZW50RGF5ID0gdGhpcy5fZ2V0VGFza3NGb3JDdXJyZW50RGF5KFByb2plY3RTdGF0ZS5hc3NpZ25lZFRhc2tzKTtcblxuICAgIGlmICh0aGlzLl90YXNrc0ZvckN1cnJlbnREYXkpIHtcbiAgICAgIHRoaXMuX3Rhc2tzRm9yQ3VycmVudERheS5mb3JFYWNoKCh0YXNrKSA9PiB7XG4gICAgICAgIGlmICghdGhpcy5fZGF5VGFza3NTY2hlbWFbdGFzay5leGVjdXRvcl0pIHtcbiAgICAgICAgICB0aGlzLl9kYXlUYXNrc1NjaGVtYVt0YXNrLmV4ZWN1dG9yXSA9IFt0YXNrXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLl9kYXlUYXNrc1NjaGVtYVt0YXNrLmV4ZWN1dG9yXSA9IFsuLi50aGlzLl9kYXlUYXNrc1NjaGVtYVt0YXNrLmV4ZWN1dG9yXSwgdGFza107XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGNyZWF0ZUNlbGxzKCkge1xuICAgIHRoaXMuX2dldERheVRhc2tzU2NoZW1hKCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBQcm9qZWN0U3RhdGUudXNlcnMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgIGNvbnN0IHVzZXJJZCA9IFByb2plY3RTdGF0ZS51c2Vyc0lkc1tpXTtcbiAgICAgIGNvbnN0IGNvbHVtbkNlbGwgPSBuZXcgQ2FsZW5kYXJDZWxsKFxuICAgICAgICB7IGV4ZWN1dG9yOiB1c2VySWQsIGRhdGU6IHRoaXMuX2NvbHVtbi5kYXRlLCB0YXNrczogdGhpcy5fZGF5VGFza3NTY2hlbWFbdXNlcklkXSA/PyBbXSB9LFxuICAgICAgICBjYWxlbmRhckNlbGxTZWxlY3RvcnNcbiAgICAgICk7XG4gICAgICBjb25zdCBjZWxsRWxlbWVudCA9IGNvbHVtbkNlbGwuY3JlYXRlRWxlbWVudCgpO1xuICAgICAgY29sdW1uQ2VsbC5yZW5kZXJJdGVtcygpO1xuICAgICAgdGhpcy5hZGRJdGVtKGNlbGxFbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBjcmVhdGVFbGVtZW50KCkge1xuICAgIHRoaXMuY3JlYXRlQ2VsbHMoKTtcbiAgICByZXR1cm4gdGhpcy5fY2FsZW5kYXJDb2x1bW47XG4gIH1cblxuICBhZGRJdGVtKGl0ZW0pIHtcbiAgICB0aGlzLl9jYWxlbmRhckNvbHVtbi5hcHBlbmQoaXRlbSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2FsZW5kYXJDb2x1bW47XG4iLCJpbXBvcnQgQ29tcG9uZW50IGZyb20gJy4vQ29tcG9uZW50JztcbmltcG9ydCBQcm9qZWN0U3RhdGUgZnJvbSAnLi4vc3RhdGUvUHJvamVjdFN0YXRlJztcbmltcG9ydCB7IHJlZmluZVRvTnVtZXJpY0RETU0gfSBmcm9tICcuLi91dGlscy9oYW5kbGUtZGF0ZXMnO1xuXG5jbGFzcyBDYWxlbmRhckRhdGUgZXh0ZW5kcyBDb21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcih7IGRhdGUgfSwgeyB0ZW1wbGF0ZVNlbGVjdG9yLCBlbGVtZW50U2VsZWN0b3IsIGN1cnJlbnREYXlDbGFzcyB9KSB7XG4gICAgc3VwZXIoeyB0ZW1wbGF0ZVNlbGVjdG9yLCBlbGVtZW50U2VsZWN0b3IgfSk7XG4gICAgdGhpcy5fZGF0ZSA9IGRhdGU7XG4gICAgdGhpcy5fY3VycmVudERheUNsYXNzID0gY3VycmVudERheUNsYXNzO1xuICAgIHRoaXMuX2RhdGVFbGVtZW50ID0gc3VwZXIuX2dldFRlbXBsYXRlKCk7XG4gIH1cblxuICBjcmVhdGVFbGVtZW50KCkge1xuICAgIGNvbnN0IGNlbGxEYXRlID0gbmV3IERhdGUodGhpcy5fZGF0ZSk7XG4gICAgdGhpcy5fZGF0ZUVsZW1lbnQudGV4dENvbnRlbnQgPSByZWZpbmVUb051bWVyaWNERE1NKGNlbGxEYXRlKTtcbiAgICBpZiAodGhpcy5fZGF0ZSA9PT0gUHJvamVjdFN0YXRlLmN1cnJlbnREYXRlTnVtZXJpYykge1xuICAgICAgdGhpcy5fZGF0ZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jdXJyZW50RGF5Q2xhc3MpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fZGF0ZUVsZW1lbnQ7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2FsZW5kYXJEYXRlO1xuIiwiaW1wb3J0IFByb2plY3RTdGF0ZSBmcm9tICcuLi9zdGF0ZS9Qcm9qZWN0U3RhdGUnO1xuaW1wb3J0IENvbXBvbmVudCBmcm9tICcuL0NvbXBvbmVudCc7XG5pbXBvcnQgeyBBU1NJR05fQllfVVNFUiB9IGZyb20gJy4uL3N0YXRlL3R5cGVzJztcblxuY2xhc3MgVXNlckNhcmQgZXh0ZW5kcyBDb21wb25lbnQge1xuICBjb25zdHJ1Y3RvcihjYXJkRGF0YSwgeyB0ZW1wbGF0ZVNlbGVjdG9yLCBlbGVtZW50U2VsZWN0b3IsIHVzZXJOYW1lU2VsZWN0b3IsIGRyYWdPdmVyQ2xhc3MgfSkge1xuICAgIHN1cGVyKHsgdGVtcGxhdGVTZWxlY3RvciwgZWxlbWVudFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX2NhcmREYXRhID0gY2FyZERhdGE7XG4gICAgdGhpcy5fdXNlckNhcmQgPSBzdXBlci5fZ2V0VGVtcGxhdGUoKTtcbiAgICB0aGlzLl9mdWxsTmFtZUVsZW1lbnQgPSB0aGlzLl91c2VyQ2FyZC5xdWVyeVNlbGVjdG9yKHVzZXJOYW1lU2VsZWN0b3IpO1xuICAgIHRoaXMuX2RyYWdPdmVyQ2xhc3MgPSBkcmFnT3ZlckNsYXNzO1xuICAgIHRoaXMuX2hhbmRsZURyYWdPdmVyID0gdGhpcy5faGFuZGxlRHJhZ092ZXIuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9oYW5kbGVEcmFnTGVhdmUgPSB0aGlzLl9oYW5kbGVEcmFnTGVhdmUuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9oYW5kbGVEcm9wID0gdGhpcy5faGFuZGxlRHJvcC5iaW5kKHRoaXMpO1xuICB9XG5cbiAgX2hhbmRsZURyYWdPdmVyKGV2dCkge1xuICAgIGlmIChldnQuZGF0YVRyYW5zZmVyICYmIGV2dC5kYXRhVHJhbnNmZXIudHlwZXNbMF0gPT09ICd0ZXh0L3BsYWluJykge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl91c2VyQ2FyZC5jbGFzc0xpc3QuYWRkKHRoaXMuX2RyYWdPdmVyQ2xhc3MpO1xuICAgIH1cbiAgfVxuXG4gIF9oYW5kbGVEcmFnTGVhdmUoKSB7XG4gICAgdGhpcy5fdXNlckNhcmQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9kcmFnT3ZlckNsYXNzKTtcbiAgfVxuXG4gIF9oYW5kbGVEcm9wKGV2dCkge1xuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IHRhc2tJZCA9IGV2dC5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgndGV4dC9wbGFpbicpO1xuICAgIFByb2plY3RTdGF0ZS5hc3NpZ25UYXNrKHsgdHlwZTogQVNTSUdOX0JZX1VTRVIsIHRhc2tJZCwgZXhlY3V0b3JJZDogdGhpcy5fY2FyZERhdGEuaWQgfSk7XG4gICAgdGhpcy5faGFuZGxlRHJhZ0xlYXZlKCk7XG4gIH1cblxuICBjcmVhdGVDYXJkKCkge1xuICAgIHRoaXMuX2Z1bGxOYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IGAke3RoaXMuX2NhcmREYXRhLmZpcnN0TmFtZX0gJHt0aGlzLl9jYXJkRGF0YS5zdXJuYW1lfWA7XG4gICAgcmV0dXJuIHRoaXMuX3VzZXJDYXJkO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fdXNlckNhcmQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCB0aGlzLl9oYW5kbGVEcmFnT3Zlcik7XG4gICAgdGhpcy5fdXNlckNhcmQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2xlYXZlJywgdGhpcy5faGFuZGxlRHJhZ0xlYXZlKTtcbiAgICB0aGlzLl91c2VyQ2FyZC5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgdGhpcy5faGFuZGxlRHJvcCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVXNlckNhcmQ7XG4iLCJjb25zdCByZW1vdmVBbmltYXRpb24gPSAoZWxlbWVudCkgPT4ge1xuICAvLyDRg9C00LDQu9C10L3QuNC1INC00LvRjyDQstC+0YHRgdGC0LDQvdC+0LLQu9C10L3QuNGPINGD0YDQvtCy0L3QtdC5INC90LDQu9C+0LbQtdC90LjRjyDQuCDQtNC+0YHRgtGD0L/QvdC+0YHRgtC4INGB0LLQvtC50YHRgtCy0LAgdHJhbnNmb3JtXG4gIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICB9LCAxMTAwKTtcbn07XG5cbmV4cG9ydCBjb25zdCBhcHBseVNsaWRlSW5Cb3R0b21VcEFuaW0gPSAoZWxlbWVudCwgaW5kZXgpID0+IHtcbiAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXG4gICAgJ3N0eWxlJyxcbiAgICBgYW5pbWF0aW9uOiBzbGlkZS1pbi1ib3R0b20tdXAgMC41cyBlYXNlLW91dCAwLiR7aW5kZXh9cyBmb3J3YXJkczsgb3BhY2l0eTogMDtgXG4gICk7XG4gIHJlbW92ZUFuaW1hdGlvbihlbGVtZW50KTtcbn07XG5cbmV4cG9ydCBjb25zdCBhcHBseVNsaWRlSW5SaWdodExlZnRBbmltID0gKGVsZW1lbnQsIGluZGV4KSA9PiB7XG4gIGVsZW1lbnQuc2V0QXR0cmlidXRlKFxuICAgICdzdHlsZScsXG4gICAgYGFuaW1hdGlvbjogc2xpZGUtaW4tcmlnaHQtbGVmdCAwLjVzIGVhc2Utb3V0IDAuJHtpbmRleH1zIGZvcndhcmRzOyBvcGFjaXR5OiAwO2BcbiAgKTtcbiAgcmVtb3ZlQW5pbWF0aW9uKGVsZW1lbnQpO1xufTtcbiIsImltcG9ydCAnLi9pbmRleC5jc3MnO1xuaW1wb3J0IFByb2plY3RTdGF0ZSBmcm9tICcuL3N0YXRlL1Byb2plY3RTdGF0ZSc7XG5pbXBvcnQge1xuICBiYWNrbG9nQ2FyZFNlbGVjdG9ycyxcbiAgY2FsZW5kYXJDb2x1bW5TZWxlY3RvcnMsXG4gIGNhbGVuZGFyRGF0ZVNlbGVjdG9ycyxcbiAgZnVsbERheUluTWlsbGlzZWNvbmRzLFxuICBtYXhJbmRleEZvckFuaW1hdGlvbixcbiAgcG9wdXBTZWxlY3RvcnMsXG4gIHByZWxvYWRlclN0YXRlU2VsZWN0b3JzLFxuICB0b2dnbGVUaGVtZVNldHRpbmdzLFxuICB1c2Vyc0NhcmRTZWxlY3RvcnMsXG59IGZyb20gJy4vY29uZmlnL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBUQVNLU19ST1VURSwgVVNFUlNfUk9VVEUgfSBmcm9tICcuL2NvbmZpZy9jb25maWcnO1xuaW1wb3J0IHsgcmVmaW5lVG9OdW1lcmljWVlNTUREIH0gZnJvbSAnLi91dGlscy9oYW5kbGUtZGF0ZXMnO1xuaW1wb3J0IHsgaW5pdFN3aXRjaEJldHdlZW5XZWVrcywgaW5pdFRvZ2dsZUNvbG9yVGhlbWUgfSBmcm9tICcuL3V0aWxzJztcbmltcG9ydCBnZXREYXRhIGZyb20gJy4vYXBpL21haW4tYXBpJztcbmltcG9ydCB7XG4gIEJhY2tsb2dDYXJkLFxuICBDYWxlbmRhcixcbiAgQ2FsZW5kYXJDb2x1bW4sXG4gIENhbGVuZGFyRGF0ZSxcbiAgUG9wdXBFcnJvcixcbiAgUmVuZGVyZXJTZWN0aW9uLFxuICBVc2VyQ2FyZCxcbn0gZnJvbSAnLi9jb21wb25lbnRzJztcbmltcG9ydCBpbml0U2VhcmNoIGZyb20gJy4vdXRpbHMvc2VhcmNoJztcbmltcG9ydCB7IGFwcGx5U2xpZGVJbkJvdHRvbVVwQW5pbSwgYXBwbHlTbGlkZUluUmlnaHRMZWZ0QW5pbSB9IGZyb20gJy4vdXRpbHMvYXBwbHktc3R5bGUtYW5pbWF0aW9uJztcblxuY29uc3QgcGFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJlbG9hZGVyU3RhdGVTZWxlY3RvcnMucGFnZVNlbGVjdG9yKTtcbmNvbnN0IHByZWxvYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJlbG9hZGVyU3RhdGVTZWxlY3RvcnMucHJlbG9hZGVyU2VsZWN0b3IpO1xuY29uc3QgcG9wdXBFcnJvciA9IG5ldyBQb3B1cEVycm9yKHBvcHVwU2VsZWN0b3JzKTtcbi8vINC60L7QvdGC0LXQudC90LXRgNGLLdGA0LXQvdC00LXRgNC10YDRi1xuY29uc3QgYmFja2xvZ0xpc3QgPSBuZXcgUmVuZGVyZXJTZWN0aW9uKGJhY2tsb2dDYXJkU2VsZWN0b3JzLnBhcmVudFNlbGVjdG9yKTtcbmNvbnN0IHVzZXJzTGlzdCA9IG5ldyBSZW5kZXJlclNlY3Rpb24odXNlcnNDYXJkU2VsZWN0b3JzLnBhcmVudFNlbGVjdG9yKTtcbmNvbnN0IGRhdGVzQ29udGFpbmVyID0gbmV3IFJlbmRlcmVyU2VjdGlvbihjYWxlbmRhckRhdGVTZWxlY3RvcnMucGFyZW50U2VsZWN0b3IpO1xuY29uc3QgY2FsZW5kYXJDb250YWluZXIgPSBuZXcgQ2FsZW5kYXIoY2FsZW5kYXJDb2x1bW5TZWxlY3RvcnMucGFyZW50U2VsZWN0b3IpO1xuY2FsZW5kYXJDb250YWluZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgcmVuZGVyQ2FsZW5kYXIgPSAoaXNBbmltYXRlZCkgPT4ge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IFByb2plY3RTdGF0ZS5jYWxlbmRhckxlbmd0aDsgaSArPSAxKSB7XG4gICAgY29uc3QgdGhpc0RhdGUgPSBQcm9qZWN0U3RhdGUuc3RhcnREYXkgKyBmdWxsRGF5SW5NaWxsaXNlY29uZHMgKiBpO1xuICAgIGNvbnN0IGRhdGVTdHJpbmcgPSByZWZpbmVUb051bWVyaWNZWU1NREQodGhpc0RhdGUpO1xuXG4gICAgY29uc3QgZGF0ZU9iamVjdCA9IG5ldyBDYWxlbmRhckRhdGUoeyBkYXRlOiBkYXRlU3RyaW5nIH0sIGNhbGVuZGFyRGF0ZVNlbGVjdG9ycyk7XG4gICAgY29uc3QgY29sdW1uT2JqZWN0ID0gbmV3IENhbGVuZGFyQ29sdW1uKHsgZGF0ZTogZGF0ZVN0cmluZyB9LCBjYWxlbmRhckNvbHVtblNlbGVjdG9ycyk7XG4gICAgY29uc3QgZGF0ZUVsZW1lbnQgPSBkYXRlT2JqZWN0LmNyZWF0ZUVsZW1lbnQoKTtcbiAgICBjb25zdCBjb2x1bW5FbGVtZW50ID0gY29sdW1uT2JqZWN0LmNyZWF0ZUVsZW1lbnQoKTtcbiAgICBpZiAoaXNBbmltYXRlZCkge1xuICAgICAgYXBwbHlTbGlkZUluUmlnaHRMZWZ0QW5pbShkYXRlRWxlbWVudCwgaSk7XG4gICAgICBhcHBseVNsaWRlSW5SaWdodExlZnRBbmltKGNvbHVtbkVsZW1lbnQsIGkpO1xuICAgIH1cbiAgICBkYXRlc0NvbnRhaW5lci5hZGRJdGVtKGRhdGVFbGVtZW50KTtcbiAgICBjYWxlbmRhckNvbnRhaW5lci5hZGRJdGVtKGNvbHVtbkVsZW1lbnQpO1xuICB9XG59O1xuXG5jb25zdCBjcmVhdGVCYWNrbG9nQ2FyZCA9ICh0YXNrKSA9PiB7XG4gIGNvbnN0IGJhY2tsb2dDYXJkID0gbmV3IEJhY2tsb2dDYXJkKHRhc2ssIGJhY2tsb2dDYXJkU2VsZWN0b3JzKTtcbiAgY29uc3QgbmV3QmFja2xvZ0NhcmQgPSBiYWNrbG9nQ2FyZC5jcmVhdGVFbGVtZW50KCk7XG4gIGJhY2tsb2dDYXJkLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIHJldHVybiBuZXdCYWNrbG9nQ2FyZDtcbn07XG5cbmNvbnN0IHJlbmRlckJhY2tsb2dUYXNrcyA9IChpc0FuaW1hdGVkKSA9PiB7XG4gIFByb2plY3RTdGF0ZS5iYWNrbG9nVGFza3MuZm9yRWFjaCgodGFzaywgaSkgPT4ge1xuICAgIGNvbnN0IGJhY2tsb2dDYXJkID0gY3JlYXRlQmFja2xvZ0NhcmQodGFzayk7XG4gICAgaWYgKGlzQW5pbWF0ZWQgJiYgaSA8PSBtYXhJbmRleEZvckFuaW1hdGlvbi5iYWNrbG9nQ2FyZHMpIHtcbiAgICAgIGFwcGx5U2xpZGVJbkJvdHRvbVVwQW5pbShiYWNrbG9nQ2FyZCwgaSk7XG4gICAgfVxuICAgIGJhY2tsb2dMaXN0LmFkZEl0ZW0oYmFja2xvZ0NhcmQpO1xuICB9KTtcbn07XG5cbmNvbnN0IHJlbmRlclVzZXJzID0gKHVzZXJzLCBpc0FuaW1hdGVkKSA9PlxuICB1c2Vycy5mb3JFYWNoKCh1c2VyLCBpKSA9PiB7XG4gICAgY29uc3QgdXNlckNhcmQgPSBuZXcgVXNlckNhcmQodXNlciwgdXNlcnNDYXJkU2VsZWN0b3JzKTtcbiAgICBjb25zdCBuZXdVc2VyQ2FyZCA9IHVzZXJDYXJkLmNyZWF0ZUNhcmQoKTtcbiAgICBpZiAoaXNBbmltYXRlZCAmJiBpIDw9IG1heEluZGV4Rm9yQW5pbWF0aW9uLnVzZXJzKSB7XG4gICAgICBhcHBseVNsaWRlSW5Cb3R0b21VcEFuaW0obmV3VXNlckNhcmQsIGkpO1xuICAgIH1cbiAgICB1c2VyQ2FyZC5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHVzZXJzTGlzdC5hZGRJdGVtKG5ld1VzZXJDYXJkKTtcbiAgfSk7XG5cbi8vINC/0LXRgNCy0LDRjyDQvtGC0YDQuNGB0L7QstC60LAg0Lgg0L7QsdGA0LDQsdC+0YLQutCwINC00LDQvdC90YvRhSDRgSDRgdC10YDQstC10YDQsFxuY29uc3QgZ2V0SW5pdGlhbERhdGEgPSAoKSA9PiB7XG4gIFByb21pc2UuYWxsKFtnZXREYXRhKFVTRVJTX1JPVVRFKSwgZ2V0RGF0YShUQVNLU19ST1VURSldKVxuICAgIC50aGVuKChbdXNlcnMsIHRhc2tzXSkgPT4ge1xuICAgICAgLy8g0YHQvtGA0YLQuNGA0L7QstC60LAg0LfQsNC00LDQvdC40Lkg0Lgg0LTQvtCx0LDQstC70LXQvdC40LUg0LjRhSDQsiDRgdGC0LXQudGCXG4gICAgICB0YXNrcy5mb3JFYWNoKCh0YXNrKSA9PiB7XG4gICAgICAgIGlmICh0YXNrLmV4ZWN1dG9yKSBQcm9qZWN0U3RhdGUuYWRkVGFza1RvQXNzaWduZWRUYXNrcyh0YXNrKTtcbiAgICAgICAgZWxzZSBQcm9qZWN0U3RhdGUuYWRkVGFza1RvQmFja2xvZyh0YXNrKTtcbiAgICAgIH0pO1xuICAgICAgLy8g0YTQvtGA0LzQuNGA0L7QstCw0L3QuNC1INC+0LHRitC10LrRgtCwINGBIGlkINC40YHQv9C+0LvQvdC40YLQtdC70LXQuVxuICAgICAgUHJvamVjdFN0YXRlLnVzZXJzID0gdXNlcnM7XG4gICAgICBQcm9qZWN0U3RhdGUubWFwVXNlcnNJZHModXNlcnMpO1xuICAgICAgLy8g0YDQtdC90LTQtdGA0LjQvdCzXG4gICAgICByZW5kZXJVc2Vycyh1c2VycywgdHJ1ZSk7XG4gICAgICByZW5kZXJDYWxlbmRhcih0cnVlKTtcbiAgICAgIHJlbmRlckJhY2tsb2dUYXNrcyh0cnVlKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoKSA9PiBwb3B1cEVycm9yLm9wZW4oKSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBwYWdlLmNsYXNzTGlzdC5yZW1vdmUocHJlbG9hZGVyU3RhdGVTZWxlY3RvcnMucGFnZUhpZGRlbkNsYXNzKTtcbiAgICAgIHByZWxvYWRlci5jbGFzc0xpc3QucmVtb3ZlKHByZWxvYWRlclN0YXRlU2VsZWN0b3JzLnByZWxvYWRlclZpc2libGVDbGFzcyk7XG4gICAgfSk7XG59O1xuXG5nZXRJbml0aWFsRGF0YSgpO1xuXG4vLyDQv9C+0LjRgdC6XG5pbml0U2VhcmNoKGJhY2tsb2dMaXN0LCBjcmVhdGVCYWNrbG9nQ2FyZCwgcmVuZGVyQmFja2xvZ1Rhc2tzKTtcbi8vINC/0LXRgNC10LvQuNGB0YLRi9Cy0LDQvdC40LUg0LrQsNC70LXQvdC00LDRgNGPXG5pbml0U3dpdGNoQmV0d2VlbldlZWtzKGNhbGVuZGFyQ29udGFpbmVyLmNsZWFySXRlbXMsIGRhdGVzQ29udGFpbmVyLmNsZWFySXRlbXMsIHJlbmRlckNhbGVuZGFyKTtcbi8vINC/0LXRgNC10LrQu9GO0YfQtdC90LjQtSDRgtC10LzRi1xuaW5pdFRvZ2dsZUNvbG9yVGhlbWUodG9nZ2xlVGhlbWVTZXR0aW5ncyk7XG5cbi8vINC00L7QsdCw0LLQu9C10L3QuNC1INC90LDQsdC70Y7QtNCw0YLQtdC70LXQuSDQsiDRgdGC0LXQudGCINC00LvRjyDRgNC10YDQtdC90LTQtdGA0LBcblByb2plY3RTdGF0ZS5hZGRTdWJzY3JpYmVycyhbXG4gIGNhbGVuZGFyQ29udGFpbmVyLmNsZWFySXRlbXMsXG4gIGJhY2tsb2dMaXN0LmNsZWFySXRlbXMsXG4gIGRhdGVzQ29udGFpbmVyLmNsZWFySXRlbXMsXG4gIHJlbmRlckNhbGVuZGFyLFxuICByZW5kZXJCYWNrbG9nVGFza3MsXG5dKTtcbiIsImltcG9ydCB7IHRpbWVyRGVsYXkgfSBmcm9tICcuLi9jb25maWcvY29uc3RhbnRzJztcblxuY2xhc3MgUG9wdXBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9ycykge1xuICAgIHRoaXMuX3NlbGVjdG9ycyA9IHNlbGVjdG9ycztcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLnBvcHVwRXJyb3IpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NlbGVjdG9ycy5wb3B1cE9wZW5DbGFzcyk7XG4gICAgdGhpcy5fY2xvc2UoKTtcbiAgfVxuXG4gIF9jbG9zZSgpIHtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2VsZWN0b3JzLnBvcHVwT3BlbkNsYXNzKTtcbiAgICB9LCB0aW1lckRlbGF5KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cEVycm9yO1xuIiwiaW1wb3J0IFByb2plY3RTdGF0ZSBmcm9tICcuLi9zdGF0ZS9Qcm9qZWN0U3RhdGUnO1xuaW1wb3J0IFJlbmRlcmVyU2VjdGlvbiBmcm9tICcuL1JlbmRlcmVyU2VjdGlvbic7XG5pbXBvcnQgeyBBU1NJR05fQllfREFURSB9IGZyb20gJy4uL3N0YXRlL3R5cGVzJztcbmltcG9ydCB7IGNhbGVuZGFyQ2VsbFNlbGVjdG9ycywgY2FsZW5kYXJUYXNrU2VsZWN0b3JzIH0gZnJvbSAnLi4vY29uZmlnL2NvbnN0YW50cyc7XG5cbmNsYXNzIENhbGVuZGFyIGV4dGVuZHMgUmVuZGVyZXJTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICBzdXBlcihjb250YWluZXJTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlRHJhZ092ZXIgPSB0aGlzLl9oYW5kbGVEcmFnT3Zlci5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX2hhbmRsZURyYWdMZWF2ZSA9IHRoaXMuX2hhbmRsZURyYWdMZWF2ZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX2hhbmRsZURyb3AgPSB0aGlzLl9oYW5kbGVEcm9wLmJpbmQodGhpcyk7XG4gIH1cblxuICBfaGFuZGxlRHJhZ092ZXIoZXZ0KSB7XG4gICAgY29uc3QgeyB0YXJnZXQgfSA9IGV2dDtcbiAgICBpZiAoXG4gICAgICBldnQuZGF0YVRyYW5zZmVyICYmXG4gICAgICBldnQuZGF0YVRyYW5zZmVyLnR5cGVzWzBdID09PSAndGV4dC9wbGFpbicgJiZcbiAgICAgICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKGNhbGVuZGFyQ2VsbFNlbGVjdG9ycy5lbGVtZW50Q2xhc3MpIHx8XG4gICAgICAgIHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoY2FsZW5kYXJUYXNrU2VsZWN0b3JzLmVsZW1lbnRDbGFzcykpXG4gICAgKSB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2Ryb3BwYWJsZUNlbGwgPSB0YXJnZXQuY2xvc2VzdChjYWxlbmRhckNlbGxTZWxlY3RvcnMuZWxlbWVudFNlbGVjdG9yKTtcbiAgICAgIHRoaXMuX2Ryb3BwYWJsZUNlbGwuY2xhc3NMaXN0LmFkZChjYWxlbmRhckNlbGxTZWxlY3RvcnMuZHJhZ092ZXJDbGFzcyk7XG4gICAgfVxuICB9XG5cbiAgX2hhbmRsZURyYWdMZWF2ZSgpIHtcbiAgICB0aGlzLl9kcm9wcGFibGVDZWxsLmNsYXNzTGlzdC5yZW1vdmUoY2FsZW5kYXJDZWxsU2VsZWN0b3JzLmRyYWdPdmVyQ2xhc3MpO1xuICB9XG5cbiAgX2hhbmRsZURyb3AoZXZ0KSB7XG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgdGFza0lkID0gZXZ0LmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJyk7XG4gICAgUHJvamVjdFN0YXRlLmFzc2lnblRhc2soe1xuICAgICAgdHlwZTogQVNTSUdOX0JZX0RBVEUsXG4gICAgICB0YXNrSWQsXG4gICAgICBleGVjdXRvcklkOiB0aGlzLl9kcm9wcGFibGVDZWxsLmRhdGFzZXQuZXhlY3V0b3IsXG4gICAgICBzdGFydERhdGU6IHRoaXMuX2Ryb3BwYWJsZUNlbGwuZGF0YXNldC5kYXRlLFxuICAgIH0pO1xuICAgIHRoaXMuX2hhbmRsZURyYWdMZWF2ZSgpO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgdGhpcy5faGFuZGxlRHJhZ092ZXIpO1xuICAgIHRoaXMuX2NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdkcmFnbGVhdmUnLCB0aGlzLl9oYW5kbGVEcmFnTGVhdmUpO1xuICAgIHRoaXMuX2NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgdGhpcy5faGFuZGxlRHJvcCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2FsZW5kYXI7XG4iLCJleHBvcnQgY29uc3QgQkFTRV9VUkwgPVxuICAnaHR0cHM6Ly92YXJhbmtpbl9kZXYuZWxtYTM2NS5ydS9hcGkvZXh0ZW5zaW9ucy8yYTM4NzYwZS0wODNhLTRkZDAtYWViYy03OGI1NzBiZmQzYzcvc2NyaXB0JztcbmV4cG9ydCBjb25zdCBVU0VSU19ST1VURSA9ICcvdXNlcnMnO1xuZXhwb3J0IGNvbnN0IFRBU0tTX1JPVVRFID0gJy90YXNrcyc7XG4iLCJpbXBvcnQgeyBzZWFyY2hGb3JtU2VsZWN0b3JzLCB0aW1lckRlbGF5IH0gZnJvbSAnLi4vY29uZmlnL2NvbnN0YW50cyc7XG5pbXBvcnQgUHJvamVjdFN0YXRlIGZyb20gJy4uL3N0YXRlL1Byb2plY3RTdGF0ZSc7XG5cbmNvbnN0IGluaXRTZWFyY2ggPSAoY29udGFpbmVyLCBjcmVhdGVDYXJkQ2FsbGJhY2ssIHJlbmRlckNhbGxiYWNrKSA9PiB7XG4gIGNvbnN0IHNlYXJjaEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlYXJjaEZvcm1TZWxlY3RvcnMuc2VhcmNoRm9ybSk7XG4gIGNvbnN0IHNlYXJjaElucHV0ID0gc2VhcmNoRm9ybS5xdWVyeVNlbGVjdG9yKHNlYXJjaEZvcm1TZWxlY3RvcnMuc2VhcmNoSW5wdXQpO1xuICBjb25zdCBzdWJtaXRCdXR0b24gPSBzZWFyY2hGb3JtLnF1ZXJ5U2VsZWN0b3Ioc2VhcmNoRm9ybVNlbGVjdG9ycy5zdWJtaXRCdXR0b24pO1xuXG4gIGNvbnN0IGhhbmRsZVNlYXJjaCA9IChldnQpID0+IHtcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBrZXl3b3JkID0gc2VhcmNoSW5wdXQudmFsdWU7XG4gICAgbGV0IHJlc3VsdDtcbiAgICBpZiAoa2V5d29yZC5sZW5ndGgpIHtcbiAgICAgIHJlc3VsdCA9IFByb2plY3RTdGF0ZS5iYWNrbG9nVGFza3MuZmlsdGVyKCh0YXNrKSA9PlxuICAgICAgICB0YXNrLnN1YmplY3QudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhrZXl3b3JkLnRvTG93ZXJDYXNlKCkpXG4gICAgICApO1xuICAgICAgY29udGFpbmVyLmNsZWFySXRlbXMoKTtcblxuICAgICAgaWYgKHJlc3VsdC5sZW5ndGgpIHtcbiAgICAgICAgcmVzdWx0LmZvckVhY2goKHRhc2spID0+IHtcbiAgICAgICAgICBjb25zdCBiYWNrbG9nQ2FyZCA9IGNyZWF0ZUNhcmRDYWxsYmFjayh0YXNrKTtcbiAgICAgICAgICBjb250YWluZXIuYWRkSXRlbShiYWNrbG9nQ2FyZCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29udGFpbmVyLmFkZFRleHRDb250ZW50KCfQndC40YfQtdCz0L4g0L3QtSDQvdCw0YjQu9C+0YHRjCcpO1xuICAgICAgICBzdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBjb250YWluZXIuY2xlYXJJdGVtcygpO1xuICAgICAgICAgIHJlbmRlckNhbGxiYWNrKCk7XG4gICAgICAgICAgc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgIH0sIHRpbWVyRGVsYXkpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBzZWFyY2hGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGhhbmRsZVNlYXJjaCk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBpbml0U2VhcmNoO1xuIiwiaW1wb3J0IFByb2plY3RTdGF0ZSBmcm9tICcuLi9zdGF0ZS9Qcm9qZWN0U3RhdGUnO1xuaW1wb3J0IHsgZnVsbERheUluTWlsbGlzZWNvbmRzLCB3ZWVrQnV0dG9uc1NlbGVjdG9ycyB9IGZyb20gJy4uL2NvbmZpZy9jb25zdGFudHMnO1xuXG5jb25zdCBpbml0U3dpdGNoQmV0d2VlbldlZWtzID0gKGNsZWFyQ29udGFpbmVyQ2FsbGJhY2ssIGNsZWFyRGF0ZXNDYWxsYmFjaywgcmVuZGVyQ2FsbGJhY2spID0+IHtcbiAgY29uc3Qgc2hvd05leHRXZWVrID0gKCkgPT4ge1xuICAgIGNsZWFyQ29udGFpbmVyQ2FsbGJhY2soKTtcbiAgICBjbGVhckRhdGVzQ2FsbGJhY2soKTtcbiAgICBQcm9qZWN0U3RhdGUuc3RhcnREYXkgKz0gZnVsbERheUluTWlsbGlzZWNvbmRzICogNztcbiAgICByZW5kZXJDYWxsYmFjaygpO1xuICB9O1xuXG4gIGNvbnN0IHNob3dQcmV2V2VlayA9ICgpID0+IHtcbiAgICBjbGVhckNvbnRhaW5lckNhbGxiYWNrKCk7XG4gICAgY2xlYXJEYXRlc0NhbGxiYWNrKCk7XG4gICAgUHJvamVjdFN0YXRlLnN0YXJ0RGF5IC09IGZ1bGxEYXlJbk1pbGxpc2Vjb25kcyAqIDc7XG4gICAgcmVuZGVyQ2FsbGJhY2soKTtcbiAgfTtcblxuICBjb25zdCBuZXh0V2Vla0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iod2Vla0J1dHRvbnNTZWxlY3RvcnMubmV4dFdlZWtCdXR0b24pO1xuICBjb25zdCBwcmV2V2Vla0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iod2Vla0J1dHRvbnNTZWxlY3RvcnMucHJldldlZWtCdXR0b24pO1xuXG4gIG5leHRXZWVrQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2hvd05leHRXZWVrKTtcbiAgcHJldldlZWtCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzaG93UHJldldlZWspO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgaW5pdFN3aXRjaEJldHdlZW5XZWVrcztcbiIsImltcG9ydCB7IGxvY2FsU3RvcmFnZVRoZW1lS2V5IH0gZnJvbSAnLi4vY29uZmlnL2NvbnN0YW50cyc7XG5cbmNvbnN0IGluaXRUb2dnbGVDb2xvclRoZW1lID0gKHsgYm9keVNlbGVjdG9yLCBib2R5TmV3VGhlbWVDbGFzcywgYnV0dG9uU2VsZWN0b3IgfSkgPT4ge1xuICBjb25zdCBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihib2R5U2VsZWN0b3IpO1xuICBjb25zdCBjaGFuZ2VDb2xvclRoZW1lQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihidXR0b25TZWxlY3Rvcik7XG5cbiAgY29uc3QgaXNUaGVtZURhcmsgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKGxvY2FsU3RvcmFnZVRoZW1lS2V5KSk7XG5cbiAgaWYgKGlzVGhlbWVEYXJrKSB7XG4gICAgYm9keS5jbGFzc0xpc3QuYWRkKGJvZHlOZXdUaGVtZUNsYXNzKTtcbiAgfVxuXG4gIGNvbnN0IHRvZ2dsZUFuZE1lbW9UaGVtZSA9ICgpID0+IHtcbiAgICBpZiAoYm9keS5jbGFzc0xpc3QuY29udGFpbnMoYm9keU5ld1RoZW1lQ2xhc3MpKSB7XG4gICAgICBib2R5LmNsYXNzTGlzdC5yZW1vdmUoYm9keU5ld1RoZW1lQ2xhc3MpO1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0obG9jYWxTdG9yYWdlVGhlbWVLZXksIEpTT04uc3RyaW5naWZ5KGZhbHNlKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJvZHkuY2xhc3NMaXN0LmFkZChib2R5TmV3VGhlbWVDbGFzcyk7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShsb2NhbFN0b3JhZ2VUaGVtZUtleSwgSlNPTi5zdHJpbmdpZnkodHJ1ZSkpO1xuICAgIH1cbiAgfTtcblxuICBjaGFuZ2VDb2xvclRoZW1lQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlQW5kTWVtb1RoZW1lKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGluaXRUb2dnbGVDb2xvclRoZW1lO1xuIl0sIm5hbWVzIjpbIkFTU0lHTl9CWV9EQVRFIiwiYmFja2xvZ0NhcmRTZWxlY3RvcnMiLCJwYXJlbnRTZWxlY3RvciIsInRlbXBsYXRlU2VsZWN0b3IiLCJlbGVtZW50U2VsZWN0b3IiLCJ0aXRsZVNlbGVjdG9yIiwiZGVzY3JpcHRpb25TZWxlY3RvciIsInN0YXJ0RGF0ZVNlbGVjdG9yIiwiZW5kRGF0ZVNlbGVjdG9yIiwiZHJhZ1N0YXJ0Q2xhc3MiLCJ1c2Vyc0NhcmRTZWxlY3RvcnMiLCJ1c2VyTmFtZVNlbGVjdG9yIiwiZHJhZ092ZXJDbGFzcyIsImNhbGVuZGFyRGF0ZVNlbGVjdG9ycyIsImN1cnJlbnREYXlDbGFzcyIsImNhbGVuZGFyQ29sdW1uU2VsZWN0b3JzIiwiY2FsZW5kYXJDZWxsU2VsZWN0b3JzIiwiZWxlbWVudENsYXNzIiwiY2FsZW5kYXJUYXNrU2VsZWN0b3JzIiwic3VidGl0bGVTZWxlY3RvciIsImRhdGVTZXR0aW5ncyIsIndlZWtkYXkiLCJ5ZWFyIiwibW9udGgiLCJkYXkiLCJsb2NhbFN0b3JhZ2VUaGVtZUtleSIsInJlZmluZVRvU3RyaW5nIiwiZGF0ZSIsIkRhdGUiLCJ0b0xvY2FsZURhdGVTdHJpbmciLCJyZWZpbmVUb051bWVyaWNZWU1NREQiLCJjb25zdHJ1Y3RvciIsInRoaXMiLCJfc3Vic2NyaWJlcnMiLCJfYXNzaWduZWRUYXNrcyIsIl9iYWNrbG9nVGFza3MiLCJfdXNlcnMiLCJfdXNlcnNJZHMiLCJfY2FsZW5kYXJMZW5ndGgiLCJfY3VycmVudERhdGUiLCJfY3VycmVudERhdGVOdW1lcmljIiwiX3N0YXJ0RGF5IiwiX3VwZGF0ZUFuZFNldERhdGVzIiwiX3JlbW92ZVRhc2tGcm9tQmFja2xvZyIsInRhc2tJZCIsImZpbHRlciIsInRhc2siLCJpZCIsIl9jYWxsU3Vic2NyaWJlcnMiLCJmb3JFYWNoIiwibGlzdGVuZXIiLCJzdGFydERhdGUiLCJzZXRIb3VycyIsInNldERhdGUiLCJnZXREYXRlIiwiZ2V0RGF5IiwiYXNzaWduZWRUYXNrcyIsImJhY2tsb2dUYXNrcyIsInVzZXJzSWRzIiwidXNlcnMiLCJ2YWx1ZSIsImNhbGVuZGFyTGVuZ3RoIiwic3RhcnREYXkiLCJjdXJyZW50RGF0ZU51bWVyaWMiLCJhZGRUYXNrVG9Bc3NpZ25lZFRhc2tzIiwicHVzaCIsImFzc2lnblRhc2siLCJ0eXBlIiwiZXhlY3V0b3JJZCIsInRhc2tUb0JlQXNzaWduZWQiLCJmaW5kIiwiZXhlY3V0b3IiLCJwYXJzZSIsInBsYW5FbmREYXRlIiwicGxhblN0YXJ0RGF0ZSIsImRhdGVEaWZmZXJlbmNlIiwibmV3RW5kRGF0ZSIsImFkZFRhc2tUb0JhY2tsb2ciLCJtYXBVc2Vyc0lkcyIsImlkcyIsInJlZHVjZSIsIm9iaiIsImkiLCJhZGRTdWJzY3JpYmVycyIsInN1YnNjcmliZXJzIiwiYXN5bmMiLCJyb3V0ZSIsInJlcyIsImZldGNoIiwibWV0aG9kIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsIl90ZW1wbGF0ZVNlbGVjdG9yIiwiX2VsZW1lbnRTZWxlY3RvciIsIl9nZXRUZW1wbGF0ZSIsIl90ZW1wbGF0ZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJjYXJkRGF0YSIsInN1cGVyIiwiX2NhcmREYXRhIiwiX2JhY2tsb2dDYXJkIiwiX2RyYWdTdGFydENsYXNzIiwiX2NhcmRUaXRsZSIsIl9jYXJkRGVzY3JpcHRpb24iLCJfY2FyZFN0YXJ0RGF0ZSIsIl9jYXJkRW5kRGF0ZSIsIl9oYW5kbGVEcmFnU3RhcnQiLCJiaW5kIiwiX2hhbmRsZURyYWdFbmQiLCJldnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJkYXRhVHJhbnNmZXIiLCJzZXREYXRhIiwiZWZmZWN0QWxsb3dlZCIsInJlbW92ZSIsImNyZWF0ZUVsZW1lbnQiLCJ0ZXh0Q29udGVudCIsInN1YmplY3QiLCJkZXNjcmlwdGlvbiIsInNldEF0dHJpYnV0ZSIsInNldEV2ZW50TGlzdGVuZXJzIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNvbnRhaW5lclNlbGVjdG9yIiwiX2NvbnRhaW5lciIsImNsZWFySXRlbXMiLCJhZGRJdGVtIiwiaXRlbSIsImFwcGVuZCIsImFkZFRleHRDb250ZW50IiwiX3Rhc2siLCJfdGFza0VsZW1lbnQiLCJfdGl0bGVFTGVtZW50IiwiX3N1YnRpdGxlRUxlbWVudCIsIl9kZXNjcmlwdGlvbkVsZW1lbnQiLCJfc3RhcnREYXRlRWxlbWVudCIsIl9lbmREYXRlRWxlbWVudCIsImNlbGwiLCJfY2VsbCIsIl9jZWxsRWxlbWVudCIsIl9hZGRJdGVtIiwicmVuZGVySXRlbXMiLCJ0YXNrcyIsIm5ld1Rhc2siLCJjb2x1bW4iLCJfY29sdW1uIiwiX2NhbGVuZGFyQ29sdW1uIiwiX2RheVRhc2tzU2NoZW1hIiwiX2dldFRhc2tzRm9yQ3VycmVudERheSIsInBhcnNlZENvbHVtbkRhdGUiLCJfZ2V0RGF5VGFza3NTY2hlbWEiLCJfdGFza3NGb3JDdXJyZW50RGF5IiwiY3JlYXRlQ2VsbHMiLCJ1c2VySWQiLCJjb2x1bW5DZWxsIiwiY2VsbEVsZW1lbnQiLCJfZGF0ZSIsIl9jdXJyZW50RGF5Q2xhc3MiLCJfZGF0ZUVsZW1lbnQiLCJjZWxsRGF0ZSIsIl91c2VyQ2FyZCIsIl9mdWxsTmFtZUVsZW1lbnQiLCJfZHJhZ092ZXJDbGFzcyIsIl9oYW5kbGVEcmFnT3ZlciIsIl9oYW5kbGVEcmFnTGVhdmUiLCJfaGFuZGxlRHJvcCIsInR5cGVzIiwicHJldmVudERlZmF1bHQiLCJnZXREYXRhIiwiY3JlYXRlQ2FyZCIsImZpcnN0TmFtZSIsInN1cm5hbWUiLCJyZW1vdmVBbmltYXRpb24iLCJlbGVtZW50Iiwic2V0VGltZW91dCIsInJlbW92ZUF0dHJpYnV0ZSIsImFwcGx5U2xpZGVJbkJvdHRvbVVwQW5pbSIsImluZGV4IiwiYXBwbHlTbGlkZUluUmlnaHRMZWZ0QW5pbSIsInBhZ2UiLCJwcmVsb2FkZXIiLCJwb3B1cEVycm9yIiwic2VsZWN0b3JzIiwiX3NlbGVjdG9ycyIsIl9wb3B1cCIsIm9wZW4iLCJwb3B1cE9wZW5DbGFzcyIsIl9jbG9zZSIsImJhY2tsb2dMaXN0IiwidXNlcnNMaXN0IiwiZGF0ZXNDb250YWluZXIiLCJjYWxlbmRhckNvbnRhaW5lciIsInRhcmdldCIsImNvbnRhaW5zIiwiX2Ryb3BwYWJsZUNlbGwiLCJjbG9zZXN0IiwiZGF0YXNldCIsInJlbmRlckNhbGVuZGFyIiwiaXNBbmltYXRlZCIsInRoaXNEYXRlIiwiZGF0ZVN0cmluZyIsImRhdGVPYmplY3QiLCJjb2x1bW5PYmplY3QiLCJkYXRlRWxlbWVudCIsImNvbHVtbkVsZW1lbnQiLCJjcmVhdGVCYWNrbG9nQ2FyZCIsImJhY2tsb2dDYXJkIiwibmV3QmFja2xvZ0NhcmQiLCJyZW5kZXJCYWNrbG9nVGFza3MiLCJhbGwiLCJ0aGVuIiwidXNlciIsInVzZXJDYXJkIiwibmV3VXNlckNhcmQiLCJyZW5kZXJVc2VycyIsImNhdGNoIiwiZmluYWxseSIsImNvbnRhaW5lciIsImNyZWF0ZUNhcmRDYWxsYmFjayIsInJlbmRlckNhbGxiYWNrIiwic2VhcmNoRm9ybSIsInNlYXJjaElucHV0Iiwic3VibWl0QnV0dG9uIiwia2V5d29yZCIsInJlc3VsdCIsImxlbmd0aCIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJkaXNhYmxlZCIsImNsZWFyQ29udGFpbmVyQ2FsbGJhY2siLCJjbGVhckRhdGVzQ2FsbGJhY2siLCJuZXh0V2Vla0J1dHRvbiIsInByZXZXZWVrQnV0dG9uIiwiZnVsbERheUluTWlsbGlzZWNvbmRzIiwiYm9keVNlbGVjdG9yIiwiYm9keU5ld1RoZW1lQ2xhc3MiLCJidXR0b25TZWxlY3RvciIsImJvZHkiLCJjaGFuZ2VDb2xvclRoZW1lQnV0dG9uIiwiSlNPTiIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwiYnV0dG9uTmV3VGhlbWVDbGFzcyJdLCJzb3VyY2VSb290IjoiIn0=