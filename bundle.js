(()=>{"use strict";const e="assignByDate",t={parentSelector:".backlog__tasks-container",templateSelector:".template-card-backlog",elementSelector:".card-backlog",titleSelector:".card-backlog__title",descriptionSelector:".card-backlog__description",startDateSelector:".card-backlog__date-span_start",endDateSelector:".card-backlog__date-span_end",dragStartClass:"card-backlog_draggable"},a={parentSelector:".board__users",templateSelector:".template-card-user",elementSelector:".card-user",userNameSelector:".card-user__name",dragOverClass:"card-user_drag-over"},s={parentSelector:".board__dates",templateSelector:".template-calendar-date",elementSelector:".calendar-date",currentDayClass:"calendar-date_current"},r={parentSelector:".board__calendar",templateSelector:".template-calendar-column",elementSelector:".calendar-column"},l={templateSelector:".template-calendar-cell",elementSelector:".calendar-cell",elementClass:"calendar-cell",dragOverClass:"calendar-cell_drag-over"},n={templateSelector:".template-calendar-task",elementSelector:".calendar-task",elementClass:"calendar-task",titleSelector:".calendar-task__title",subtitleSelector:".calendar-task__subtitle",descriptionSelector:".calendar-task__description",startDateSelector:".calendar-task__date-span_start",endDateSelector:".calendar-task__date-span_end"},c="ru-RU",i={weekday:"short",year:"numeric",month:"short",day:"numeric"},d={day:"numeric",month:"numeric"},o="isThemeDark",h=e=>new Date(e).toLocaleDateString(c,i),_=e=>new Date(e).toLocaleDateString("en-CA"),u=new class{constructor(){this._subscribers=[],this._assignedTasks=[],this._backlogTasks=[],this._users=[],this._usersIds={},this._calendarLength=7,this._currentDate=new Date,this._currentDateNumeric=_(new Date),this._startDay=this._updateAndSetDates()}_removeTaskFromBacklog(e){this._backlogTasks=this._backlogTasks.filter((t=>t.id!==e))}_callSubscribers(){this._subscribers.forEach((e=>e()))}_updateAndSetDates(){const e=new Date(this._currentDate.setHours(0,0,0,0));return e.setDate(e.getDate()-e.getDay()+(0===e.getDay()?-6:1))}get assignedTasks(){return this._assignedTasks}get backlogTasks(){return this._backlogTasks}get usersIds(){return this._usersIds}set users(e){this._users=e}get users(){return this._users}get calendarLength(){return this._calendarLength}get startDay(){return this._startDay}set startDay(e){this._startDay=e}get currentDateNumeric(){return this._currentDateNumeric}addTaskToAssignedTasks(e){this._assignedTasks.push(e)}assignTask({type:t,taskId:a,executorId:s,startDate:r}){const l=this._backlogTasks.find((e=>a===e.id));if(l.executor=+s,t===e){if(this._currentDate>Date.parse(r))return;if(l.planEndDate===l.planStartDate)l.planEndDate=r;else{const e=Date.parse(l.planEndDate)-Date.parse(l.planStartDate),t=Date.parse(r)+e;l.planEndDate=_(t)}l.planStartDate=r}this.addTaskToAssignedTasks(l),this._removeTaskFromBacklog(a),this._callSubscribers()}addTaskToBacklog(e){this._backlogTasks.push(e)}mapUsersIds(e){const t=e.reduce(((e,{id:t},a)=>({...e,[a]:t})),{});this._usersIds={...t}}addSubscribers(e){this._subscribers=[...e]}},m=async e=>{return(t=await fetch(`https://varankin_dev.elma365.ru/api/extensions/2a38760e-083a-4dd0-aebc-78b570bfd3c7/script${e}`,{method:"GET"})).ok?t.json():Promise.reject(t);var t},p=class{constructor({templateSelector:e,elementSelector:t}){this._templateSelector=e,this._elementSelector=t}_getTemplate(){return this._template=document.querySelector(this._templateSelector).content,this._template.querySelector(this._elementSelector).cloneNode(!0)}},S=class extends p{constructor(e,{templateSelector:t,elementSelector:a,titleSelector:s,descriptionSelector:r,startDateSelector:l,endDateSelector:n,dragStartClass:c}){super({templateSelector:t,elementSelector:a}),this._cardData=e,this._backlogCard=super._getTemplate(),this._dragStartClass=c,this._cardTitle=this._backlogCard.querySelector(s),this._cardDescription=this._backlogCard.querySelector(r),this._cardStartDate=this._backlogCard.querySelector(l),this._cardEndDate=this._backlogCard.querySelector(n),this._handleDragStart=this._handleDragStart.bind(this),this._handleDragEnd=this._handleDragEnd.bind(this)}_handleDragStart(e){this._backlogCard.classList.add(this._dragStartClass),e.dataTransfer.setData("text/plain",this._cardData.id),e.dataTransfer.effectAllowed="move"}_handleDragEnd(){this._backlogCard.classList.remove(this._dragStartClass)}createElement(){return this._cardTitle.textContent=this._cardData.subject,this._cardDescription.textContent=this._cardData.description,this._cardStartDate.textContent=h(this._cardData.planStartDate),this._cardEndDate.textContent=h(this._cardData.planEndDate),this._backlogCard.setAttribute("id",this._cardData.id),this._backlogCard}setEventListeners(){this._backlogCard.addEventListener("dragstart",this._handleDragStart),this._backlogCard.addEventListener("dragend",this._handleDragEnd)}},g=class{constructor(e){this._container=document.querySelector(e),this.clearItems=this.clearItems.bind(this)}addItem(e){this._container.append(e)}clearItems(){this._container.textContent=""}addTextContent(e){this._container.textContent=e}},D=class extends p{constructor(e,{templateSelector:t,elementSelector:a,titleSelector:s,subtitleSelector:r,descriptionSelector:l,startDateSelector:n,endDateSelector:c}){super({templateSelector:t,elementSelector:a}),this._task=e,this._taskElement=super._getTemplate(),this._titleELement=this._taskElement.querySelector(s),this._subtitleELement=this._taskElement.querySelector(r),this._descriptionElement=this._taskElement.querySelector(l),this._startDateElement=this._taskElement.querySelector(n),this._endDateElement=this._taskElement.querySelector(c)}createElement(){return this._titleELement.textContent=this._task.subject,this._subtitleELement.textContent=this._task.subject,this._descriptionElement.textContent=this._task.description,this._startDateElement.textContent=h(this._task.planStartDate),this._endDateElement.textContent=h(this._task.planEndDate),this._taskElement}},k=class extends p{constructor(e,{templateSelector:t,elementSelector:a}){super({templateSelector:t,elementSelector:a}),this._cell=e,this._cellElement=super._getTemplate()}_addItem(e){this._cellElement.append(e)}createElement(){return this._cellElement.setAttribute("data-executor",this._cell.executor),this._cellElement.setAttribute("data-date",this._cell.date),this._cellElement}renderItems(){this._cell.tasks.forEach((e=>{const t=new D(e,n);this._addItem(t.createElement())}))}},b=class extends p{constructor(e,{templateSelector:t,elementSelector:a}){super({templateSelector:t,elementSelector:a}),this._column=e,this._calendarColumn=super._getTemplate(),this._dayTasksSchema={}}_getTasksForCurrentDay(e){const t=Date.parse(this._column.date);return e.filter((e=>Date.parse(e.planStartDate)<=t&&t<=Date.parse(e.planEndDate)))}_getDayTasksSchema(){this._tasksForCurrentDay=this._getTasksForCurrentDay(u.assignedTasks),this._tasksForCurrentDay&&this._tasksForCurrentDay.forEach((e=>{this._dayTasksSchema[e.executor]?this._dayTasksSchema[e.executor]=[...this._dayTasksSchema[e.executor],e]:this._dayTasksSchema[e.executor]=[e]}))}createCells(){this._getDayTasksSchema();for(let e=0;e<u.users.length;e+=1){const t=u.usersIds[e],a=new k({executor:t,date:this._column.date,tasks:this._dayTasksSchema[t]??[]},l),s=a.createElement();a.renderItems(),this.addItem(s)}}createElement(){return this.createCells(),this._calendarColumn}addItem(e){this._calendarColumn.append(e)}},C=class extends p{constructor({date:e},{templateSelector:t,elementSelector:a,currentDayClass:s}){super({templateSelector:t,elementSelector:a}),this._date=e,this._currentDayClass=s,this._dateElement=super._getTemplate()}createElement(){const e=new Date(this._date);return this._dateElement.textContent=new Date(e).toLocaleDateString(c,d),this._date===u.currentDateNumeric&&this._dateElement.classList.add(this._currentDayClass),this._dateElement}},E=class extends p{constructor(e,{templateSelector:t,elementSelector:a,userNameSelector:s,dragOverClass:r}){super({templateSelector:t,elementSelector:a}),this._cardData=e,this._userCard=super._getTemplate(),this._fullNameElement=this._userCard.querySelector(s),this._dragOverClass=r,this._handleDragOver=this._handleDragOver.bind(this),this._handleDragLeave=this._handleDragLeave.bind(this),this._handleDrop=this._handleDrop.bind(this)}_handleDragOver(e){e.dataTransfer&&"text/plain"===e.dataTransfer.types[0]&&(e.preventDefault(),this._userCard.classList.add(this._dragOverClass))}_handleDragLeave(){this._userCard.classList.remove(this._dragOverClass)}_handleDrop(e){e.preventDefault();const t=e.dataTransfer.getData("text/plain");u.assignTask({type:"assignByUser",taskId:t,executorId:this._cardData.id}),this._handleDragLeave()}createCard(){return this._fullNameElement.textContent=`${this._cardData.firstName} ${this._cardData.surname}`,this._userCard}setEventListeners(){this._userCard.addEventListener("dragover",this._handleDragOver),this._userCard.addEventListener("dragleave",this._handleDragLeave),this._userCard.addEventListener("drop",this._handleDrop)}},y=e=>{setTimeout((()=>{e.removeAttribute("style")}),1100)},v=(e,t)=>{e.setAttribute("style",`animation: slide-in-bottom-up 0.5s ease-out 0.${t}s forwards; opacity: 0;`),y(e)},T=(e,t)=>{e.setAttribute("style",`animation: slide-in-right-left 0.5s ease-out 0.${t}s forwards; opacity: 0;`),y(e)},L=document.querySelector(".page"),f=document.querySelector(".preloader"),x=new class{constructor(e){this._selectors=e,this._popup=document.querySelector(e.popupError)}open(){this._popup.classList.add(this._selectors.popupOpenClass),this._close()}_close(){setTimeout((()=>{this._popup.classList.remove(this._selectors.popupOpenClass)}),3e3)}}({popupError:".popup_error",popupOpenClass:"popup_open"}),I=new g(t.parentSelector),w=new g(a.parentSelector),q=new g(s.parentSelector),O=new class extends g{constructor(e){super(e),this._handleDragOver=this._handleDragOver.bind(this),this._handleDragLeave=this._handleDragLeave.bind(this),this._handleDrop=this._handleDrop.bind(this)}_handleDragOver(e){const{target:t}=e;e.dataTransfer&&"text/plain"===e.dataTransfer.types[0]&&(t.classList.contains(l.elementClass)||t.classList.contains(n.elementClass))&&(e.preventDefault(),this._droppableCell=t.closest(l.elementSelector),this._droppableCell.classList.add(l.dragOverClass))}_handleDragLeave(){this._droppableCell.classList.remove(l.dragOverClass)}_handleDrop(t){t.preventDefault();const a=t.dataTransfer.getData("text/plain");u.assignTask({type:e,taskId:a,executorId:this._droppableCell.dataset.executor,startDate:this._droppableCell.dataset.date}),this._handleDragLeave()}setEventListeners(){this._container.addEventListener("dragover",this._handleDragOver),this._container.addEventListener("dragleave",this._handleDragLeave),this._container.addEventListener("drop",this._handleDrop)}}(r.parentSelector);O.setEventListeners();const N=e=>{for(let t=0;t<u.calendarLength;t+=1){const a=u.startDay+864e5*t,l=_(a),n=new C({date:l},s),c=new b({date:l},r),i=n.createElement(),d=c.createElement();e&&(T(i,t),T(d,t)),q.addItem(i),O.addItem(d)}},A=e=>{const a=new S(e,t),s=a.createElement();return a.setEventListeners(),s},F=e=>{u.backlogTasks.forEach(((t,a)=>{const s=A(t);e&&a<=12&&v(s,a),I.addItem(s)}))};(async()=>{try{const e=await m("/users");(await m("/tasks")).forEach((e=>{e.executor?u.addTaskToAssignedTasks(e):u.addTaskToBacklog(e)})),u.users=e,u.mapUsersIds(e),((e,t)=>{e.forEach(((e,t)=>{const s=new E(e,a),r=s.createCard();t<=8&&v(r,t),s.setEventListeners(),w.addItem(r)}))})(e),N(!0),F(!0)}catch(e){x.open()}L.classList.remove("page_hidden"),f.classList.remove("preloader_visible")})(),((e,t,a)=>{const s=document.querySelector(".search-form"),r=s.querySelector(".search-form__input"),l=s.querySelector(".button_search");s.addEventListener("submit",(s=>{s.preventDefault();const n=r.value;let c;n.length&&(c=u.backlogTasks.filter((e=>e.subject.toLowerCase().includes(n.toLowerCase()))),e.clearItems(),c.length?c.forEach((a=>{const s=t(a);e.addItem(s)})):(e.addTextContent("Ничего не нашлось"),l.disabled=!0,setTimeout((()=>{e.clearItems(),a(),l.disabled=!1}),3e3)))}))})(I,A,F),((e,t,a)=>{const s=document.querySelector(".button_next"),r=document.querySelector(".button_prev");s.addEventListener("click",(()=>{e(),t(),u.startDay+=6048e5,a()})),r.addEventListener("click",(()=>{e(),t(),u.startDay-=6048e5,a()}))})(O.clearItems,q.clearItems,N),(({bodySelector:e,bodyNewThemeClass:t,buttonSelector:a})=>{const s=document.querySelector(e),r=document.querySelector(a);JSON.parse(localStorage.getItem(o))&&s.classList.add(t),r.addEventListener("click",(()=>{s.classList.contains(t)?(s.classList.remove(t),localStorage.setItem(o,JSON.stringify(!1))):(s.classList.add(t),localStorage.setItem(o,JSON.stringify(!0)))}))})({bodySelector:".body",bodyNewThemeClass:"body_theme_dark",buttonSelector:".button_theme",buttonNewThemeClass:"button_theme_dark"}),u.addSubscribers([O.clearItems,I.clearItems,q.clearItems,N,F])})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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a0JBQ25CQyxlQUFnQixnQkFDaEJRLG9CQUFxQixzQmFvSHZCLGlCQUE0QixDQUMxQm5ELEVBQWtCbEUsV0FDbEIrRCxFQUFZL0QsV0FDWmlFLEVBQWVqRSxXQUNmd0UsRUFDQVcsSyIsInNvdXJjZXMiOlsid2VicGFjazovL3Rlc3QtZWxtYS8uL3NyYy9zdGF0ZS90eXBlcy5qcyIsIndlYnBhY2s6Ly90ZXN0LWVsbWEvLi9zcmMvY29uZmlnL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly90ZXN0LWVsbWEvLi9zcmMvdXRpbHMvaGFuZGxlLWRhdGVzLmpzIiwid2VicGFjazovL3Rlc3QtZWxtYS8uL3NyYy9zdGF0ZS9Qcm9qZWN0U3RhdGUuanMiLCJ3ZWJwYWNrOi8vdGVzdC1lbG1hLy4vc3JjL2FwaS9tYWluLWFwaS5qcyIsIndlYnBhY2s6Ly90ZXN0LWVsbWEvLi9zcmMvY29tcG9uZW50cy9Db21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vdGVzdC1lbG1hLy4vc3JjL2NvbXBvbmVudHMvQmFja2xvZ0NhcmQuanMiLCJ3ZWJwYWNrOi8vdGVzdC1lbG1hLy4vc3JjL2NvbXBvbmVudHMvUmVuZGVyZXJTZWN0aW9uLmpzIiwid2VicGFjazovL3Rlc3QtZWxtYS8uL3NyYy9jb21wb25lbnRzL0NhbGVuZGFyVGFzay5qcyIsIndlYnBhY2s6Ly90ZXN0LWVsbWEvLi9zcmMvY29tcG9uZW50cy9DYWxlbmRhckNlbGwuanMiLCJ3ZWJwYWNrOi8vdGVzdC1lbG1hLy4vc3JjL2NvbXBvbmVudHMvQ2FsZW5kYXJDb2x1bW4uanMiLCJ3ZWJwYWNrOi8vdGVzdC1lbG1hLy4vc3JjL2NvbXBvbmVudHMvQ2FsZW5kYXJEYXRlLmpzIiwid2VicGFjazovL3Rlc3QtZWxtYS8uL3NyYy9jb21wb25lbnRzL1VzZXJDYXJkLmpzIiwid2VicGFjazovL3Rlc3QtZWxtYS8uL3NyYy91dGlscy9hcHBseS1zdHlsZS1hbmltYXRpb24uanMiLCJ3ZWJwYWNrOi8vdGVzdC1lbG1hLy4vc3JjL2FwcC5qcyIsIndlYnBhY2s6Ly90ZXN0LWVsbWEvLi9zcmMvY29tcG9uZW50cy9Qb3B1cEVycm9yLmpzIiwid2VicGFjazovL3Rlc3QtZWxtYS8uL3NyYy9jb21wb25lbnRzL0NhbGVuZGFyLmpzIiwid2VicGFjazovL3Rlc3QtZWxtYS8uL3NyYy9jb25maWcvY29uZmlnLmpzIiwid2VicGFjazovL3Rlc3QtZWxtYS8uL3NyYy91dGlscy9zZWFyY2guanMiLCJ3ZWJwYWNrOi8vdGVzdC1lbG1hLy4vc3JjL3V0aWxzL3N3aXRjaC1iZXR3ZWVuLXdlZWtzLmpzIiwid2VicGFjazovL3Rlc3QtZWxtYS8uL3NyYy91dGlscy90b2dnbGUtY29sb3ItdGhlbWUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IEFTU0lHTl9CWV9VU0VSID0gJ2Fzc2lnbkJ5VXNlcic7XG5leHBvcnQgY29uc3QgQVNTSUdOX0JZX0RBVEUgPSAnYXNzaWduQnlEYXRlJztcbiIsImV4cG9ydCBjb25zdCB0b2dnbGVUaGVtZVNldHRpbmdzID0ge1xuICBib2R5U2VsZWN0b3I6ICcuYm9keScsXG4gIGJvZHlOZXdUaGVtZUNsYXNzOiAnYm9keV90aGVtZV9kYXJrJyxcbiAgYnV0dG9uU2VsZWN0b3I6ICcuYnV0dG9uX3RoZW1lJyxcbiAgYnV0dG9uTmV3VGhlbWVDbGFzczogJ2J1dHRvbl90aGVtZV9kYXJrJyxcbn07XG5cbmV4cG9ydCBjb25zdCBiYWNrbG9nQ2FyZFNlbGVjdG9ycyA9IHtcbiAgcGFyZW50U2VsZWN0b3I6ICcuYmFja2xvZ19fdGFza3MtY29udGFpbmVyJyxcbiAgdGVtcGxhdGVTZWxlY3RvcjogJy50ZW1wbGF0ZS1jYXJkLWJhY2tsb2cnLFxuICBlbGVtZW50U2VsZWN0b3I6ICcuY2FyZC1iYWNrbG9nJyxcbiAgdGl0bGVTZWxlY3RvcjogJy5jYXJkLWJhY2tsb2dfX3RpdGxlJyxcbiAgZGVzY3JpcHRpb25TZWxlY3RvcjogJy5jYXJkLWJhY2tsb2dfX2Rlc2NyaXB0aW9uJyxcbiAgc3RhcnREYXRlU2VsZWN0b3I6ICcuY2FyZC1iYWNrbG9nX19kYXRlLXNwYW5fc3RhcnQnLFxuICBlbmREYXRlU2VsZWN0b3I6ICcuY2FyZC1iYWNrbG9nX19kYXRlLXNwYW5fZW5kJyxcbiAgZHJhZ1N0YXJ0Q2xhc3M6ICdjYXJkLWJhY2tsb2dfZHJhZ2dhYmxlJyxcbn07XG5cbmV4cG9ydCBjb25zdCB1c2Vyc0NhcmRTZWxlY3RvcnMgPSB7XG4gIHBhcmVudFNlbGVjdG9yOiAnLmJvYXJkX191c2VycycsXG4gIHRlbXBsYXRlU2VsZWN0b3I6ICcudGVtcGxhdGUtY2FyZC11c2VyJyxcbiAgZWxlbWVudFNlbGVjdG9yOiAnLmNhcmQtdXNlcicsXG4gIHVzZXJOYW1lU2VsZWN0b3I6ICcuY2FyZC11c2VyX19uYW1lJyxcbiAgZHJhZ092ZXJDbGFzczogJ2NhcmQtdXNlcl9kcmFnLW92ZXInLFxufTtcblxuZXhwb3J0IGNvbnN0IGNhbGVuZGFyRGF0ZVNlbGVjdG9ycyA9IHtcbiAgcGFyZW50U2VsZWN0b3I6ICcuYm9hcmRfX2RhdGVzJyxcbiAgdGVtcGxhdGVTZWxlY3RvcjogJy50ZW1wbGF0ZS1jYWxlbmRhci1kYXRlJyxcbiAgZWxlbWVudFNlbGVjdG9yOiAnLmNhbGVuZGFyLWRhdGUnLFxuICBjdXJyZW50RGF5Q2xhc3M6ICdjYWxlbmRhci1kYXRlX2N1cnJlbnQnLFxufTtcblxuZXhwb3J0IGNvbnN0IGNhbGVuZGFyQ29sdW1uU2VsZWN0b3JzID0ge1xuICBwYXJlbnRTZWxlY3RvcjogJy5ib2FyZF9fY2FsZW5kYXInLFxuICB0ZW1wbGF0ZVNlbGVjdG9yOiAnLnRlbXBsYXRlLWNhbGVuZGFyLWNvbHVtbicsXG4gIGVsZW1lbnRTZWxlY3RvcjogJy5jYWxlbmRhci1jb2x1bW4nLFxufTtcblxuZXhwb3J0IGNvbnN0IGNhbGVuZGFyQ2VsbFNlbGVjdG9ycyA9IHtcbiAgdGVtcGxhdGVTZWxlY3RvcjogJy50ZW1wbGF0ZS1jYWxlbmRhci1jZWxsJyxcbiAgZWxlbWVudFNlbGVjdG9yOiAnLmNhbGVuZGFyLWNlbGwnLFxuICBlbGVtZW50Q2xhc3M6ICdjYWxlbmRhci1jZWxsJyxcbiAgZHJhZ092ZXJDbGFzczogJ2NhbGVuZGFyLWNlbGxfZHJhZy1vdmVyJyxcbn07XG5cbmV4cG9ydCBjb25zdCBjYWxlbmRhclRhc2tTZWxlY3RvcnMgPSB7XG4gIHRlbXBsYXRlU2VsZWN0b3I6ICcudGVtcGxhdGUtY2FsZW5kYXItdGFzaycsXG4gIGVsZW1lbnRTZWxlY3RvcjogJy5jYWxlbmRhci10YXNrJyxcbiAgZWxlbWVudENsYXNzOiAnY2FsZW5kYXItdGFzaycsXG4gIHRpdGxlU2VsZWN0b3I6ICcuY2FsZW5kYXItdGFza19fdGl0bGUnLFxuICBzdWJ0aXRsZVNlbGVjdG9yOiAnLmNhbGVuZGFyLXRhc2tfX3N1YnRpdGxlJyxcbiAgZGVzY3JpcHRpb25TZWxlY3RvcjogJy5jYWxlbmRhci10YXNrX19kZXNjcmlwdGlvbicsXG4gIHN0YXJ0RGF0ZVNlbGVjdG9yOiAnLmNhbGVuZGFyLXRhc2tfX2RhdGUtc3Bhbl9zdGFydCcsXG4gIGVuZERhdGVTZWxlY3RvcjogJy5jYWxlbmRhci10YXNrX19kYXRlLXNwYW5fZW5kJyxcbn07XG5cbmV4cG9ydCBjb25zdCB3ZWVrQnV0dG9uc1NlbGVjdG9ycyA9IHtcbiAgbmV4dFdlZWtCdXR0b246ICcuYnV0dG9uX25leHQnLFxuICBwcmV2V2Vla0J1dHRvbjogJy5idXR0b25fcHJldicsXG59O1xuXG5leHBvcnQgY29uc3QgcG9wdXBTZWxlY3RvcnMgPSB7XG4gIHBvcHVwRXJyb3I6ICcucG9wdXBfZXJyb3InLFxuICBwb3B1cE9wZW5DbGFzczogJ3BvcHVwX29wZW4nLFxufTtcblxuZXhwb3J0IGNvbnN0IHNlYXJjaEZvcm1TZWxlY3RvcnMgPSB7XG4gIHNlYXJjaEZvcm06ICcuc2VhcmNoLWZvcm0nLFxuICBzZWFyY2hJbnB1dDogJy5zZWFyY2gtZm9ybV9faW5wdXQnLFxuICBzdWJtaXRCdXR0b246ICcuYnV0dG9uX3NlYXJjaCcsXG59O1xuXG5leHBvcnQgY29uc3QgcHJlbG9hZGVyU3RhdGVTZWxlY3RvcnMgPSB7XG4gIHBhZ2VTZWxlY3RvcjogJy5wYWdlJyxcbiAgcGFnZUhpZGRlbkNsYXNzOiAncGFnZV9oaWRkZW4nLFxuICBwcmVsb2FkZXJTZWxlY3RvcjogJy5wcmVsb2FkZXInLFxuICBwcmVsb2FkZXJWaXNpYmxlQ2xhc3M6ICdwcmVsb2FkZXJfdmlzaWJsZScsXG59O1xuXG5leHBvcnQgY29uc3QgZGF0ZVNldHRpbmdzID0ge1xuICBsb2NhbGU6ICdydS1SVScsXG4gIG9wdGlvbnM6IHtcbiAgICB3ZWVrZGF5OiAnc2hvcnQnLFxuICAgIHllYXI6ICdudW1lcmljJyxcbiAgICBtb250aDogJ3Nob3J0JyxcbiAgICBkYXk6ICdudW1lcmljJyxcbiAgfSxcbiAgbnVtZXJpYzoge1xuICAgIGRheTogJ251bWVyaWMnLFxuICAgIG1vbnRoOiAnbnVtZXJpYycsXG4gIH0sXG59O1xuXG5leHBvcnQgY29uc3QgbWF4SW5kZXhGb3JBbmltYXRpb24gPSB7XG4gIHVzZXJzOiA4LFxuICBiYWNrbG9nQ2FyZHM6IDEyLFxufTtcblxuZXhwb3J0IGNvbnN0IGZ1bGxEYXlJbk1pbGxpc2Vjb25kcyA9IDM2MDAgKiAyNCAqIDEwMDA7XG5leHBvcnQgY29uc3QgdGltZXJEZWxheSA9IDMwMDA7XG5leHBvcnQgY29uc3QgbG9jYWxTdG9yYWdlVGhlbWVLZXkgPSAnaXNUaGVtZURhcmsnO1xuIiwiaW1wb3J0IHsgZGF0ZVNldHRpbmdzIH0gZnJvbSAnLi4vY29uZmlnL2NvbnN0YW50cyc7XG5cbmNvbnN0IHJlZmluZVRvU3RyaW5nID0gKGRhdGUpID0+XG4gIG5ldyBEYXRlKGRhdGUpLnRvTG9jYWxlRGF0ZVN0cmluZyhkYXRlU2V0dGluZ3MubG9jYWxlLCBkYXRlU2V0dGluZ3Mub3B0aW9ucyk7XG5cbmNvbnN0IHJlZmluZVRvTnVtZXJpY0RETU0gPSAoZGF0ZSkgPT5cbiAgbmV3IERhdGUoZGF0ZSkudG9Mb2NhbGVEYXRlU3RyaW5nKGRhdGVTZXR0aW5ncy5sb2NhbGUsIGRhdGVTZXR0aW5ncy5udW1lcmljKTtcblxuY29uc3QgcmVmaW5lVG9OdW1lcmljWVlNTUREID0gKGRhdGUpID0+IG5ldyBEYXRlKGRhdGUpLnRvTG9jYWxlRGF0ZVN0cmluZygnZW4tQ0EnKTtcblxuZXhwb3J0IHsgcmVmaW5lVG9TdHJpbmcsIHJlZmluZVRvTnVtZXJpY0RETU0sIHJlZmluZVRvTnVtZXJpY1lZTU1ERCB9O1xuIiwiaW1wb3J0IHsgQVNTSUdOX0JZX0RBVEUgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IHJlZmluZVRvTnVtZXJpY1lZTU1ERCB9IGZyb20gJy4uL3V0aWxzL2hhbmRsZS1kYXRlcyc7XG5cbmNsYXNzIFByb2plY3RTdGF0ZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuX3N1YnNjcmliZXJzID0gW107XG4gICAgdGhpcy5fYXNzaWduZWRUYXNrcyA9IFtdO1xuICAgIHRoaXMuX2JhY2tsb2dUYXNrcyA9IFtdO1xuICAgIHRoaXMuX3VzZXJzID0gW107XG4gICAgdGhpcy5fdXNlcnNJZHMgPSB7fTtcbiAgICB0aGlzLl9jYWxlbmRhckxlbmd0aCA9IDc7XG4gICAgdGhpcy5fY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpO1xuICAgIHRoaXMuX2N1cnJlbnREYXRlTnVtZXJpYyA9IHJlZmluZVRvTnVtZXJpY1lZTU1ERChuZXcgRGF0ZSgpKTtcbiAgICB0aGlzLl9zdGFydERheSA9IHRoaXMuX3VwZGF0ZUFuZFNldERhdGVzKCk7XG4gIH1cblxuICBfcmVtb3ZlVGFza0Zyb21CYWNrbG9nKHRhc2tJZCkge1xuICAgIHRoaXMuX2JhY2tsb2dUYXNrcyA9IHRoaXMuX2JhY2tsb2dUYXNrcy5maWx0ZXIoKHRhc2spID0+IHRhc2suaWQgIT09IHRhc2tJZCk7XG4gIH1cblxuICBfY2FsbFN1YnNjcmliZXJzKCkge1xuICAgIHRoaXMuX3N1YnNjcmliZXJzLmZvckVhY2goKGxpc3RlbmVyKSA9PiBsaXN0ZW5lcigpKTtcbiAgfVxuXG4gIF91cGRhdGVBbmRTZXREYXRlcygpIHtcbiAgICBjb25zdCBzdGFydERhdGUgPSBuZXcgRGF0ZSh0aGlzLl9jdXJyZW50RGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKSk7XG5cbiAgICByZXR1cm4gc3RhcnREYXRlLnNldERhdGUoXG4gICAgICBzdGFydERhdGUuZ2V0RGF0ZSgpIC0gc3RhcnREYXRlLmdldERheSgpICsgKHN0YXJ0RGF0ZS5nZXREYXkoKSA9PT0gMCA/IC02IDogMSlcbiAgICApO1xuICB9XG5cbiAgZ2V0IGFzc2lnbmVkVGFza3MoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2Fzc2lnbmVkVGFza3M7XG4gIH1cblxuICBnZXQgYmFja2xvZ1Rhc2tzKCkge1xuICAgIHJldHVybiB0aGlzLl9iYWNrbG9nVGFza3M7XG4gIH1cblxuICBnZXQgdXNlcnNJZHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3VzZXJzSWRzO1xuICB9XG5cbiAgc2V0IHVzZXJzKHZhbHVlKSB7XG4gICAgdGhpcy5fdXNlcnMgPSB2YWx1ZTtcbiAgfVxuXG4gIGdldCB1c2VycygpIHtcbiAgICByZXR1cm4gdGhpcy5fdXNlcnM7XG4gIH1cblxuICBnZXQgY2FsZW5kYXJMZW5ndGgoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NhbGVuZGFyTGVuZ3RoO1xuICB9XG5cbiAgZ2V0IHN0YXJ0RGF5KCkge1xuICAgIHJldHVybiB0aGlzLl9zdGFydERheTtcbiAgfVxuXG4gIHNldCBzdGFydERheSh2YWx1ZSkge1xuICAgIHRoaXMuX3N0YXJ0RGF5ID0gdmFsdWU7XG4gIH1cblxuICBnZXQgY3VycmVudERhdGVOdW1lcmljKCkge1xuICAgIHJldHVybiB0aGlzLl9jdXJyZW50RGF0ZU51bWVyaWM7XG4gIH1cblxuICBhZGRUYXNrVG9Bc3NpZ25lZFRhc2tzKHRhc2spIHtcbiAgICB0aGlzLl9hc3NpZ25lZFRhc2tzLnB1c2godGFzayk7XG4gIH1cblxuICBhc3NpZ25UYXNrKHsgdHlwZSwgdGFza0lkLCBleGVjdXRvcklkLCBzdGFydERhdGUgfSkge1xuICAgIGNvbnN0IHRhc2tUb0JlQXNzaWduZWQgPSB0aGlzLl9iYWNrbG9nVGFza3MuZmluZCgodGFzaykgPT4gdGFza0lkID09PSB0YXNrLmlkKTtcbiAgICB0YXNrVG9CZUFzc2lnbmVkLmV4ZWN1dG9yID0gK2V4ZWN1dG9ySWQ7XG5cbiAgICAvLyDQt9Cw0L/RgNC+0YEg0LjQtyDQutCw0LvQtdC90LTQsNGA0Y9cbiAgICBpZiAodHlwZSA9PT0gQVNTSUdOX0JZX0RBVEUpIHtcbiAgICAgIGlmICh0aGlzLl9jdXJyZW50RGF0ZSA+IERhdGUucGFyc2Uoc3RhcnREYXRlKSkge1xuICAgICAgICAvLyDQv9C+0L/Ri9GC0LrQsCDQvdCw0LfQvdCw0YfQuNGC0Ywg0LfQsNC00LDQvdC40LUg0L3QsCBcItCy0YfQtdGA0LBcIlxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICh0YXNrVG9CZUFzc2lnbmVkLnBsYW5FbmREYXRlID09PSB0YXNrVG9CZUFzc2lnbmVkLnBsYW5TdGFydERhdGUpIHtcbiAgICAgICAgdGFza1RvQmVBc3NpZ25lZC5wbGFuRW5kRGF0ZSA9IHN0YXJ0RGF0ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGRhdGVEaWZmZXJlbmNlID1cbiAgICAgICAgICBEYXRlLnBhcnNlKHRhc2tUb0JlQXNzaWduZWQucGxhbkVuZERhdGUpIC0gRGF0ZS5wYXJzZSh0YXNrVG9CZUFzc2lnbmVkLnBsYW5TdGFydERhdGUpO1xuICAgICAgICBjb25zdCBuZXdFbmREYXRlID0gRGF0ZS5wYXJzZShzdGFydERhdGUpICsgZGF0ZURpZmZlcmVuY2U7XG4gICAgICAgIHRhc2tUb0JlQXNzaWduZWQucGxhbkVuZERhdGUgPSByZWZpbmVUb051bWVyaWNZWU1NREQobmV3RW5kRGF0ZSk7XG4gICAgICB9XG4gICAgICB0YXNrVG9CZUFzc2lnbmVkLnBsYW5TdGFydERhdGUgPSBzdGFydERhdGU7XG4gICAgfVxuICAgIHRoaXMuYWRkVGFza1RvQXNzaWduZWRUYXNrcyh0YXNrVG9CZUFzc2lnbmVkKTtcbiAgICB0aGlzLl9yZW1vdmVUYXNrRnJvbUJhY2tsb2codGFza0lkKTtcbiAgICB0aGlzLl9jYWxsU3Vic2NyaWJlcnMoKTtcbiAgfVxuXG4gIGFkZFRhc2tUb0JhY2tsb2codGFzaykge1xuICAgIHRoaXMuX2JhY2tsb2dUYXNrcy5wdXNoKHRhc2spO1xuICB9XG5cbiAgbWFwVXNlcnNJZHModXNlcnMpIHtcbiAgICBjb25zdCBpZHMgPSB1c2Vycy5yZWR1Y2UoKG9iaiwgeyBpZCB9LCBpKSA9PiAoeyAuLi5vYmosIFtpXTogaWQgfSksIHt9KTtcbiAgICB0aGlzLl91c2Vyc0lkcyA9IHsgLi4uaWRzIH07XG4gIH1cblxuICBhZGRTdWJzY3JpYmVycyhzdWJzY3JpYmVycykge1xuICAgIHRoaXMuX3N1YnNjcmliZXJzID0gWy4uLnN1YnNjcmliZXJzXTtcbiAgfVxufVxuXG5jb25zdCBTdGF0ZSA9IG5ldyBQcm9qZWN0U3RhdGUoKTtcblxuZXhwb3J0IGRlZmF1bHQgU3RhdGU7XG4iLCJpbXBvcnQgeyBCQVNFX1VSTCB9IGZyb20gJy4uL2NvbmZpZy9jb25maWcnO1xuXG5jb25zdCBjaGVja1NlcnZlclJlc3BvbnNlID0gKHJlcykgPT4gKHJlcy5vayA/IHJlcy5qc29uKCkgOiBQcm9taXNlLnJlamVjdChyZXMpKTtcblxuY29uc3QgZ2V0RGF0YSA9IGFzeW5jIChyb3V0ZSkgPT4ge1xuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHtCQVNFX1VSTH0ke3JvdXRlfWAsIHsgbWV0aG9kOiAnR0VUJyB9KTtcbiAgcmV0dXJuIGNoZWNrU2VydmVyUmVzcG9uc2UocmVzKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGdldERhdGE7XG4iLCJjbGFzcyBDb21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcih7IHRlbXBsYXRlU2VsZWN0b3IsIGVsZW1lbnRTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fdGVtcGxhdGVTZWxlY3RvciA9IHRlbXBsYXRlU2VsZWN0b3I7XG4gICAgdGhpcy5fZWxlbWVudFNlbGVjdG9yID0gZWxlbWVudFNlbGVjdG9yO1xuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIHRoaXMuX3RlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yKS5jb250ZW50O1xuICAgIC8vINGB0LDQvCDRjdC70LXQvNC10L3RglxuICAgIHJldHVybiB0aGlzLl90ZW1wbGF0ZS5xdWVyeVNlbGVjdG9yKHRoaXMuX2VsZW1lbnRTZWxlY3RvcikuY2xvbmVOb2RlKHRydWUpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENvbXBvbmVudDtcbiIsImltcG9ydCBDb21wb25lbnQgZnJvbSAnLi9Db21wb25lbnQnO1xuaW1wb3J0IHsgcmVmaW5lVG9TdHJpbmcgfSBmcm9tICcuLi91dGlscy9oYW5kbGUtZGF0ZXMnO1xuXG5jbGFzcyBCYWNrbG9nQ2FyZCBleHRlbmRzIENvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIGNhcmREYXRhLFxuICAgIHtcbiAgICAgIHRlbXBsYXRlU2VsZWN0b3IsXG4gICAgICBlbGVtZW50U2VsZWN0b3IsXG4gICAgICB0aXRsZVNlbGVjdG9yLFxuICAgICAgZGVzY3JpcHRpb25TZWxlY3RvcixcbiAgICAgIHN0YXJ0RGF0ZVNlbGVjdG9yLFxuICAgICAgZW5kRGF0ZVNlbGVjdG9yLFxuICAgICAgZHJhZ1N0YXJ0Q2xhc3MsXG4gICAgfVxuICApIHtcbiAgICBzdXBlcih7IHRlbXBsYXRlU2VsZWN0b3IsIGVsZW1lbnRTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9jYXJkRGF0YSA9IGNhcmREYXRhO1xuICAgIHRoaXMuX2JhY2tsb2dDYXJkID0gc3VwZXIuX2dldFRlbXBsYXRlKCk7XG4gICAgdGhpcy5fZHJhZ1N0YXJ0Q2xhc3MgPSBkcmFnU3RhcnRDbGFzcztcbiAgICB0aGlzLl9jYXJkVGl0bGUgPSB0aGlzLl9iYWNrbG9nQ2FyZC5xdWVyeVNlbGVjdG9yKHRpdGxlU2VsZWN0b3IpO1xuICAgIHRoaXMuX2NhcmREZXNjcmlwdGlvbiA9IHRoaXMuX2JhY2tsb2dDYXJkLnF1ZXJ5U2VsZWN0b3IoZGVzY3JpcHRpb25TZWxlY3Rvcik7XG4gICAgdGhpcy5fY2FyZFN0YXJ0RGF0ZSA9IHRoaXMuX2JhY2tsb2dDYXJkLnF1ZXJ5U2VsZWN0b3Ioc3RhcnREYXRlU2VsZWN0b3IpO1xuICAgIHRoaXMuX2NhcmRFbmREYXRlID0gdGhpcy5fYmFja2xvZ0NhcmQucXVlcnlTZWxlY3RvcihlbmREYXRlU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZURyYWdTdGFydCA9IHRoaXMuX2hhbmRsZURyYWdTdGFydC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX2hhbmRsZURyYWdFbmQgPSB0aGlzLl9oYW5kbGVEcmFnRW5kLmJpbmQodGhpcyk7XG4gIH1cblxuICBfaGFuZGxlRHJhZ1N0YXJ0KGV2dCkge1xuICAgIHRoaXMuX2JhY2tsb2dDYXJkLmNsYXNzTGlzdC5hZGQodGhpcy5fZHJhZ1N0YXJ0Q2xhc3MpO1xuICAgIGV2dC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9wbGFpbicsIHRoaXMuX2NhcmREYXRhLmlkKTtcbiAgICBldnQuZGF0YVRyYW5zZmVyLmVmZmVjdEFsbG93ZWQgPSAnbW92ZSc7XG4gIH1cblxuICBfaGFuZGxlRHJhZ0VuZCgpIHtcbiAgICB0aGlzLl9iYWNrbG9nQ2FyZC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2RyYWdTdGFydENsYXNzKTtcbiAgfVxuXG4gIGNyZWF0ZUVsZW1lbnQoKSB7XG4gICAgdGhpcy5fY2FyZFRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fY2FyZERhdGEuc3ViamVjdDtcbiAgICB0aGlzLl9jYXJkRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSB0aGlzLl9jYXJkRGF0YS5kZXNjcmlwdGlvbjtcbiAgICB0aGlzLl9jYXJkU3RhcnREYXRlLnRleHRDb250ZW50ID0gcmVmaW5lVG9TdHJpbmcodGhpcy5fY2FyZERhdGEucGxhblN0YXJ0RGF0ZSk7XG4gICAgdGhpcy5fY2FyZEVuZERhdGUudGV4dENvbnRlbnQgPSByZWZpbmVUb1N0cmluZyh0aGlzLl9jYXJkRGF0YS5wbGFuRW5kRGF0ZSk7XG4gICAgdGhpcy5fYmFja2xvZ0NhcmQuc2V0QXR0cmlidXRlKCdpZCcsIHRoaXMuX2NhcmREYXRhLmlkKTtcbiAgICByZXR1cm4gdGhpcy5fYmFja2xvZ0NhcmQ7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9iYWNrbG9nQ2FyZC5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCB0aGlzLl9oYW5kbGVEcmFnU3RhcnQpO1xuICAgIHRoaXMuX2JhY2tsb2dDYXJkLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbmQnLCB0aGlzLl9oYW5kbGVEcmFnRW5kKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBCYWNrbG9nQ2FyZDtcbiIsImNsYXNzIFJlbmRlcmVyU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gICAgdGhpcy5jbGVhckl0ZW1zID0gdGhpcy5jbGVhckl0ZW1zLmJpbmQodGhpcyk7XG4gIH1cblxuICBhZGRJdGVtKGl0ZW0pIHtcbiAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKGl0ZW0pO1xuICB9XG5cbiAgY2xlYXJJdGVtcygpIHtcbiAgICB0aGlzLl9jb250YWluZXIudGV4dENvbnRlbnQgPSAnJztcbiAgfVxuXG4gIGFkZFRleHRDb250ZW50KGNvbnRlbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIudGV4dENvbnRlbnQgPSBjb250ZW50O1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFJlbmRlcmVyU2VjdGlvbjtcbiIsImltcG9ydCBDb21wb25lbnQgZnJvbSAnLi9Db21wb25lbnQnO1xuaW1wb3J0IHsgcmVmaW5lVG9TdHJpbmcgfSBmcm9tICcuLi91dGlscy9oYW5kbGUtZGF0ZXMnO1xuXG5jbGFzcyBDYWxlbmRhclRhc2sgZXh0ZW5kcyBDb21wb25lbnQge1xuICBjb25zdHJ1Y3RvcihcbiAgICB0YXNrLFxuICAgIHtcbiAgICAgIHRlbXBsYXRlU2VsZWN0b3IsXG4gICAgICBlbGVtZW50U2VsZWN0b3IsXG4gICAgICB0aXRsZVNlbGVjdG9yLFxuICAgICAgc3VidGl0bGVTZWxlY3RvcixcbiAgICAgIGRlc2NyaXB0aW9uU2VsZWN0b3IsXG4gICAgICBzdGFydERhdGVTZWxlY3RvcixcbiAgICAgIGVuZERhdGVTZWxlY3RvcixcbiAgICB9XG4gICkge1xuICAgIHN1cGVyKHsgdGVtcGxhdGVTZWxlY3RvciwgZWxlbWVudFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX3Rhc2sgPSB0YXNrO1xuICAgIHRoaXMuX3Rhc2tFbGVtZW50ID0gc3VwZXIuX2dldFRlbXBsYXRlKCk7XG4gICAgdGhpcy5fdGl0bGVFTGVtZW50ID0gdGhpcy5fdGFza0VsZW1lbnQucXVlcnlTZWxlY3Rvcih0aXRsZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9zdWJ0aXRsZUVMZW1lbnQgPSB0aGlzLl90YXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKHN1YnRpdGxlU2VsZWN0b3IpO1xuICAgIHRoaXMuX2Rlc2NyaXB0aW9uRWxlbWVudCA9IHRoaXMuX3Rhc2tFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoZGVzY3JpcHRpb25TZWxlY3Rvcik7XG4gICAgdGhpcy5fc3RhcnREYXRlRWxlbWVudCA9IHRoaXMuX3Rhc2tFbGVtZW50LnF1ZXJ5U2VsZWN0b3Ioc3RhcnREYXRlU2VsZWN0b3IpO1xuICAgIHRoaXMuX2VuZERhdGVFbGVtZW50ID0gdGhpcy5fdGFza0VsZW1lbnQucXVlcnlTZWxlY3RvcihlbmREYXRlU2VsZWN0b3IpO1xuICB9XG5cbiAgY3JlYXRlRWxlbWVudCgpIHtcbiAgICB0aGlzLl90aXRsZUVMZW1lbnQudGV4dENvbnRlbnQgPSB0aGlzLl90YXNrLnN1YmplY3Q7XG4gICAgdGhpcy5fc3VidGl0bGVFTGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5fdGFzay5zdWJqZWN0O1xuICAgIHRoaXMuX2Rlc2NyaXB0aW9uRWxlbWVudC50ZXh0Q29udGVudCA9IHRoaXMuX3Rhc2suZGVzY3JpcHRpb247XG4gICAgdGhpcy5fc3RhcnREYXRlRWxlbWVudC50ZXh0Q29udGVudCA9IHJlZmluZVRvU3RyaW5nKHRoaXMuX3Rhc2sucGxhblN0YXJ0RGF0ZSk7XG4gICAgdGhpcy5fZW5kRGF0ZUVsZW1lbnQudGV4dENvbnRlbnQgPSByZWZpbmVUb1N0cmluZyh0aGlzLl90YXNrLnBsYW5FbmREYXRlKTtcblxuICAgIHJldHVybiB0aGlzLl90YXNrRWxlbWVudDtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDYWxlbmRhclRhc2s7XG4iLCJpbXBvcnQgQ29tcG9uZW50IGZyb20gJy4vQ29tcG9uZW50JztcbmltcG9ydCBDYWxlbmRhclRhc2sgZnJvbSAnLi9DYWxlbmRhclRhc2snO1xuaW1wb3J0IHsgY2FsZW5kYXJUYXNrU2VsZWN0b3JzIH0gZnJvbSAnLi4vY29uZmlnL2NvbnN0YW50cyc7XG5cbmNsYXNzIENhbGVuZGFyQ2VsbCBleHRlbmRzIENvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKGNlbGwsIHsgdGVtcGxhdGVTZWxlY3RvciwgZWxlbWVudFNlbGVjdG9yIH0pIHtcbiAgICBzdXBlcih7IHRlbXBsYXRlU2VsZWN0b3IsIGVsZW1lbnRTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9jZWxsID0gY2VsbDtcbiAgICB0aGlzLl9jZWxsRWxlbWVudCA9IHN1cGVyLl9nZXRUZW1wbGF0ZSgpO1xuICB9XG5cbiAgX2FkZEl0ZW0oaXRlbSkge1xuICAgIHRoaXMuX2NlbGxFbGVtZW50LmFwcGVuZChpdGVtKTtcbiAgfVxuXG4gIGNyZWF0ZUVsZW1lbnQoKSB7XG4gICAgdGhpcy5fY2VsbEVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLWV4ZWN1dG9yJywgdGhpcy5fY2VsbC5leGVjdXRvcik7XG4gICAgdGhpcy5fY2VsbEVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLWRhdGUnLCB0aGlzLl9jZWxsLmRhdGUpO1xuXG4gICAgcmV0dXJuIHRoaXMuX2NlbGxFbGVtZW50O1xuICB9XG5cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5fY2VsbC50YXNrcy5mb3JFYWNoKCh0YXNrKSA9PiB7XG4gICAgICBjb25zdCBuZXdUYXNrID0gbmV3IENhbGVuZGFyVGFzayh0YXNrLCBjYWxlbmRhclRhc2tTZWxlY3RvcnMpO1xuICAgICAgdGhpcy5fYWRkSXRlbShuZXdUYXNrLmNyZWF0ZUVsZW1lbnQoKSk7XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2FsZW5kYXJDZWxsO1xuIiwiaW1wb3J0IFByb2plY3RTdGF0ZSBmcm9tICcuLi9zdGF0ZS9Qcm9qZWN0U3RhdGUnO1xuaW1wb3J0IENvbXBvbmVudCBmcm9tICcuL0NvbXBvbmVudCc7XG5pbXBvcnQgQ2FsZW5kYXJDZWxsIGZyb20gJy4vQ2FsZW5kYXJDZWxsJztcbmltcG9ydCB7IGNhbGVuZGFyQ2VsbFNlbGVjdG9ycyB9IGZyb20gJy4uL2NvbmZpZy9jb25zdGFudHMnO1xuXG5jbGFzcyBDYWxlbmRhckNvbHVtbiBleHRlbmRzIENvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKGNvbHVtbiwgeyB0ZW1wbGF0ZVNlbGVjdG9yLCBlbGVtZW50U2VsZWN0b3IgfSkge1xuICAgIHN1cGVyKHsgdGVtcGxhdGVTZWxlY3RvciwgZWxlbWVudFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX2NvbHVtbiA9IGNvbHVtbjtcbiAgICB0aGlzLl9jYWxlbmRhckNvbHVtbiA9IHN1cGVyLl9nZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX2RheVRhc2tzU2NoZW1hID0ge307XG4gIH1cblxuICBfZ2V0VGFza3NGb3JDdXJyZW50RGF5KHRhc2tzKSB7XG4gICAgY29uc3QgcGFyc2VkQ29sdW1uRGF0ZSA9IERhdGUucGFyc2UodGhpcy5fY29sdW1uLmRhdGUpO1xuICAgIHJldHVybiB0YXNrcy5maWx0ZXIoXG4gICAgICAodGFzaykgPT5cbiAgICAgICAgRGF0ZS5wYXJzZSh0YXNrLnBsYW5TdGFydERhdGUpIDw9IHBhcnNlZENvbHVtbkRhdGUgJiZcbiAgICAgICAgcGFyc2VkQ29sdW1uRGF0ZSA8PSBEYXRlLnBhcnNlKHRhc2sucGxhbkVuZERhdGUpXG4gICAgKTtcbiAgfVxuXG4gIF9nZXREYXlUYXNrc1NjaGVtYSgpIHtcbiAgICB0aGlzLl90YXNrc0ZvckN1cnJlbnREYXkgPSB0aGlzLl9nZXRUYXNrc0ZvckN1cnJlbnREYXkoUHJvamVjdFN0YXRlLmFzc2lnbmVkVGFza3MpO1xuXG4gICAgaWYgKHRoaXMuX3Rhc2tzRm9yQ3VycmVudERheSkge1xuICAgICAgdGhpcy5fdGFza3NGb3JDdXJyZW50RGF5LmZvckVhY2goKHRhc2spID0+IHtcbiAgICAgICAgaWYgKCF0aGlzLl9kYXlUYXNrc1NjaGVtYVt0YXNrLmV4ZWN1dG9yXSkge1xuICAgICAgICAgIHRoaXMuX2RheVRhc2tzU2NoZW1hW3Rhc2suZXhlY3V0b3JdID0gW3Rhc2tdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuX2RheVRhc2tzU2NoZW1hW3Rhc2suZXhlY3V0b3JdID0gWy4uLnRoaXMuX2RheVRhc2tzU2NoZW1hW3Rhc2suZXhlY3V0b3JdLCB0YXNrXTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgY3JlYXRlQ2VsbHMoKSB7XG4gICAgdGhpcy5fZ2V0RGF5VGFza3NTY2hlbWEoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IFByb2plY3RTdGF0ZS51c2Vycy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgY29uc3QgdXNlcklkID0gUHJvamVjdFN0YXRlLnVzZXJzSWRzW2ldO1xuICAgICAgY29uc3QgY29sdW1uQ2VsbCA9IG5ldyBDYWxlbmRhckNlbGwoXG4gICAgICAgIHsgZXhlY3V0b3I6IHVzZXJJZCwgZGF0ZTogdGhpcy5fY29sdW1uLmRhdGUsIHRhc2tzOiB0aGlzLl9kYXlUYXNrc1NjaGVtYVt1c2VySWRdID8/IFtdIH0sXG4gICAgICAgIGNhbGVuZGFyQ2VsbFNlbGVjdG9yc1xuICAgICAgKTtcbiAgICAgIGNvbnN0IGNlbGxFbGVtZW50ID0gY29sdW1uQ2VsbC5jcmVhdGVFbGVtZW50KCk7XG4gICAgICBjb2x1bW5DZWxsLnJlbmRlckl0ZW1zKCk7XG4gICAgICB0aGlzLmFkZEl0ZW0oY2VsbEVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIGNyZWF0ZUVsZW1lbnQoKSB7XG4gICAgdGhpcy5jcmVhdGVDZWxscygpO1xuICAgIHJldHVybiB0aGlzLl9jYWxlbmRhckNvbHVtbjtcbiAgfVxuXG4gIGFkZEl0ZW0oaXRlbSkge1xuICAgIHRoaXMuX2NhbGVuZGFyQ29sdW1uLmFwcGVuZChpdGVtKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDYWxlbmRhckNvbHVtbjtcbiIsImltcG9ydCBDb21wb25lbnQgZnJvbSAnLi9Db21wb25lbnQnO1xuaW1wb3J0IFByb2plY3RTdGF0ZSBmcm9tICcuLi9zdGF0ZS9Qcm9qZWN0U3RhdGUnO1xuaW1wb3J0IHsgcmVmaW5lVG9OdW1lcmljRERNTSB9IGZyb20gJy4uL3V0aWxzL2hhbmRsZS1kYXRlcyc7XG5cbmNsYXNzIENhbGVuZGFyRGF0ZSBleHRlbmRzIENvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKHsgZGF0ZSB9LCB7IHRlbXBsYXRlU2VsZWN0b3IsIGVsZW1lbnRTZWxlY3RvciwgY3VycmVudERheUNsYXNzIH0pIHtcbiAgICBzdXBlcih7IHRlbXBsYXRlU2VsZWN0b3IsIGVsZW1lbnRTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9kYXRlID0gZGF0ZTtcbiAgICB0aGlzLl9jdXJyZW50RGF5Q2xhc3MgPSBjdXJyZW50RGF5Q2xhc3M7XG4gICAgdGhpcy5fZGF0ZUVsZW1lbnQgPSBzdXBlci5fZ2V0VGVtcGxhdGUoKTtcbiAgfVxuXG4gIGNyZWF0ZUVsZW1lbnQoKSB7XG4gICAgY29uc3QgY2VsbERhdGUgPSBuZXcgRGF0ZSh0aGlzLl9kYXRlKTtcbiAgICB0aGlzLl9kYXRlRWxlbWVudC50ZXh0Q29udGVudCA9IHJlZmluZVRvTnVtZXJpY0RETU0oY2VsbERhdGUpO1xuICAgIGlmICh0aGlzLl9kYXRlID09PSBQcm9qZWN0U3RhdGUuY3VycmVudERhdGVOdW1lcmljKSB7XG4gICAgICB0aGlzLl9kYXRlRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2N1cnJlbnREYXlDbGFzcyk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9kYXRlRWxlbWVudDtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDYWxlbmRhckRhdGU7XG4iLCJpbXBvcnQgUHJvamVjdFN0YXRlIGZyb20gJy4uL3N0YXRlL1Byb2plY3RTdGF0ZSc7XG5pbXBvcnQgQ29tcG9uZW50IGZyb20gJy4vQ29tcG9uZW50JztcbmltcG9ydCB7IEFTU0lHTl9CWV9VU0VSIH0gZnJvbSAnLi4vc3RhdGUvdHlwZXMnO1xuXG5jbGFzcyBVc2VyQ2FyZCBleHRlbmRzIENvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKGNhcmREYXRhLCB7IHRlbXBsYXRlU2VsZWN0b3IsIGVsZW1lbnRTZWxlY3RvciwgdXNlck5hbWVTZWxlY3RvciwgZHJhZ092ZXJDbGFzcyB9KSB7XG4gICAgc3VwZXIoeyB0ZW1wbGF0ZVNlbGVjdG9yLCBlbGVtZW50U2VsZWN0b3IgfSk7XG4gICAgdGhpcy5fY2FyZERhdGEgPSBjYXJkRGF0YTtcbiAgICB0aGlzLl91c2VyQ2FyZCA9IHN1cGVyLl9nZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX2Z1bGxOYW1lRWxlbWVudCA9IHRoaXMuX3VzZXJDYXJkLnF1ZXJ5U2VsZWN0b3IodXNlck5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fZHJhZ092ZXJDbGFzcyA9IGRyYWdPdmVyQ2xhc3M7XG4gICAgdGhpcy5faGFuZGxlRHJhZ092ZXIgPSB0aGlzLl9oYW5kbGVEcmFnT3Zlci5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX2hhbmRsZURyYWdMZWF2ZSA9IHRoaXMuX2hhbmRsZURyYWdMZWF2ZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX2hhbmRsZURyb3AgPSB0aGlzLl9oYW5kbGVEcm9wLmJpbmQodGhpcyk7XG4gIH1cblxuICBfaGFuZGxlRHJhZ092ZXIoZXZ0KSB7XG4gICAgaWYgKGV2dC5kYXRhVHJhbnNmZXIgJiYgZXZ0LmRhdGFUcmFuc2Zlci50eXBlc1swXSA9PT0gJ3RleHQvcGxhaW4nKSB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX3VzZXJDYXJkLmNsYXNzTGlzdC5hZGQodGhpcy5fZHJhZ092ZXJDbGFzcyk7XG4gICAgfVxuICB9XG5cbiAgX2hhbmRsZURyYWdMZWF2ZSgpIHtcbiAgICB0aGlzLl91c2VyQ2FyZC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2RyYWdPdmVyQ2xhc3MpO1xuICB9XG5cbiAgX2hhbmRsZURyb3AoZXZ0KSB7XG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgdGFza0lkID0gZXZ0LmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJyk7XG4gICAgUHJvamVjdFN0YXRlLmFzc2lnblRhc2soeyB0eXBlOiBBU1NJR05fQllfVVNFUiwgdGFza0lkLCBleGVjdXRvcklkOiB0aGlzLl9jYXJkRGF0YS5pZCB9KTtcbiAgICB0aGlzLl9oYW5kbGVEcmFnTGVhdmUoKTtcbiAgfVxuXG4gIGNyZWF0ZUNhcmQoKSB7XG4gICAgdGhpcy5fZnVsbE5hbWVFbGVtZW50LnRleHRDb250ZW50ID0gYCR7dGhpcy5fY2FyZERhdGEuZmlyc3ROYW1lfSAke3RoaXMuX2NhcmREYXRhLnN1cm5hbWV9YDtcbiAgICByZXR1cm4gdGhpcy5fdXNlckNhcmQ7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl91c2VyQ2FyZC5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIHRoaXMuX2hhbmRsZURyYWdPdmVyKTtcbiAgICB0aGlzLl91c2VyQ2FyZC5hZGRFdmVudExpc3RlbmVyKCdkcmFnbGVhdmUnLCB0aGlzLl9oYW5kbGVEcmFnTGVhdmUpO1xuICAgIHRoaXMuX3VzZXJDYXJkLmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCB0aGlzLl9oYW5kbGVEcm9wKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBVc2VyQ2FyZDtcbiIsImNvbnN0IHJlbW92ZUFuaW1hdGlvbiA9IChlbGVtZW50KSA9PiB7XG4gIC8vINGD0LTQsNC70LXQvdC40LUg0LTQu9GPINCy0L7RgdGB0YLQsNC90L7QstC70LXQvdC40Y8g0YPRgNC+0LLQvdC10Lkg0L3QsNC70L7QttC10L3QuNGPINC4INC00L7RgdGC0YPQv9C90L7RgdGC0Lgg0YHQstC+0LnRgdGC0LLQsCB0cmFuc2Zvcm1cbiAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gIH0sIDExMDApO1xufTtcblxuZXhwb3J0IGNvbnN0IGFwcGx5U2xpZGVJbkJvdHRvbVVwQW5pbSA9IChlbGVtZW50LCBpbmRleCkgPT4ge1xuICBlbGVtZW50LnNldEF0dHJpYnV0ZShcbiAgICAnc3R5bGUnLFxuICAgIGBhbmltYXRpb246IHNsaWRlLWluLWJvdHRvbS11cCAwLjVzIGVhc2Utb3V0IDAuJHtpbmRleH1zIGZvcndhcmRzOyBvcGFjaXR5OiAwO2BcbiAgKTtcbiAgcmVtb3ZlQW5pbWF0aW9uKGVsZW1lbnQpO1xufTtcblxuZXhwb3J0IGNvbnN0IGFwcGx5U2xpZGVJblJpZ2h0TGVmdEFuaW0gPSAoZWxlbWVudCwgaW5kZXgpID0+IHtcbiAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXG4gICAgJ3N0eWxlJyxcbiAgICBgYW5pbWF0aW9uOiBzbGlkZS1pbi1yaWdodC1sZWZ0IDAuNXMgZWFzZS1vdXQgMC4ke2luZGV4fXMgZm9yd2FyZHM7IG9wYWNpdHk6IDA7YFxuICApO1xuICByZW1vdmVBbmltYXRpb24oZWxlbWVudCk7XG59O1xuIiwiaW1wb3J0ICcuL2luZGV4LmNzcyc7XG5pbXBvcnQgUHJvamVjdFN0YXRlIGZyb20gJy4vc3RhdGUvUHJvamVjdFN0YXRlJztcbmltcG9ydCB7XG4gIGJhY2tsb2dDYXJkU2VsZWN0b3JzLFxuICBjYWxlbmRhckNvbHVtblNlbGVjdG9ycyxcbiAgY2FsZW5kYXJEYXRlU2VsZWN0b3JzLFxuICBmdWxsRGF5SW5NaWxsaXNlY29uZHMsXG4gIG1heEluZGV4Rm9yQW5pbWF0aW9uLFxuICBwb3B1cFNlbGVjdG9ycyxcbiAgcHJlbG9hZGVyU3RhdGVTZWxlY3RvcnMsXG4gIHRvZ2dsZVRoZW1lU2V0dGluZ3MsXG4gIHVzZXJzQ2FyZFNlbGVjdG9ycyxcbn0gZnJvbSAnLi9jb25maWcvY29uc3RhbnRzJztcbmltcG9ydCB7IFRBU0tTX1JPVVRFLCBVU0VSU19ST1VURSB9IGZyb20gJy4vY29uZmlnL2NvbmZpZyc7XG5pbXBvcnQgeyByZWZpbmVUb051bWVyaWNZWU1NREQgfSBmcm9tICcuL3V0aWxzL2hhbmRsZS1kYXRlcyc7XG5pbXBvcnQgeyBpbml0U3dpdGNoQmV0d2VlbldlZWtzLCBpbml0VG9nZ2xlQ29sb3JUaGVtZSB9IGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IGdldERhdGEgZnJvbSAnLi9hcGkvbWFpbi1hcGknO1xuaW1wb3J0IHtcbiAgQmFja2xvZ0NhcmQsXG4gIENhbGVuZGFyLFxuICBDYWxlbmRhckNvbHVtbixcbiAgQ2FsZW5kYXJEYXRlLFxuICBQb3B1cEVycm9yLFxuICBSZW5kZXJlclNlY3Rpb24sXG4gIFVzZXJDYXJkLFxufSBmcm9tICcuL2NvbXBvbmVudHMnO1xuaW1wb3J0IGluaXRTZWFyY2ggZnJvbSAnLi91dGlscy9zZWFyY2gnO1xuaW1wb3J0IHsgYXBwbHlTbGlkZUluQm90dG9tVXBBbmltLCBhcHBseVNsaWRlSW5SaWdodExlZnRBbmltIH0gZnJvbSAnLi91dGlscy9hcHBseS1zdHlsZS1hbmltYXRpb24nO1xuXG5jb25zdCBwYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihwcmVsb2FkZXJTdGF0ZVNlbGVjdG9ycy5wYWdlU2VsZWN0b3IpO1xuY29uc3QgcHJlbG9hZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihwcmVsb2FkZXJTdGF0ZVNlbGVjdG9ycy5wcmVsb2FkZXJTZWxlY3Rvcik7XG5jb25zdCBwb3B1cEVycm9yID0gbmV3IFBvcHVwRXJyb3IocG9wdXBTZWxlY3RvcnMpO1xuLy8g0LrQvtC90YLQtdC50L3QtdGA0Yst0YDQtdC90LTQtdGA0LXRgNGLXG5jb25zdCBiYWNrbG9nTGlzdCA9IG5ldyBSZW5kZXJlclNlY3Rpb24oYmFja2xvZ0NhcmRTZWxlY3RvcnMucGFyZW50U2VsZWN0b3IpO1xuY29uc3QgdXNlcnNMaXN0ID0gbmV3IFJlbmRlcmVyU2VjdGlvbih1c2Vyc0NhcmRTZWxlY3RvcnMucGFyZW50U2VsZWN0b3IpO1xuY29uc3QgZGF0ZXNDb250YWluZXIgPSBuZXcgUmVuZGVyZXJTZWN0aW9uKGNhbGVuZGFyRGF0ZVNlbGVjdG9ycy5wYXJlbnRTZWxlY3Rvcik7XG5jb25zdCBjYWxlbmRhckNvbnRhaW5lciA9IG5ldyBDYWxlbmRhcihjYWxlbmRhckNvbHVtblNlbGVjdG9ycy5wYXJlbnRTZWxlY3Rvcik7XG5jYWxlbmRhckNvbnRhaW5lci5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCByZW5kZXJDYWxlbmRhciA9IChpc0FuaW1hdGVkKSA9PiB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgUHJvamVjdFN0YXRlLmNhbGVuZGFyTGVuZ3RoOyBpICs9IDEpIHtcbiAgICBjb25zdCB0aGlzRGF0ZSA9IFByb2plY3RTdGF0ZS5zdGFydERheSArIGZ1bGxEYXlJbk1pbGxpc2Vjb25kcyAqIGk7XG4gICAgY29uc3QgZGF0ZVN0cmluZyA9IHJlZmluZVRvTnVtZXJpY1lZTU1ERCh0aGlzRGF0ZSk7XG5cbiAgICBjb25zdCBkYXRlT2JqZWN0ID0gbmV3IENhbGVuZGFyRGF0ZSh7IGRhdGU6IGRhdGVTdHJpbmcgfSwgY2FsZW5kYXJEYXRlU2VsZWN0b3JzKTtcbiAgICBjb25zdCBjb2x1bW5PYmplY3QgPSBuZXcgQ2FsZW5kYXJDb2x1bW4oeyBkYXRlOiBkYXRlU3RyaW5nIH0sIGNhbGVuZGFyQ29sdW1uU2VsZWN0b3JzKTtcbiAgICBjb25zdCBkYXRlRWxlbWVudCA9IGRhdGVPYmplY3QuY3JlYXRlRWxlbWVudCgpO1xuICAgIGNvbnN0IGNvbHVtbkVsZW1lbnQgPSBjb2x1bW5PYmplY3QuY3JlYXRlRWxlbWVudCgpO1xuICAgIGlmIChpc0FuaW1hdGVkKSB7XG4gICAgICBhcHBseVNsaWRlSW5SaWdodExlZnRBbmltKGRhdGVFbGVtZW50LCBpKTtcbiAgICAgIGFwcGx5U2xpZGVJblJpZ2h0TGVmdEFuaW0oY29sdW1uRWxlbWVudCwgaSk7XG4gICAgfVxuICAgIGRhdGVzQ29udGFpbmVyLmFkZEl0ZW0oZGF0ZUVsZW1lbnQpO1xuICAgIGNhbGVuZGFyQ29udGFpbmVyLmFkZEl0ZW0oY29sdW1uRWxlbWVudCk7XG4gIH1cbn07XG5cbmNvbnN0IGNyZWF0ZUJhY2tsb2dDYXJkID0gKHRhc2spID0+IHtcbiAgY29uc3QgYmFja2xvZ0NhcmQgPSBuZXcgQmFja2xvZ0NhcmQodGFzaywgYmFja2xvZ0NhcmRTZWxlY3RvcnMpO1xuICBjb25zdCBuZXdCYWNrbG9nQ2FyZCA9IGJhY2tsb2dDYXJkLmNyZWF0ZUVsZW1lbnQoKTtcbiAgYmFja2xvZ0NhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgcmV0dXJuIG5ld0JhY2tsb2dDYXJkO1xufTtcblxuY29uc3QgcmVuZGVyQmFja2xvZ1Rhc2tzID0gKGlzQW5pbWF0ZWQpID0+IHtcbiAgUHJvamVjdFN0YXRlLmJhY2tsb2dUYXNrcy5mb3JFYWNoKCh0YXNrLCBpKSA9PiB7XG4gICAgY29uc3QgYmFja2xvZ0NhcmQgPSBjcmVhdGVCYWNrbG9nQ2FyZCh0YXNrKTtcbiAgICBpZiAoaXNBbmltYXRlZCAmJiBpIDw9IG1heEluZGV4Rm9yQW5pbWF0aW9uLmJhY2tsb2dDYXJkcykge1xuICAgICAgYXBwbHlTbGlkZUluQm90dG9tVXBBbmltKGJhY2tsb2dDYXJkLCBpKTtcbiAgICB9XG4gICAgYmFja2xvZ0xpc3QuYWRkSXRlbShiYWNrbG9nQ2FyZCk7XG4gIH0pO1xufTtcblxuY29uc3QgcmVuZGVyVXNlcnMgPSAodXNlcnMsIGlzQW5pbWF0ZWQpID0+XG4gIHVzZXJzLmZvckVhY2goKHVzZXIsIGkpID0+IHtcbiAgICBjb25zdCB1c2VyQ2FyZCA9IG5ldyBVc2VyQ2FyZCh1c2VyLCB1c2Vyc0NhcmRTZWxlY3RvcnMpO1xuICAgIGNvbnN0IG5ld1VzZXJDYXJkID0gdXNlckNhcmQuY3JlYXRlQ2FyZCgpO1xuICAgIGlmIChpc0FuaW1hdGVkICYmIGkgPD0gbWF4SW5kZXhGb3JBbmltYXRpb24udXNlcnMpIHtcbiAgICAgIGFwcGx5U2xpZGVJbkJvdHRvbVVwQW5pbShuZXdVc2VyQ2FyZCwgaSk7XG4gICAgfVxuICAgIHVzZXJDYXJkLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdXNlcnNMaXN0LmFkZEl0ZW0obmV3VXNlckNhcmQpO1xuICB9KTtcblxuLy8g0L/QtdGA0LLQsNGPINC+0YLRgNC40YHQvtCy0LrQsCDQuCDQvtCx0YDQsNCx0L7RgtC60LAg0LTQsNC90L3Ri9GFINGBINGB0LXRgNCy0LXRgNCwXG5jb25zdCBnZXRJbml0aWFsRGF0YSA9IGFzeW5jICgpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB1c2VycyA9IGF3YWl0IGdldERhdGEoVVNFUlNfUk9VVEUpO1xuICAgIGNvbnN0IHRhc2tzID0gYXdhaXQgZ2V0RGF0YShUQVNLU19ST1VURSk7XG5cbiAgICAvLyDRgdC+0YDRgtC40YDQvtCy0LrQsCDQt9Cw0LTQsNC90LjQuSDQuCDQtNC+0LHQsNCy0LvQtdC90LjQtSDQuNGFINCyINGB0YLQtdC50YJcbiAgICB0YXNrcy5mb3JFYWNoKCh0YXNrKSA9PiB7XG4gICAgICBpZiAodGFzay5leGVjdXRvcikgUHJvamVjdFN0YXRlLmFkZFRhc2tUb0Fzc2lnbmVkVGFza3ModGFzayk7XG4gICAgICBlbHNlIFByb2plY3RTdGF0ZS5hZGRUYXNrVG9CYWNrbG9nKHRhc2spO1xuICAgIH0pO1xuICAgIC8vINGE0L7RgNC80LjRgNC+0LLQsNC90LjQtSDQvtCx0YrQtdC60YLQsCDRgSBpZCDQuNGB0L/QvtC70L3QuNGC0LXQu9C10LlcbiAgICBQcm9qZWN0U3RhdGUudXNlcnMgPSB1c2VycztcbiAgICBQcm9qZWN0U3RhdGUubWFwVXNlcnNJZHModXNlcnMpO1xuICAgIC8vINGA0LXQvdC00LXRgNC40L3Qs1xuICAgIHJlbmRlclVzZXJzKHVzZXJzLCB0cnVlKTtcbiAgICByZW5kZXJDYWxlbmRhcih0cnVlKTtcbiAgICByZW5kZXJCYWNrbG9nVGFza3ModHJ1ZSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHBvcHVwRXJyb3Iub3BlbigpO1xuICB9XG4gIHBhZ2UuY2xhc3NMaXN0LnJlbW92ZShwcmVsb2FkZXJTdGF0ZVNlbGVjdG9ycy5wYWdlSGlkZGVuQ2xhc3MpO1xuICBwcmVsb2FkZXIuY2xhc3NMaXN0LnJlbW92ZShwcmVsb2FkZXJTdGF0ZVNlbGVjdG9ycy5wcmVsb2FkZXJWaXNpYmxlQ2xhc3MpO1xufTtcblxuZ2V0SW5pdGlhbERhdGEoKTtcblxuLy8g0L/QvtC40YHQulxuaW5pdFNlYXJjaChiYWNrbG9nTGlzdCwgY3JlYXRlQmFja2xvZ0NhcmQsIHJlbmRlckJhY2tsb2dUYXNrcyk7XG4vLyDQv9C10YDQtdC70LjRgdGC0YvQstCw0L3QuNC1INC60LDQu9C10L3QtNCw0YDRj1xuaW5pdFN3aXRjaEJldHdlZW5XZWVrcyhjYWxlbmRhckNvbnRhaW5lci5jbGVhckl0ZW1zLCBkYXRlc0NvbnRhaW5lci5jbGVhckl0ZW1zLCByZW5kZXJDYWxlbmRhcik7XG4vLyDQv9C10YDQtdC60LvRjtGH0LXQvdC40LUg0YLQtdC80YtcbmluaXRUb2dnbGVDb2xvclRoZW1lKHRvZ2dsZVRoZW1lU2V0dGluZ3MpO1xuXG4vLyDQtNC+0LHQsNCy0LvQtdC90LjQtSDQvdCw0LHQu9GO0LTQsNGC0LXQu9C10Lkg0LIg0YHRgtC10LnRgiDQtNC70Y8g0YDQtdGA0LXQvdC00LXRgNCwXG5Qcm9qZWN0U3RhdGUuYWRkU3Vic2NyaWJlcnMoW1xuICBjYWxlbmRhckNvbnRhaW5lci5jbGVhckl0ZW1zLFxuICBiYWNrbG9nTGlzdC5jbGVhckl0ZW1zLFxuICBkYXRlc0NvbnRhaW5lci5jbGVhckl0ZW1zLFxuICByZW5kZXJDYWxlbmRhcixcbiAgcmVuZGVyQmFja2xvZ1Rhc2tzLFxuXSk7XG4iLCJpbXBvcnQgeyB0aW1lckRlbGF5IH0gZnJvbSAnLi4vY29uZmlnL2NvbnN0YW50cyc7XG5cbmNsYXNzIFBvcHVwRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihzZWxlY3RvcnMpIHtcbiAgICB0aGlzLl9zZWxlY3RvcnMgPSBzZWxlY3RvcnM7XG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5wb3B1cEVycm9yKTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZWxlY3RvcnMucG9wdXBPcGVuQ2xhc3MpO1xuICAgIHRoaXMuX2Nsb3NlKCk7XG4gIH1cblxuICBfY2xvc2UoKSB7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NlbGVjdG9ycy5wb3B1cE9wZW5DbGFzcyk7XG4gICAgfSwgdGltZXJEZWxheSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXBFcnJvcjtcbiIsImltcG9ydCBQcm9qZWN0U3RhdGUgZnJvbSAnLi4vc3RhdGUvUHJvamVjdFN0YXRlJztcbmltcG9ydCBSZW5kZXJlclNlY3Rpb24gZnJvbSAnLi9SZW5kZXJlclNlY3Rpb24nO1xuaW1wb3J0IHsgQVNTSUdOX0JZX0RBVEUgfSBmcm9tICcuLi9zdGF0ZS90eXBlcyc7XG5pbXBvcnQgeyBjYWxlbmRhckNlbGxTZWxlY3RvcnMsIGNhbGVuZGFyVGFza1NlbGVjdG9ycyB9IGZyb20gJy4uL2NvbmZpZy9jb25zdGFudHMnO1xuXG5jbGFzcyBDYWxlbmRhciBleHRlbmRzIFJlbmRlcmVyU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgc3VwZXIoY29udGFpbmVyU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZURyYWdPdmVyID0gdGhpcy5faGFuZGxlRHJhZ092ZXIuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9oYW5kbGVEcmFnTGVhdmUgPSB0aGlzLl9oYW5kbGVEcmFnTGVhdmUuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9oYW5kbGVEcm9wID0gdGhpcy5faGFuZGxlRHJvcC5iaW5kKHRoaXMpO1xuICB9XG5cbiAgX2hhbmRsZURyYWdPdmVyKGV2dCkge1xuICAgIGNvbnN0IHsgdGFyZ2V0IH0gPSBldnQ7XG4gICAgaWYgKFxuICAgICAgZXZ0LmRhdGFUcmFuc2ZlciAmJlxuICAgICAgZXZ0LmRhdGFUcmFuc2Zlci50eXBlc1swXSA9PT0gJ3RleHQvcGxhaW4nICYmXG4gICAgICAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhjYWxlbmRhckNlbGxTZWxlY3RvcnMuZWxlbWVudENsYXNzKSB8fFxuICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKGNhbGVuZGFyVGFza1NlbGVjdG9ycy5lbGVtZW50Q2xhc3MpKVxuICAgICkge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9kcm9wcGFibGVDZWxsID0gdGFyZ2V0LmNsb3Nlc3QoY2FsZW5kYXJDZWxsU2VsZWN0b3JzLmVsZW1lbnRTZWxlY3Rvcik7XG4gICAgICB0aGlzLl9kcm9wcGFibGVDZWxsLmNsYXNzTGlzdC5hZGQoY2FsZW5kYXJDZWxsU2VsZWN0b3JzLmRyYWdPdmVyQ2xhc3MpO1xuICAgIH1cbiAgfVxuXG4gIF9oYW5kbGVEcmFnTGVhdmUoKSB7XG4gICAgdGhpcy5fZHJvcHBhYmxlQ2VsbC5jbGFzc0xpc3QucmVtb3ZlKGNhbGVuZGFyQ2VsbFNlbGVjdG9ycy5kcmFnT3ZlckNsYXNzKTtcbiAgfVxuXG4gIF9oYW5kbGVEcm9wKGV2dCkge1xuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IHRhc2tJZCA9IGV2dC5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgndGV4dC9wbGFpbicpO1xuICAgIFByb2plY3RTdGF0ZS5hc3NpZ25UYXNrKHtcbiAgICAgIHR5cGU6IEFTU0lHTl9CWV9EQVRFLFxuICAgICAgdGFza0lkLFxuICAgICAgZXhlY3V0b3JJZDogdGhpcy5fZHJvcHBhYmxlQ2VsbC5kYXRhc2V0LmV4ZWN1dG9yLFxuICAgICAgc3RhcnREYXRlOiB0aGlzLl9kcm9wcGFibGVDZWxsLmRhdGFzZXQuZGF0ZSxcbiAgICB9KTtcbiAgICB0aGlzLl9oYW5kbGVEcmFnTGVhdmUoKTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIHRoaXMuX2hhbmRsZURyYWdPdmVyKTtcbiAgICB0aGlzLl9jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2xlYXZlJywgdGhpcy5faGFuZGxlRHJhZ0xlYXZlKTtcbiAgICB0aGlzLl9jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIHRoaXMuX2hhbmRsZURyb3ApO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENhbGVuZGFyO1xuIiwiZXhwb3J0IGNvbnN0IEJBU0VfVVJMID1cbiAgJ2h0dHBzOi8vdmFyYW5raW5fZGV2LmVsbWEzNjUucnUvYXBpL2V4dGVuc2lvbnMvMmEzODc2MGUtMDgzYS00ZGQwLWFlYmMtNzhiNTcwYmZkM2M3L3NjcmlwdCc7XG5leHBvcnQgY29uc3QgVVNFUlNfUk9VVEUgPSAnL3VzZXJzJztcbmV4cG9ydCBjb25zdCBUQVNLU19ST1VURSA9ICcvdGFza3MnO1xuIiwiaW1wb3J0IHsgc2VhcmNoRm9ybVNlbGVjdG9ycywgdGltZXJEZWxheSB9IGZyb20gJy4uL2NvbmZpZy9jb25zdGFudHMnO1xuaW1wb3J0IFByb2plY3RTdGF0ZSBmcm9tICcuLi9zdGF0ZS9Qcm9qZWN0U3RhdGUnO1xuXG5jb25zdCBpbml0U2VhcmNoID0gKGNvbnRhaW5lciwgY3JlYXRlQ2FyZENhbGxiYWNrLCByZW5kZXJDYWxsYmFjaykgPT4ge1xuICBjb25zdCBzZWFyY2hGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWFyY2hGb3JtU2VsZWN0b3JzLnNlYXJjaEZvcm0pO1xuICBjb25zdCBzZWFyY2hJbnB1dCA9IHNlYXJjaEZvcm0ucXVlcnlTZWxlY3RvcihzZWFyY2hGb3JtU2VsZWN0b3JzLnNlYXJjaElucHV0KTtcbiAgY29uc3Qgc3VibWl0QnV0dG9uID0gc2VhcmNoRm9ybS5xdWVyeVNlbGVjdG9yKHNlYXJjaEZvcm1TZWxlY3RvcnMuc3VibWl0QnV0dG9uKTtcblxuICBjb25zdCBoYW5kbGVTZWFyY2ggPSAoZXZ0KSA9PiB7XG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3Qga2V5d29yZCA9IHNlYXJjaElucHV0LnZhbHVlO1xuICAgIGxldCByZXN1bHQ7XG4gICAgaWYgKGtleXdvcmQubGVuZ3RoKSB7XG4gICAgICByZXN1bHQgPSBQcm9qZWN0U3RhdGUuYmFja2xvZ1Rhc2tzLmZpbHRlcigodGFzaykgPT5cbiAgICAgICAgdGFzay5zdWJqZWN0LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoa2V5d29yZC50b0xvd2VyQ2FzZSgpKVxuICAgICAgKTtcbiAgICAgIGNvbnRhaW5lci5jbGVhckl0ZW1zKCk7XG5cbiAgICAgIGlmIChyZXN1bHQubGVuZ3RoKSB7XG4gICAgICAgIHJlc3VsdC5mb3JFYWNoKCh0YXNrKSA9PiB7XG4gICAgICAgICAgY29uc3QgYmFja2xvZ0NhcmQgPSBjcmVhdGVDYXJkQ2FsbGJhY2sodGFzayk7XG4gICAgICAgICAgY29udGFpbmVyLmFkZEl0ZW0oYmFja2xvZ0NhcmQpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnRhaW5lci5hZGRUZXh0Q29udGVudCgn0J3QuNGH0LXQs9C+INC90LUg0L3QsNGI0LvQvtGB0YwnKTtcbiAgICAgICAgc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgY29udGFpbmVyLmNsZWFySXRlbXMoKTtcbiAgICAgICAgICByZW5kZXJDYWxsYmFjaygpO1xuICAgICAgICAgIHN1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICB9LCB0aW1lckRlbGF5KTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgc2VhcmNoRm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBoYW5kbGVTZWFyY2gpO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgaW5pdFNlYXJjaDtcbiIsImltcG9ydCBQcm9qZWN0U3RhdGUgZnJvbSAnLi4vc3RhdGUvUHJvamVjdFN0YXRlJztcbmltcG9ydCB7IGZ1bGxEYXlJbk1pbGxpc2Vjb25kcywgd2Vla0J1dHRvbnNTZWxlY3RvcnMgfSBmcm9tICcuLi9jb25maWcvY29uc3RhbnRzJztcblxuY29uc3QgaW5pdFN3aXRjaEJldHdlZW5XZWVrcyA9IChjbGVhckNvbnRhaW5lckNhbGxiYWNrLCBjbGVhckRhdGVzQ2FsbGJhY2ssIHJlbmRlckNhbGxiYWNrKSA9PiB7XG4gIGNvbnN0IHNob3dOZXh0V2VlayA9ICgpID0+IHtcbiAgICBjbGVhckNvbnRhaW5lckNhbGxiYWNrKCk7XG4gICAgY2xlYXJEYXRlc0NhbGxiYWNrKCk7XG4gICAgUHJvamVjdFN0YXRlLnN0YXJ0RGF5ICs9IGZ1bGxEYXlJbk1pbGxpc2Vjb25kcyAqIDc7XG4gICAgcmVuZGVyQ2FsbGJhY2soKTtcbiAgfTtcblxuICBjb25zdCBzaG93UHJldldlZWsgPSAoKSA9PiB7XG4gICAgY2xlYXJDb250YWluZXJDYWxsYmFjaygpO1xuICAgIGNsZWFyRGF0ZXNDYWxsYmFjaygpO1xuICAgIFByb2plY3RTdGF0ZS5zdGFydERheSAtPSBmdWxsRGF5SW5NaWxsaXNlY29uZHMgKiA3O1xuICAgIHJlbmRlckNhbGxiYWNrKCk7XG4gIH07XG5cbiAgY29uc3QgbmV4dFdlZWtCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHdlZWtCdXR0b25zU2VsZWN0b3JzLm5leHRXZWVrQnV0dG9uKTtcbiAgY29uc3QgcHJldldlZWtCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHdlZWtCdXR0b25zU2VsZWN0b3JzLnByZXZXZWVrQnV0dG9uKTtcblxuICBuZXh0V2Vla0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNob3dOZXh0V2Vlayk7XG4gIHByZXZXZWVrQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2hvd1ByZXZXZWVrKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGluaXRTd2l0Y2hCZXR3ZWVuV2Vla3M7XG4iLCJpbXBvcnQgeyBsb2NhbFN0b3JhZ2VUaGVtZUtleSB9IGZyb20gJy4uL2NvbmZpZy9jb25zdGFudHMnO1xuXG5jb25zdCBpbml0VG9nZ2xlQ29sb3JUaGVtZSA9ICh7IGJvZHlTZWxlY3RvciwgYm9keU5ld1RoZW1lQ2xhc3MsIGJ1dHRvblNlbGVjdG9yIH0pID0+IHtcbiAgY29uc3QgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYm9keVNlbGVjdG9yKTtcbiAgY29uc3QgY2hhbmdlQ29sb3JUaGVtZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYnV0dG9uU2VsZWN0b3IpO1xuXG4gIGNvbnN0IGlzVGhlbWVEYXJrID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShsb2NhbFN0b3JhZ2VUaGVtZUtleSkpO1xuXG4gIGlmIChpc1RoZW1lRGFyaykge1xuICAgIGJvZHkuY2xhc3NMaXN0LmFkZChib2R5TmV3VGhlbWVDbGFzcyk7XG4gIH1cblxuICBjb25zdCB0b2dnbGVBbmRNZW1vVGhlbWUgPSAoKSA9PiB7XG4gICAgaWYgKGJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKGJvZHlOZXdUaGVtZUNsYXNzKSkge1xuICAgICAgYm9keS5jbGFzc0xpc3QucmVtb3ZlKGJvZHlOZXdUaGVtZUNsYXNzKTtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGxvY2FsU3RvcmFnZVRoZW1lS2V5LCBKU09OLnN0cmluZ2lmeShmYWxzZSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBib2R5LmNsYXNzTGlzdC5hZGQoYm9keU5ld1RoZW1lQ2xhc3MpO1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0obG9jYWxTdG9yYWdlVGhlbWVLZXksIEpTT04uc3RyaW5naWZ5KHRydWUpKTtcbiAgICB9XG4gIH07XG5cbiAgY2hhbmdlQ29sb3JUaGVtZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZUFuZE1lbW9UaGVtZSk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBpbml0VG9nZ2xlQ29sb3JUaGVtZTtcbiJdLCJuYW1lcyI6WyJBU1NJR05fQllfREFURSIsImJhY2tsb2dDYXJkU2VsZWN0b3JzIiwicGFyZW50U2VsZWN0b3IiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwiZWxlbWVudFNlbGVjdG9yIiwidGl0bGVTZWxlY3RvciIsImRlc2NyaXB0aW9uU2VsZWN0b3IiLCJzdGFydERhdGVTZWxlY3RvciIsImVuZERhdGVTZWxlY3RvciIsImRyYWdTdGFydENsYXNzIiwidXNlcnNDYXJkU2VsZWN0b3JzIiwidXNlck5hbWVTZWxlY3RvciIsImRyYWdPdmVyQ2xhc3MiLCJjYWxlbmRhckRhdGVTZWxlY3RvcnMiLCJjdXJyZW50RGF5Q2xhc3MiLCJjYWxlbmRhckNvbHVtblNlbGVjdG9ycyIsImNhbGVuZGFyQ2VsbFNlbGVjdG9ycyIsImVsZW1lbnRDbGFzcyIsImNhbGVuZGFyVGFza1NlbGVjdG9ycyIsInN1YnRpdGxlU2VsZWN0b3IiLCJkYXRlU2V0dGluZ3MiLCJ3ZWVrZGF5IiwieWVhciIsIm1vbnRoIiwiZGF5IiwibG9jYWxTdG9yYWdlVGhlbWVLZXkiLCJyZWZpbmVUb1N0cmluZyIsImRhdGUiLCJEYXRlIiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwicmVmaW5lVG9OdW1lcmljWVlNTUREIiwiY29uc3RydWN0b3IiLCJ0aGlzIiwiX3N1YnNjcmliZXJzIiwiX2Fzc2lnbmVkVGFza3MiLCJfYmFja2xvZ1Rhc2tzIiwiX3VzZXJzIiwiX3VzZXJzSWRzIiwiX2NhbGVuZGFyTGVuZ3RoIiwiX2N1cnJlbnREYXRlIiwiX2N1cnJlbnREYXRlTnVtZXJpYyIsIl9zdGFydERheSIsIl91cGRhdGVBbmRTZXREYXRlcyIsIl9yZW1vdmVUYXNrRnJvbUJhY2tsb2ciLCJ0YXNrSWQiLCJmaWx0ZXIiLCJ0YXNrIiwiaWQiLCJfY2FsbFN1YnNjcmliZXJzIiwiZm9yRWFjaCIsImxpc3RlbmVyIiwic3RhcnREYXRlIiwic2V0SG91cnMiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsImdldERheSIsImFzc2lnbmVkVGFza3MiLCJiYWNrbG9nVGFza3MiLCJ1c2Vyc0lkcyIsInVzZXJzIiwidmFsdWUiLCJjYWxlbmRhckxlbmd0aCIsInN0YXJ0RGF5IiwiY3VycmVudERhdGVOdW1lcmljIiwiYWRkVGFza1RvQXNzaWduZWRUYXNrcyIsInB1c2giLCJhc3NpZ25UYXNrIiwidHlwZSIsImV4ZWN1dG9ySWQiLCJ0YXNrVG9CZUFzc2lnbmVkIiwiZmluZCIsImV4ZWN1dG9yIiwicGFyc2UiLCJwbGFuRW5kRGF0ZSIsInBsYW5TdGFydERhdGUiLCJkYXRlRGlmZmVyZW5jZSIsIm5ld0VuZERhdGUiLCJhZGRUYXNrVG9CYWNrbG9nIiwibWFwVXNlcnNJZHMiLCJpZHMiLCJyZWR1Y2UiLCJvYmoiLCJpIiwiYWRkU3Vic2NyaWJlcnMiLCJzdWJzY3JpYmVycyIsImFzeW5jIiwicm91dGUiLCJyZXMiLCJmZXRjaCIsIm1ldGhvZCIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJfdGVtcGxhdGVTZWxlY3RvciIsIl9lbGVtZW50U2VsZWN0b3IiLCJfZ2V0VGVtcGxhdGUiLCJfdGVtcGxhdGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiY2FyZERhdGEiLCJzdXBlciIsIl9jYXJkRGF0YSIsIl9iYWNrbG9nQ2FyZCIsIl9kcmFnU3RhcnRDbGFzcyIsIl9jYXJkVGl0bGUiLCJfY2FyZERlc2NyaXB0aW9uIiwiX2NhcmRTdGFydERhdGUiLCJfY2FyZEVuZERhdGUiLCJfaGFuZGxlRHJhZ1N0YXJ0IiwiYmluZCIsIl9oYW5kbGVEcmFnRW5kIiwiZXZ0IiwiY2xhc3NMaXN0IiwiYWRkIiwiZGF0YVRyYW5zZmVyIiwic2V0RGF0YSIsImVmZmVjdEFsbG93ZWQiLCJyZW1vdmUiLCJjcmVhdGVFbGVtZW50IiwidGV4dENvbnRlbnQiLCJzdWJqZWN0IiwiZGVzY3JpcHRpb24iLCJzZXRBdHRyaWJ1dGUiLCJzZXRFdmVudExpc3RlbmVycyIsImFkZEV2ZW50TGlzdGVuZXIiLCJjb250YWluZXJTZWxlY3RvciIsIl9jb250YWluZXIiLCJjbGVhckl0ZW1zIiwiYWRkSXRlbSIsIml0ZW0iLCJhcHBlbmQiLCJhZGRUZXh0Q29udGVudCIsIl90YXNrIiwiX3Rhc2tFbGVtZW50IiwiX3RpdGxlRUxlbWVudCIsIl9zdWJ0aXRsZUVMZW1lbnQiLCJfZGVzY3JpcHRpb25FbGVtZW50IiwiX3N0YXJ0RGF0ZUVsZW1lbnQiLCJfZW5kRGF0ZUVsZW1lbnQiLCJjZWxsIiwiX2NlbGwiLCJfY2VsbEVsZW1lbnQiLCJfYWRkSXRlbSIsInJlbmRlckl0ZW1zIiwidGFza3MiLCJuZXdUYXNrIiwiY29sdW1uIiwiX2NvbHVtbiIsIl9jYWxlbmRhckNvbHVtbiIsIl9kYXlUYXNrc1NjaGVtYSIsIl9nZXRUYXNrc0ZvckN1cnJlbnREYXkiLCJwYXJzZWRDb2x1bW5EYXRlIiwiX2dldERheVRhc2tzU2NoZW1hIiwiX3Rhc2tzRm9yQ3VycmVudERheSIsImNyZWF0ZUNlbGxzIiwidXNlcklkIiwiY29sdW1uQ2VsbCIsImNlbGxFbGVtZW50IiwiX2RhdGUiLCJfY3VycmVudERheUNsYXNzIiwiX2RhdGVFbGVtZW50IiwiY2VsbERhdGUiLCJfdXNlckNhcmQiLCJfZnVsbE5hbWVFbGVtZW50IiwiX2RyYWdPdmVyQ2xhc3MiLCJfaGFuZGxlRHJhZ092ZXIiLCJfaGFuZGxlRHJhZ0xlYXZlIiwiX2hhbmRsZURyb3AiLCJ0eXBlcyIsInByZXZlbnREZWZhdWx0IiwiZ2V0RGF0YSIsImNyZWF0ZUNhcmQiLCJmaXJzdE5hbWUiLCJzdXJuYW1lIiwicmVtb3ZlQW5pbWF0aW9uIiwiZWxlbWVudCIsInNldFRpbWVvdXQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJhcHBseVNsaWRlSW5Cb3R0b21VcEFuaW0iLCJpbmRleCIsImFwcGx5U2xpZGVJblJpZ2h0TGVmdEFuaW0iLCJwYWdlIiwicHJlbG9hZGVyIiwicG9wdXBFcnJvciIsInNlbGVjdG9ycyIsIl9zZWxlY3RvcnMiLCJfcG9wdXAiLCJvcGVuIiwicG9wdXBPcGVuQ2xhc3MiLCJfY2xvc2UiLCJiYWNrbG9nTGlzdCIsInVzZXJzTGlzdCIsImRhdGVzQ29udGFpbmVyIiwiY2FsZW5kYXJDb250YWluZXIiLCJ0YXJnZXQiLCJjb250YWlucyIsIl9kcm9wcGFibGVDZWxsIiwiY2xvc2VzdCIsImRhdGFzZXQiLCJyZW5kZXJDYWxlbmRhciIsImlzQW5pbWF0ZWQiLCJ0aGlzRGF0ZSIsImRhdGVTdHJpbmciLCJkYXRlT2JqZWN0IiwiY29sdW1uT2JqZWN0IiwiZGF0ZUVsZW1lbnQiLCJjb2x1bW5FbGVtZW50IiwiY3JlYXRlQmFja2xvZ0NhcmQiLCJiYWNrbG9nQ2FyZCIsIm5ld0JhY2tsb2dDYXJkIiwicmVuZGVyQmFja2xvZ1Rhc2tzIiwidXNlciIsInVzZXJDYXJkIiwibmV3VXNlckNhcmQiLCJyZW5kZXJVc2VycyIsImVyciIsImdldEluaXRpYWxEYXRhIiwiY29udGFpbmVyIiwiY3JlYXRlQ2FyZENhbGxiYWNrIiwicmVuZGVyQ2FsbGJhY2siLCJzZWFyY2hGb3JtIiwic2VhcmNoSW5wdXQiLCJzdWJtaXRCdXR0b24iLCJrZXl3b3JkIiwicmVzdWx0IiwibGVuZ3RoIiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlcyIsImRpc2FibGVkIiwiY2xlYXJDb250YWluZXJDYWxsYmFjayIsImNsZWFyRGF0ZXNDYWxsYmFjayIsIm5leHRXZWVrQnV0dG9uIiwicHJldldlZWtCdXR0b24iLCJmdWxsRGF5SW5NaWxsaXNlY29uZHMiLCJib2R5U2VsZWN0b3IiLCJib2R5TmV3VGhlbWVDbGFzcyIsImJ1dHRvblNlbGVjdG9yIiwiYm9keSIsImNoYW5nZUNvbG9yVGhlbWVCdXR0b24iLCJKU09OIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJidXR0b25OZXdUaGVtZUNsYXNzIl0sInNvdXJjZVJvb3QiOiIifQ==