(()=>{"use strict";const e="assignByDate",t={parentSelector:".backlog__tasks-container",templateSelector:".template-card-backlog",elementSelector:".card-backlog",titleSelector:".card-backlog__title",descriptionSelector:".card-backlog__description",startDateSelector:".card-backlog__date-span_start",endDateSelector:".card-backlog__date-span_end",dragStartClass:"card-backlog_draggable"},a={parentSelector:".board__users",templateSelector:".template-card-user",elementSelector:".card-user",userNameSelector:".card-user__name",dragOverClass:"card-user_drag-over"},s={parentSelector:".board__dates",templateSelector:".template-calendar-date",elementSelector:".calendar-date",currentDayClass:"calendar-date_current"},r={parentSelector:".board__calendar",templateSelector:".template-calendar-column",elementSelector:".calendar-column"},l={templateSelector:".template-calendar-cell",elementSelector:".calendar-cell",elementClass:"calendar-cell",dragOverClass:"calendar-cell_drag-over"},n={templateSelector:".template-calendar-task",elementSelector:".calendar-task",elementClass:"calendar-task",titleSelector:".calendar-task__title",subtitleSelector:".calendar-task__subtitle",descriptionSelector:".calendar-task__description",startDateSelector:".calendar-task__date-span_start",endDateSelector:".calendar-task__date-span_end"},c="ru-RU",i={weekday:"short",year:"numeric",month:"short",day:"numeric"},d={day:"numeric",month:"numeric"},o="isThemeDark",h=e=>new Date(e).toLocaleDateString(c,i),_=e=>new Date(e).toLocaleDateString("en-CA"),u=new class{constructor(){this._subscribers=[],this._assignedTasks=[],this._backlogTasks=[],this._users=[],this._usersIds={},this._calendarLength=7,this._currentDate=new Date,this._currentDateNumeric=_(new Date),this._startDay=this._updateAndSetDates()}_removeTaskFromBacklog(e){this._backlogTasks=this._backlogTasks.filter((t=>t.id!==e))}_callSubscribers(){this._subscribers.forEach((e=>e()))}_updateAndSetDates(){const e=new Date(this._currentDate.setHours(0,0,0,0));return e.setDate(e.getDate()-e.getDay()+(0===e.getDay()?-6:1))}get assignedTasks(){return this._assignedTasks}get backlogTasks(){return this._backlogTasks}get usersIds(){return this._usersIds}set users(e){this._users=e}get users(){return this._users}get calendarLength(){return this._calendarLength}get startDay(){return this._startDay}set startDay(e){this._startDay=e}get currentDateNumeric(){return this._currentDateNumeric}addTaskToAssignedTasks(e){this._assignedTasks.push(e)}assignTask({type:t,taskId:a,executorId:s,startDate:r}){const l=this._backlogTasks.find((e=>a===e.id));if(l.executor=+s,t===e){if(this._currentDate>Date.parse(r))return;if(l.planEndDate===l.planStartDate)l.planEndDate=r;else{const e=Date.parse(l.planEndDate)-Date.parse(l.planStartDate),t=Date.parse(r)+e;l.planEndDate=_(t)}l.planStartDate=r}this.addTaskToAssignedTasks(l),this._removeTaskFromBacklog(a),this._callSubscribers()}addTaskToBacklog(e){this._backlogTasks.push(e)}mapUsersIds(e){const t=e.reduce(((e,{id:t},a)=>({...e,[a]:t})),{});this._usersIds={...t}}addSubscribers(e){this._subscribers=[...e]}},m=async e=>{return(t=await fetch(`https://varankin_dev.elma365.ru/api/extensions/2a38760e-083a-4dd0-aebc-78b570bfd3c7/script${e}`,{method:"GET"})).ok?t.json():Promise.reject(t);var t},p=class{constructor({templateSelector:e,elementSelector:t}){this._templateSelector=e,this._elementSelector=t}_getTemplate(){return this._template=document.querySelector(this._templateSelector).content,this._template.querySelector(this._elementSelector).cloneNode(!0)}},g=class extends p{constructor(e,{templateSelector:t,elementSelector:a,titleSelector:s,descriptionSelector:r,startDateSelector:l,endDateSelector:n,dragStartClass:c}){super({templateSelector:t,elementSelector:a}),this._cardData=e,this._backlogCard=super._getTemplate(),this._dragStartClass=c,this._cardTitle=this._backlogCard.querySelector(s),this._cardDescription=this._backlogCard.querySelector(r),this._cardStartDate=this._backlogCard.querySelector(l),this._cardEndDate=this._backlogCard.querySelector(n),this._handleDragStart=this._handleDragStart.bind(this),this._handleDragEnd=this._handleDragEnd.bind(this)}_handleDragStart(e){this._backlogCard.classList.add(this._dragStartClass),e.dataTransfer.setData("text/plain",this._cardData.id),e.dataTransfer.effectAllowed="move"}_handleDragEnd(){this._backlogCard.classList.remove(this._dragStartClass)}createElement(){return this._cardTitle.textContent=this._cardData.subject,this._cardDescription.textContent=this._cardData.description,this._cardStartDate.textContent=h(this._cardData.planStartDate),this._cardEndDate.textContent=h(this._cardData.planEndDate),this._backlogCard.setAttribute("id",this._cardData.id),this._backlogCard}setEventListeners(){this._backlogCard.addEventListener("dragstart",this._handleDragStart),this._backlogCard.addEventListener("dragend",this._handleDragEnd)}},S=class{constructor(e){this._container=document.querySelector(e),this.clearItems=this.clearItems.bind(this)}addItem(e){this._container.append(e)}clearItems(){this._container.textContent=""}addTextContent(e){this._container.textContent=e}},D=class extends p{constructor(e,{templateSelector:t,elementSelector:a,titleSelector:s,subtitleSelector:r,descriptionSelector:l,startDateSelector:n,endDateSelector:c}){super({templateSelector:t,elementSelector:a}),this._task=e,this._taskElement=super._getTemplate(),this._titleELement=this._taskElement.querySelector(s),this._subtitleELement=this._taskElement.querySelector(r),this._descriptionElement=this._taskElement.querySelector(l),this._startDateElement=this._taskElement.querySelector(n),this._endDateElement=this._taskElement.querySelector(c)}createElement(){return this._titleELement.textContent=this._task.subject,this._subtitleELement.textContent=this._task.subject,this._descriptionElement.textContent=this._task.description,this._startDateElement.textContent=h(this._task.planStartDate),this._endDateElement.textContent=h(this._task.planEndDate),this._taskElement}},k=class extends p{constructor(e,{templateSelector:t,elementSelector:a}){super({templateSelector:t,elementSelector:a}),this._cell=e,this._cellElement=super._getTemplate()}_addItem(e){this._cellElement.append(e)}createElement(){return this._cellElement.setAttribute("data-executor",this._cell.executor),this._cellElement.setAttribute("data-date",this._cell.date),this._cellElement}renderItems(){this._cell.tasks.forEach((e=>{const t=new D(e,n);this._addItem(t.createElement())}))}},b=class extends p{constructor(e,{templateSelector:t,elementSelector:a}){super({templateSelector:t,elementSelector:a}),this._column=e,this._calendarColumn=super._getTemplate(),this._dayTasksSchema={}}_getTasksForCurrentDay(e){const t=Date.parse(this._column.date);return e.filter((e=>Date.parse(e.planStartDate)<=t&&t<=Date.parse(e.planEndDate)))}_getDayTasksSchema(){this._tasksForCurrentDay=this._getTasksForCurrentDay(u.assignedTasks),this._tasksForCurrentDay&&this._tasksForCurrentDay.forEach((e=>{this._dayTasksSchema[e.executor]?this._dayTasksSchema[e.executor]=[...this._dayTasksSchema[e.executor],e]:this._dayTasksSchema[e.executor]=[e]}))}createCells(){this._getDayTasksSchema();for(let e=0;e<u.users.length;e+=1){const t=u.usersIds[e],a=new k({executor:t,date:this._column.date,tasks:this._dayTasksSchema[t]??[]},l),s=a.createElement();a.renderItems(),this.addItem(s)}}createElement(){return this.createCells(),this._calendarColumn}addItem(e){this._calendarColumn.append(e)}},C=class extends p{constructor({date:e},{templateSelector:t,elementSelector:a,currentDayClass:s}){super({templateSelector:t,elementSelector:a}),this._date=e,this._currentDayClass=s,this._dateElement=super._getTemplate()}createElement(){const e=new Date(this._date);return this._dateElement.textContent=new Date(e).toLocaleDateString(c,d),this._date===u.currentDateNumeric&&this._dateElement.classList.add(this._currentDayClass),this._dateElement}},E=class extends p{constructor(e,{templateSelector:t,elementSelector:a,userNameSelector:s,dragOverClass:r}){super({templateSelector:t,elementSelector:a}),this._cardData=e,this._userCard=super._getTemplate(),this._fullNameElement=this._userCard.querySelector(s),this._dragOverClass=r,this._handleDragOver=this._handleDragOver.bind(this),this._handleDragLeave=this._handleDragLeave.bind(this),this._handleDrop=this._handleDrop.bind(this)}_handleDragOver(e){e.dataTransfer&&"text/plain"===e.dataTransfer.types[0]&&(e.preventDefault(),this._userCard.classList.add(this._dragOverClass))}_handleDragLeave(){this._userCard.classList.remove(this._dragOverClass)}_handleDrop(e){e.preventDefault();const t=e.dataTransfer.getData("text/plain");u.assignTask({type:"assignByUser",taskId:t,executorId:this._cardData.id}),this._handleDragLeave()}createCard(){return this._fullNameElement.textContent=`${this._cardData.firstName} ${this._cardData.surname}`,this._userCard}setEventListeners(){this._userCard.addEventListener("dragover",this._handleDragOver),this._userCard.addEventListener("dragleave",this._handleDragLeave),this._userCard.addEventListener("drop",this._handleDrop)}},y=e=>{setTimeout((()=>{e.removeAttribute("style")}),1100)},v=(e,t,a)=>{t<=a&&(e.setAttribute("style",`animation: slide-in-bottom-up 0.5s ease-out 0.${t}s forwards; opacity: 0;`),y(e))},T=(e,t,a)=>{t<=a&&(e.setAttribute("style",`animation: slide-in-right-left 0.5s ease-out 0.${t}s forwards; opacity: 0;`),y(e))},L=document.querySelector(".page"),f=document.querySelector(".preloader"),x=new class{constructor(e){this._selectors=e,this._popup=document.querySelector(e.popupError)}open(){this._popup.classList.add(this._selectors.popupOpenClass),this._close()}_close(){setTimeout((()=>{this._popup.classList.remove(this._selectors.popupOpenClass)}),3e3)}}({popupError:".popup_error",popupOpenClass:"popup_open"}),I=new S(t.parentSelector),w=new S(a.parentSelector),q=new S(s.parentSelector),O=new class extends S{constructor(e){super(e),this._handleDragOver=this._handleDragOver.bind(this),this._handleDragLeave=this._handleDragLeave.bind(this),this._handleDrop=this._handleDrop.bind(this)}_handleDragOver(e){const{target:t}=e;e.dataTransfer&&"text/plain"===e.dataTransfer.types[0]&&(t.classList.contains(l.elementClass)||t.classList.contains(n.elementClass))&&(e.preventDefault(),this._droppableCell=t.closest(l.elementSelector),this._droppableCell.classList.add(l.dragOverClass))}_handleDragLeave(){this._droppableCell.classList.remove(l.dragOverClass)}_handleDrop(t){t.preventDefault();const a=t.dataTransfer.getData("text/plain");u.assignTask({type:e,taskId:a,executorId:this._droppableCell.dataset.executor,startDate:this._droppableCell.dataset.date}),this._handleDragLeave()}setEventListeners(){this._container.addEventListener("dragover",this._handleDragOver),this._container.addEventListener("dragleave",this._handleDragLeave),this._container.addEventListener("drop",this._handleDrop)}}(r.parentSelector);O.setEventListeners();const N=e=>{for(let t=0;t<u.calendarLength;t+=1){const a=u.startDay+864e5*t,l=_(a),n=new C({date:l},s),c=new b({date:l},r),i=n.createElement(),d=c.createElement();e&&(T(i,t,u.calendarLength-1),T(d,t,u.calendarLength-1)),q.addItem(i),O.addItem(d)}},A=e=>{const a=new g(e,t),s=a.createElement();return a.setEventListeners(),s},F=e=>{u.backlogTasks.forEach(((t,a)=>{const s=A(t);e&&v(s,a,6),I.addItem(s)}))};(async()=>{try{const e=await m("/users");(await m("/tasks")).forEach((e=>{e.executor?u.addTaskToAssignedTasks(e):u.addTaskToBacklog(e)})),u.users=e,u.mapUsersIds(e),((e,t)=>{e.forEach(((e,t)=>{const s=new E(e,a),r=s.createCard();v(r,t,4),s.setEventListeners(),w.addItem(r)}))})(e),N(!0),F(!0)}catch(e){x.open()}L.classList.remove("page_hidden"),f.classList.remove("preloader_visible")})(),((e,t,a)=>{const s=document.querySelector(".search-form"),r=s.querySelector(".search-form__input"),l=s.querySelector(".button_search");s.addEventListener("submit",(s=>{s.preventDefault();const n=r.value;let c;n.length&&(c=u.backlogTasks.filter((e=>e.subject.toLowerCase().includes(n.toLowerCase()))),e.clearItems(),c.length?c.forEach((a=>{const s=t(a);e.addItem(s)})):(e.addTextContent("Ничего не нашлось"),l.disabled=!0,setTimeout((()=>{e.clearItems(),a(),l.disabled=!1}),3e3)))}))})(I,A,F),((e,t,a)=>{const s=document.querySelector(".button_next"),r=document.querySelector(".button_prev");s.addEventListener("click",(()=>{e(),t(),u.startDay+=6048e5,a()})),r.addEventListener("click",(()=>{e(),t(),u.startDay-=6048e5,a()}))})(O.clearItems,q.clearItems,N),(({bodySelector:e,bodyNewThemeClass:t,buttonSelector:a})=>{const s=document.querySelector(e),r=document.querySelector(a);JSON.parse(localStorage.getItem(o))&&s.classList.add(t),r.addEventListener("click",(()=>{s.classList.contains(t)?(s.classList.remove(t),localStorage.setItem(o,JSON.stringify(!1))):(s.classList.add(t),localStorage.setItem(o,JSON.stringify(!0)))}))})({bodySelector:".body",bodyNewThemeClass:"body_theme_dark",buttonSelector:".button_theme",buttonNewThemeClass:"button_theme_dark"}),u.addSubscribers([O.clearItems,I.clearItems,q.clearItems,N,F])})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFdBQVUsU05tR2hFLENickhtQyxDQUNqQ1QsYUFBYyxRQUNkQyxrQkFBbUIsa0JBQ25CQyxlQUFnQixnQkFDaEJRLG9CQUFxQixzQmFvSHZCLGlCQUE0QixDQUMxQm5ELEVBQWtCbkUsV0FDbEJnRSxFQUFZaEUsV0FDWmtFLEVBQWVsRSxXQUNmeUUsRUFDQVcsSyIsInNvdXJjZXMiOlsid2VicGFjazovL3Rlc3QtZWxtYS8uL3NyYy9zdGF0ZS90eXBlcy5qcyIsIndlYnBhY2s6Ly90ZXN0LWVsbWEvLi9zcmMvY29uZmlnL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly90ZXN0LWVsbWEvLi9zcmMvdXRpbHMvaGFuZGxlLWRhdGVzLmpzIiwid2VicGFjazovL3Rlc3QtZWxtYS8uL3NyYy9zdGF0ZS9Qcm9qZWN0U3RhdGUuanMiLCJ3ZWJwYWNrOi8vdGVzdC1lbG1hLy4vc3JjL2FwaS9tYWluLWFwaS5qcyIsIndlYnBhY2s6Ly90ZXN0LWVsbWEvLi9zcmMvY29tcG9uZW50cy9Db21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vdGVzdC1lbG1hLy4vc3JjL2NvbXBvbmVudHMvQmFja2xvZ0NhcmQuanMiLCJ3ZWJwYWNrOi8vdGVzdC1lbG1hLy4vc3JjL2NvbXBvbmVudHMvUmVuZGVyZXJTZWN0aW9uLmpzIiwid2VicGFjazovL3Rlc3QtZWxtYS8uL3NyYy9jb21wb25lbnRzL0NhbGVuZGFyVGFzay5qcyIsIndlYnBhY2s6Ly90ZXN0LWVsbWEvLi9zcmMvY29tcG9uZW50cy9DYWxlbmRhckNlbGwuanMiLCJ3ZWJwYWNrOi8vdGVzdC1lbG1hLy4vc3JjL2NvbXBvbmVudHMvQ2FsZW5kYXJDb2x1bW4uanMiLCJ3ZWJwYWNrOi8vdGVzdC1lbG1hLy4vc3JjL2NvbXBvbmVudHMvQ2FsZW5kYXJEYXRlLmpzIiwid2VicGFjazovL3Rlc3QtZWxtYS8uL3NyYy9jb21wb25lbnRzL1VzZXJDYXJkLmpzIiwid2VicGFjazovL3Rlc3QtZWxtYS8uL3NyYy91dGlscy9hcHBseS1zdHlsZS1hbmltYXRpb24uanMiLCJ3ZWJwYWNrOi8vdGVzdC1lbG1hLy4vc3JjL2FwcC5qcyIsIndlYnBhY2s6Ly90ZXN0LWVsbWEvLi9zcmMvY29tcG9uZW50cy9Qb3B1cEVycm9yLmpzIiwid2VicGFjazovL3Rlc3QtZWxtYS8uL3NyYy9jb21wb25lbnRzL0NhbGVuZGFyLmpzIiwid2VicGFjazovL3Rlc3QtZWxtYS8uL3NyYy9jb25maWcvY29uZmlnLmpzIiwid2VicGFjazovL3Rlc3QtZWxtYS8uL3NyYy91dGlscy9zZWFyY2guanMiLCJ3ZWJwYWNrOi8vdGVzdC1lbG1hLy4vc3JjL3V0aWxzL3N3aXRjaC1iZXR3ZWVuLXdlZWtzLmpzIiwid2VicGFjazovL3Rlc3QtZWxtYS8uL3NyYy91dGlscy90b2dnbGUtY29sb3ItdGhlbWUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IEFTU0lHTl9CWV9VU0VSID0gJ2Fzc2lnbkJ5VXNlcic7XG5leHBvcnQgY29uc3QgQVNTSUdOX0JZX0RBVEUgPSAnYXNzaWduQnlEYXRlJztcbiIsImV4cG9ydCBjb25zdCB0b2dnbGVUaGVtZVNldHRpbmdzID0ge1xuICBib2R5U2VsZWN0b3I6ICcuYm9keScsXG4gIGJvZHlOZXdUaGVtZUNsYXNzOiAnYm9keV90aGVtZV9kYXJrJyxcbiAgYnV0dG9uU2VsZWN0b3I6ICcuYnV0dG9uX3RoZW1lJyxcbiAgYnV0dG9uTmV3VGhlbWVDbGFzczogJ2J1dHRvbl90aGVtZV9kYXJrJyxcbn07XG5cbmV4cG9ydCBjb25zdCBiYWNrbG9nQ2FyZFNlbGVjdG9ycyA9IHtcbiAgcGFyZW50U2VsZWN0b3I6ICcuYmFja2xvZ19fdGFza3MtY29udGFpbmVyJyxcbiAgdGVtcGxhdGVTZWxlY3RvcjogJy50ZW1wbGF0ZS1jYXJkLWJhY2tsb2cnLFxuICBlbGVtZW50U2VsZWN0b3I6ICcuY2FyZC1iYWNrbG9nJyxcbiAgdGl0bGVTZWxlY3RvcjogJy5jYXJkLWJhY2tsb2dfX3RpdGxlJyxcbiAgZGVzY3JpcHRpb25TZWxlY3RvcjogJy5jYXJkLWJhY2tsb2dfX2Rlc2NyaXB0aW9uJyxcbiAgc3RhcnREYXRlU2VsZWN0b3I6ICcuY2FyZC1iYWNrbG9nX19kYXRlLXNwYW5fc3RhcnQnLFxuICBlbmREYXRlU2VsZWN0b3I6ICcuY2FyZC1iYWNrbG9nX19kYXRlLXNwYW5fZW5kJyxcbiAgZHJhZ1N0YXJ0Q2xhc3M6ICdjYXJkLWJhY2tsb2dfZHJhZ2dhYmxlJyxcbn07XG5cbmV4cG9ydCBjb25zdCB1c2Vyc0NhcmRTZWxlY3RvcnMgPSB7XG4gIHBhcmVudFNlbGVjdG9yOiAnLmJvYXJkX191c2VycycsXG4gIHRlbXBsYXRlU2VsZWN0b3I6ICcudGVtcGxhdGUtY2FyZC11c2VyJyxcbiAgZWxlbWVudFNlbGVjdG9yOiAnLmNhcmQtdXNlcicsXG4gIHVzZXJOYW1lU2VsZWN0b3I6ICcuY2FyZC11c2VyX19uYW1lJyxcbiAgZHJhZ092ZXJDbGFzczogJ2NhcmQtdXNlcl9kcmFnLW92ZXInLFxufTtcblxuZXhwb3J0IGNvbnN0IGNhbGVuZGFyRGF0ZVNlbGVjdG9ycyA9IHtcbiAgcGFyZW50U2VsZWN0b3I6ICcuYm9hcmRfX2RhdGVzJyxcbiAgdGVtcGxhdGVTZWxlY3RvcjogJy50ZW1wbGF0ZS1jYWxlbmRhci1kYXRlJyxcbiAgZWxlbWVudFNlbGVjdG9yOiAnLmNhbGVuZGFyLWRhdGUnLFxuICBjdXJyZW50RGF5Q2xhc3M6ICdjYWxlbmRhci1kYXRlX2N1cnJlbnQnLFxufTtcblxuZXhwb3J0IGNvbnN0IGNhbGVuZGFyQ29sdW1uU2VsZWN0b3JzID0ge1xuICBwYXJlbnRTZWxlY3RvcjogJy5ib2FyZF9fY2FsZW5kYXInLFxuICB0ZW1wbGF0ZVNlbGVjdG9yOiAnLnRlbXBsYXRlLWNhbGVuZGFyLWNvbHVtbicsXG4gIGVsZW1lbnRTZWxlY3RvcjogJy5jYWxlbmRhci1jb2x1bW4nLFxufTtcblxuZXhwb3J0IGNvbnN0IGNhbGVuZGFyQ2VsbFNlbGVjdG9ycyA9IHtcbiAgdGVtcGxhdGVTZWxlY3RvcjogJy50ZW1wbGF0ZS1jYWxlbmRhci1jZWxsJyxcbiAgZWxlbWVudFNlbGVjdG9yOiAnLmNhbGVuZGFyLWNlbGwnLFxuICBlbGVtZW50Q2xhc3M6ICdjYWxlbmRhci1jZWxsJyxcbiAgZHJhZ092ZXJDbGFzczogJ2NhbGVuZGFyLWNlbGxfZHJhZy1vdmVyJyxcbn07XG5cbmV4cG9ydCBjb25zdCBjYWxlbmRhclRhc2tTZWxlY3RvcnMgPSB7XG4gIHRlbXBsYXRlU2VsZWN0b3I6ICcudGVtcGxhdGUtY2FsZW5kYXItdGFzaycsXG4gIGVsZW1lbnRTZWxlY3RvcjogJy5jYWxlbmRhci10YXNrJyxcbiAgZWxlbWVudENsYXNzOiAnY2FsZW5kYXItdGFzaycsXG4gIHRpdGxlU2VsZWN0b3I6ICcuY2FsZW5kYXItdGFza19fdGl0bGUnLFxuICBzdWJ0aXRsZVNlbGVjdG9yOiAnLmNhbGVuZGFyLXRhc2tfX3N1YnRpdGxlJyxcbiAgZGVzY3JpcHRpb25TZWxlY3RvcjogJy5jYWxlbmRhci10YXNrX19kZXNjcmlwdGlvbicsXG4gIHN0YXJ0RGF0ZVNlbGVjdG9yOiAnLmNhbGVuZGFyLXRhc2tfX2RhdGUtc3Bhbl9zdGFydCcsXG4gIGVuZERhdGVTZWxlY3RvcjogJy5jYWxlbmRhci10YXNrX19kYXRlLXNwYW5fZW5kJyxcbn07XG5cbmV4cG9ydCBjb25zdCB3ZWVrQnV0dG9uc1NlbGVjdG9ycyA9IHtcbiAgbmV4dFdlZWtCdXR0b246ICcuYnV0dG9uX25leHQnLFxuICBwcmV2V2Vla0J1dHRvbjogJy5idXR0b25fcHJldicsXG59O1xuXG5leHBvcnQgY29uc3QgcG9wdXBTZWxlY3RvcnMgPSB7XG4gIHBvcHVwRXJyb3I6ICcucG9wdXBfZXJyb3InLFxuICBwb3B1cE9wZW5DbGFzczogJ3BvcHVwX29wZW4nLFxufTtcblxuZXhwb3J0IGNvbnN0IHNlYXJjaEZvcm1TZWxlY3RvcnMgPSB7XG4gIHNlYXJjaEZvcm06ICcuc2VhcmNoLWZvcm0nLFxuICBzZWFyY2hJbnB1dDogJy5zZWFyY2gtZm9ybV9faW5wdXQnLFxuICBzdWJtaXRCdXR0b246ICcuYnV0dG9uX3NlYXJjaCcsXG59O1xuXG5leHBvcnQgY29uc3QgcHJlbG9hZGVyU3RhdGVTZWxlY3RvcnMgPSB7XG4gIHBhZ2VTZWxlY3RvcjogJy5wYWdlJyxcbiAgcGFnZUhpZGRlbkNsYXNzOiAncGFnZV9oaWRkZW4nLFxuICBwcmVsb2FkZXJTZWxlY3RvcjogJy5wcmVsb2FkZXInLFxuICBwcmVsb2FkZXJWaXNpYmxlQ2xhc3M6ICdwcmVsb2FkZXJfdmlzaWJsZScsXG59O1xuXG5leHBvcnQgY29uc3QgZGF0ZVNldHRpbmdzID0ge1xuICBsb2NhbGU6ICdydS1SVScsXG4gIG9wdGlvbnM6IHtcbiAgICB3ZWVrZGF5OiAnc2hvcnQnLFxuICAgIHllYXI6ICdudW1lcmljJyxcbiAgICBtb250aDogJ3Nob3J0JyxcbiAgICBkYXk6ICdudW1lcmljJyxcbiAgfSxcbiAgbnVtZXJpYzoge1xuICAgIGRheTogJ251bWVyaWMnLFxuICAgIG1vbnRoOiAnbnVtZXJpYycsXG4gIH0sXG59O1xuXG5leHBvcnQgY29uc3QgbWF4SW5kZXhGb3JBbmltYXRpb24gPSB7XG4gIHVzZXJzOiA0LFxuICBiYWNrbG9nQ2FyZHM6IDYsXG59O1xuXG5leHBvcnQgY29uc3QgZnVsbERheUluTWlsbGlzZWNvbmRzID0gMzYwMCAqIDI0ICogMTAwMDtcbmV4cG9ydCBjb25zdCB0aW1lckRlbGF5ID0gMzAwMDtcbmV4cG9ydCBjb25zdCBsb2NhbFN0b3JhZ2VUaGVtZUtleSA9ICdpc1RoZW1lRGFyayc7XG4iLCJpbXBvcnQgeyBkYXRlU2V0dGluZ3MgfSBmcm9tICcuLi9jb25maWcvY29uc3RhbnRzJztcblxuY29uc3QgcmVmaW5lVG9TdHJpbmcgPSAoZGF0ZSkgPT5cbiAgbmV3IERhdGUoZGF0ZSkudG9Mb2NhbGVEYXRlU3RyaW5nKGRhdGVTZXR0aW5ncy5sb2NhbGUsIGRhdGVTZXR0aW5ncy5vcHRpb25zKTtcblxuY29uc3QgcmVmaW5lVG9OdW1lcmljRERNTSA9IChkYXRlKSA9PlxuICBuZXcgRGF0ZShkYXRlKS50b0xvY2FsZURhdGVTdHJpbmcoZGF0ZVNldHRpbmdzLmxvY2FsZSwgZGF0ZVNldHRpbmdzLm51bWVyaWMpO1xuXG5jb25zdCByZWZpbmVUb051bWVyaWNZWU1NREQgPSAoZGF0ZSkgPT4gbmV3IERhdGUoZGF0ZSkudG9Mb2NhbGVEYXRlU3RyaW5nKCdlbi1DQScpO1xuXG5leHBvcnQgeyByZWZpbmVUb1N0cmluZywgcmVmaW5lVG9OdW1lcmljRERNTSwgcmVmaW5lVG9OdW1lcmljWVlNTUREIH07XG4iLCJpbXBvcnQgeyBBU1NJR05fQllfREFURSB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgcmVmaW5lVG9OdW1lcmljWVlNTUREIH0gZnJvbSAnLi4vdXRpbHMvaGFuZGxlLWRhdGVzJztcblxuY2xhc3MgUHJvamVjdFN0YXRlIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5fc3Vic2NyaWJlcnMgPSBbXTtcbiAgICB0aGlzLl9hc3NpZ25lZFRhc2tzID0gW107XG4gICAgdGhpcy5fYmFja2xvZ1Rhc2tzID0gW107XG4gICAgdGhpcy5fdXNlcnMgPSBbXTtcbiAgICB0aGlzLl91c2Vyc0lkcyA9IHt9O1xuICAgIHRoaXMuX2NhbGVuZGFyTGVuZ3RoID0gNztcbiAgICB0aGlzLl9jdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgdGhpcy5fY3VycmVudERhdGVOdW1lcmljID0gcmVmaW5lVG9OdW1lcmljWVlNTUREKG5ldyBEYXRlKCkpO1xuICAgIHRoaXMuX3N0YXJ0RGF5ID0gdGhpcy5fdXBkYXRlQW5kU2V0RGF0ZXMoKTtcbiAgfVxuXG4gIF9yZW1vdmVUYXNrRnJvbUJhY2tsb2codGFza0lkKSB7XG4gICAgdGhpcy5fYmFja2xvZ1Rhc2tzID0gdGhpcy5fYmFja2xvZ1Rhc2tzLmZpbHRlcigodGFzaykgPT4gdGFzay5pZCAhPT0gdGFza0lkKTtcbiAgfVxuXG4gIF9jYWxsU3Vic2NyaWJlcnMoKSB7XG4gICAgdGhpcy5fc3Vic2NyaWJlcnMuZm9yRWFjaCgobGlzdGVuZXIpID0+IGxpc3RlbmVyKCkpO1xuICB9XG5cbiAgX3VwZGF0ZUFuZFNldERhdGVzKCkge1xuICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKHRoaXMuX2N1cnJlbnREYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApKTtcblxuICAgIHJldHVybiBzdGFydERhdGUuc2V0RGF0ZShcbiAgICAgIHN0YXJ0RGF0ZS5nZXREYXRlKCkgLSBzdGFydERhdGUuZ2V0RGF5KCkgKyAoc3RhcnREYXRlLmdldERheSgpID09PSAwID8gLTYgOiAxKVxuICAgICk7XG4gIH1cblxuICBnZXQgYXNzaWduZWRUYXNrcygpIHtcbiAgICByZXR1cm4gdGhpcy5fYXNzaWduZWRUYXNrcztcbiAgfVxuXG4gIGdldCBiYWNrbG9nVGFza3MoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2JhY2tsb2dUYXNrcztcbiAgfVxuXG4gIGdldCB1c2Vyc0lkcygpIHtcbiAgICByZXR1cm4gdGhpcy5fdXNlcnNJZHM7XG4gIH1cblxuICBzZXQgdXNlcnModmFsdWUpIHtcbiAgICB0aGlzLl91c2VycyA9IHZhbHVlO1xuICB9XG5cbiAgZ2V0IHVzZXJzKCkge1xuICAgIHJldHVybiB0aGlzLl91c2VycztcbiAgfVxuXG4gIGdldCBjYWxlbmRhckxlbmd0aCgpIHtcbiAgICByZXR1cm4gdGhpcy5fY2FsZW5kYXJMZW5ndGg7XG4gIH1cblxuICBnZXQgc3RhcnREYXkoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3N0YXJ0RGF5O1xuICB9XG5cbiAgc2V0IHN0YXJ0RGF5KHZhbHVlKSB7XG4gICAgdGhpcy5fc3RhcnREYXkgPSB2YWx1ZTtcbiAgfVxuXG4gIGdldCBjdXJyZW50RGF0ZU51bWVyaWMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2N1cnJlbnREYXRlTnVtZXJpYztcbiAgfVxuXG4gIGFkZFRhc2tUb0Fzc2lnbmVkVGFza3ModGFzaykge1xuICAgIHRoaXMuX2Fzc2lnbmVkVGFza3MucHVzaCh0YXNrKTtcbiAgfVxuXG4gIGFzc2lnblRhc2soeyB0eXBlLCB0YXNrSWQsIGV4ZWN1dG9ySWQsIHN0YXJ0RGF0ZSB9KSB7XG4gICAgY29uc3QgdGFza1RvQmVBc3NpZ25lZCA9IHRoaXMuX2JhY2tsb2dUYXNrcy5maW5kKCh0YXNrKSA9PiB0YXNrSWQgPT09IHRhc2suaWQpO1xuICAgIHRhc2tUb0JlQXNzaWduZWQuZXhlY3V0b3IgPSArZXhlY3V0b3JJZDtcblxuICAgIC8vINC30LDQv9GA0L7RgSDQuNC3INC60LDQu9C10L3QtNCw0YDRj1xuICAgIGlmICh0eXBlID09PSBBU1NJR05fQllfREFURSkge1xuICAgICAgaWYgKHRoaXMuX2N1cnJlbnREYXRlID4gRGF0ZS5wYXJzZShzdGFydERhdGUpKSB7XG4gICAgICAgIC8vINC/0L7Qv9GL0YLQutCwINC90LDQt9C90LDRh9C40YLRjCDQt9Cw0LTQsNC90LjQtSDQvdCwIFwi0LLRh9C10YDQsFwiXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHRhc2tUb0JlQXNzaWduZWQucGxhbkVuZERhdGUgPT09IHRhc2tUb0JlQXNzaWduZWQucGxhblN0YXJ0RGF0ZSkge1xuICAgICAgICB0YXNrVG9CZUFzc2lnbmVkLnBsYW5FbmREYXRlID0gc3RhcnREYXRlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgZGF0ZURpZmZlcmVuY2UgPVxuICAgICAgICAgIERhdGUucGFyc2UodGFza1RvQmVBc3NpZ25lZC5wbGFuRW5kRGF0ZSkgLSBEYXRlLnBhcnNlKHRhc2tUb0JlQXNzaWduZWQucGxhblN0YXJ0RGF0ZSk7XG4gICAgICAgIGNvbnN0IG5ld0VuZERhdGUgPSBEYXRlLnBhcnNlKHN0YXJ0RGF0ZSkgKyBkYXRlRGlmZmVyZW5jZTtcbiAgICAgICAgdGFza1RvQmVBc3NpZ25lZC5wbGFuRW5kRGF0ZSA9IHJlZmluZVRvTnVtZXJpY1lZTU1ERChuZXdFbmREYXRlKTtcbiAgICAgIH1cbiAgICAgIHRhc2tUb0JlQXNzaWduZWQucGxhblN0YXJ0RGF0ZSA9IHN0YXJ0RGF0ZTtcbiAgICB9XG4gICAgdGhpcy5hZGRUYXNrVG9Bc3NpZ25lZFRhc2tzKHRhc2tUb0JlQXNzaWduZWQpO1xuICAgIHRoaXMuX3JlbW92ZVRhc2tGcm9tQmFja2xvZyh0YXNrSWQpO1xuICAgIHRoaXMuX2NhbGxTdWJzY3JpYmVycygpO1xuICB9XG5cbiAgYWRkVGFza1RvQmFja2xvZyh0YXNrKSB7XG4gICAgdGhpcy5fYmFja2xvZ1Rhc2tzLnB1c2godGFzayk7XG4gIH1cblxuICBtYXBVc2Vyc0lkcyh1c2Vycykge1xuICAgIGNvbnN0IGlkcyA9IHVzZXJzLnJlZHVjZSgob2JqLCB7IGlkIH0sIGkpID0+ICh7IC4uLm9iaiwgW2ldOiBpZCB9KSwge30pO1xuICAgIHRoaXMuX3VzZXJzSWRzID0geyAuLi5pZHMgfTtcbiAgfVxuXG4gIGFkZFN1YnNjcmliZXJzKHN1YnNjcmliZXJzKSB7XG4gICAgdGhpcy5fc3Vic2NyaWJlcnMgPSBbLi4uc3Vic2NyaWJlcnNdO1xuICB9XG59XG5cbmNvbnN0IFN0YXRlID0gbmV3IFByb2plY3RTdGF0ZSgpO1xuXG5leHBvcnQgZGVmYXVsdCBTdGF0ZTtcbiIsImltcG9ydCB7IEJBU0VfVVJMIH0gZnJvbSAnLi4vY29uZmlnL2NvbmZpZyc7XG5cbmNvbnN0IGNoZWNrU2VydmVyUmVzcG9uc2UgPSAocmVzKSA9PiAocmVzLm9rID8gcmVzLmpzb24oKSA6IFByb21pc2UucmVqZWN0KHJlcykpO1xuXG5jb25zdCBnZXREYXRhID0gYXN5bmMgKHJvdXRlKSA9PiB7XG4gIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke0JBU0VfVVJMfSR7cm91dGV9YCwgeyBtZXRob2Q6ICdHRVQnIH0pO1xuICByZXR1cm4gY2hlY2tTZXJ2ZXJSZXNwb25zZShyZXMpO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgZ2V0RGF0YTtcbiIsImNsYXNzIENvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKHsgdGVtcGxhdGVTZWxlY3RvciwgZWxlbWVudFNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yID0gdGVtcGxhdGVTZWxlY3RvcjtcbiAgICB0aGlzLl9lbGVtZW50U2VsZWN0b3IgPSBlbGVtZW50U2VsZWN0b3I7XG4gIH1cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgdGhpcy5fdGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IpLmNvbnRlbnQ7XG4gICAgLy8g0YHQsNC8INGN0LvQtdC80LXQvdGCXG4gICAgcmV0dXJuIHRoaXMuX3RlbXBsYXRlLnF1ZXJ5U2VsZWN0b3IodGhpcy5fZWxlbWVudFNlbGVjdG9yKS5jbG9uZU5vZGUodHJ1ZSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ29tcG9uZW50O1xuIiwiaW1wb3J0IENvbXBvbmVudCBmcm9tICcuL0NvbXBvbmVudCc7XG5pbXBvcnQgeyByZWZpbmVUb1N0cmluZyB9IGZyb20gJy4uL3V0aWxzL2hhbmRsZS1kYXRlcyc7XG5cbmNsYXNzIEJhY2tsb2dDYXJkIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoXG4gICAgY2FyZERhdGEsXG4gICAge1xuICAgICAgdGVtcGxhdGVTZWxlY3RvcixcbiAgICAgIGVsZW1lbnRTZWxlY3RvcixcbiAgICAgIHRpdGxlU2VsZWN0b3IsXG4gICAgICBkZXNjcmlwdGlvblNlbGVjdG9yLFxuICAgICAgc3RhcnREYXRlU2VsZWN0b3IsXG4gICAgICBlbmREYXRlU2VsZWN0b3IsXG4gICAgICBkcmFnU3RhcnRDbGFzcyxcbiAgICB9XG4gICkge1xuICAgIHN1cGVyKHsgdGVtcGxhdGVTZWxlY3RvciwgZWxlbWVudFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX2NhcmREYXRhID0gY2FyZERhdGE7XG4gICAgdGhpcy5fYmFja2xvZ0NhcmQgPSBzdXBlci5fZ2V0VGVtcGxhdGUoKTtcbiAgICB0aGlzLl9kcmFnU3RhcnRDbGFzcyA9IGRyYWdTdGFydENsYXNzO1xuICAgIHRoaXMuX2NhcmRUaXRsZSA9IHRoaXMuX2JhY2tsb2dDYXJkLnF1ZXJ5U2VsZWN0b3IodGl0bGVTZWxlY3Rvcik7XG4gICAgdGhpcy5fY2FyZERlc2NyaXB0aW9uID0gdGhpcy5fYmFja2xvZ0NhcmQucXVlcnlTZWxlY3RvcihkZXNjcmlwdGlvblNlbGVjdG9yKTtcbiAgICB0aGlzLl9jYXJkU3RhcnREYXRlID0gdGhpcy5fYmFja2xvZ0NhcmQucXVlcnlTZWxlY3RvcihzdGFydERhdGVTZWxlY3Rvcik7XG4gICAgdGhpcy5fY2FyZEVuZERhdGUgPSB0aGlzLl9iYWNrbG9nQ2FyZC5xdWVyeVNlbGVjdG9yKGVuZERhdGVTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlRHJhZ1N0YXJ0ID0gdGhpcy5faGFuZGxlRHJhZ1N0YXJ0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5faGFuZGxlRHJhZ0VuZCA9IHRoaXMuX2hhbmRsZURyYWdFbmQuYmluZCh0aGlzKTtcbiAgfVxuXG4gIF9oYW5kbGVEcmFnU3RhcnQoZXZ0KSB7XG4gICAgdGhpcy5fYmFja2xvZ0NhcmQuY2xhc3NMaXN0LmFkZCh0aGlzLl9kcmFnU3RhcnRDbGFzcyk7XG4gICAgZXZ0LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgdGhpcy5fY2FyZERhdGEuaWQpO1xuICAgIGV2dC5kYXRhVHJhbnNmZXIuZWZmZWN0QWxsb3dlZCA9ICdtb3ZlJztcbiAgfVxuXG4gIF9oYW5kbGVEcmFnRW5kKCkge1xuICAgIHRoaXMuX2JhY2tsb2dDYXJkLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZHJhZ1N0YXJ0Q2xhc3MpO1xuICB9XG5cbiAgY3JlYXRlRWxlbWVudCgpIHtcbiAgICB0aGlzLl9jYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9jYXJkRGF0YS5zdWJqZWN0O1xuICAgIHRoaXMuX2NhcmREZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IHRoaXMuX2NhcmREYXRhLmRlc2NyaXB0aW9uO1xuICAgIHRoaXMuX2NhcmRTdGFydERhdGUudGV4dENvbnRlbnQgPSByZWZpbmVUb1N0cmluZyh0aGlzLl9jYXJkRGF0YS5wbGFuU3RhcnREYXRlKTtcbiAgICB0aGlzLl9jYXJkRW5kRGF0ZS50ZXh0Q29udGVudCA9IHJlZmluZVRvU3RyaW5nKHRoaXMuX2NhcmREYXRhLnBsYW5FbmREYXRlKTtcbiAgICB0aGlzLl9iYWNrbG9nQ2FyZC5zZXRBdHRyaWJ1dGUoJ2lkJywgdGhpcy5fY2FyZERhdGEuaWQpO1xuICAgIHJldHVybiB0aGlzLl9iYWNrbG9nQ2FyZDtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2JhY2tsb2dDYXJkLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsIHRoaXMuX2hhbmRsZURyYWdTdGFydCk7XG4gICAgdGhpcy5fYmFja2xvZ0NhcmQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VuZCcsIHRoaXMuX2hhbmRsZURyYWdFbmQpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEJhY2tsb2dDYXJkO1xuIiwiY2xhc3MgUmVuZGVyZXJTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgICB0aGlzLmNsZWFySXRlbXMgPSB0aGlzLmNsZWFySXRlbXMuYmluZCh0aGlzKTtcbiAgfVxuXG4gIGFkZEl0ZW0oaXRlbSkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoaXRlbSk7XG4gIH1cblxuICBjbGVhckl0ZW1zKCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci50ZXh0Q29udGVudCA9ICcnO1xuICB9XG5cbiAgYWRkVGV4dENvbnRlbnQoY29udGVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci50ZXh0Q29udGVudCA9IGNvbnRlbnQ7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUmVuZGVyZXJTZWN0aW9uO1xuIiwiaW1wb3J0IENvbXBvbmVudCBmcm9tICcuL0NvbXBvbmVudCc7XG5pbXBvcnQgeyByZWZpbmVUb1N0cmluZyB9IGZyb20gJy4uL3V0aWxzL2hhbmRsZS1kYXRlcyc7XG5cbmNsYXNzIENhbGVuZGFyVGFzayBleHRlbmRzIENvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHRhc2ssXG4gICAge1xuICAgICAgdGVtcGxhdGVTZWxlY3RvcixcbiAgICAgIGVsZW1lbnRTZWxlY3RvcixcbiAgICAgIHRpdGxlU2VsZWN0b3IsXG4gICAgICBzdWJ0aXRsZVNlbGVjdG9yLFxuICAgICAgZGVzY3JpcHRpb25TZWxlY3RvcixcbiAgICAgIHN0YXJ0RGF0ZVNlbGVjdG9yLFxuICAgICAgZW5kRGF0ZVNlbGVjdG9yLFxuICAgIH1cbiAgKSB7XG4gICAgc3VwZXIoeyB0ZW1wbGF0ZVNlbGVjdG9yLCBlbGVtZW50U2VsZWN0b3IgfSk7XG4gICAgdGhpcy5fdGFzayA9IHRhc2s7XG4gICAgdGhpcy5fdGFza0VsZW1lbnQgPSBzdXBlci5fZ2V0VGVtcGxhdGUoKTtcbiAgICB0aGlzLl90aXRsZUVMZW1lbnQgPSB0aGlzLl90YXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRpdGxlU2VsZWN0b3IpO1xuICAgIHRoaXMuX3N1YnRpdGxlRUxlbWVudCA9IHRoaXMuX3Rhc2tFbGVtZW50LnF1ZXJ5U2VsZWN0b3Ioc3VidGl0bGVTZWxlY3Rvcik7XG4gICAgdGhpcy5fZGVzY3JpcHRpb25FbGVtZW50ID0gdGhpcy5fdGFza0VsZW1lbnQucXVlcnlTZWxlY3RvcihkZXNjcmlwdGlvblNlbGVjdG9yKTtcbiAgICB0aGlzLl9zdGFydERhdGVFbGVtZW50ID0gdGhpcy5fdGFza0VsZW1lbnQucXVlcnlTZWxlY3RvcihzdGFydERhdGVTZWxlY3Rvcik7XG4gICAgdGhpcy5fZW5kRGF0ZUVsZW1lbnQgPSB0aGlzLl90YXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKGVuZERhdGVTZWxlY3Rvcik7XG4gIH1cblxuICBjcmVhdGVFbGVtZW50KCkge1xuICAgIHRoaXMuX3RpdGxlRUxlbWVudC50ZXh0Q29udGVudCA9IHRoaXMuX3Rhc2suc3ViamVjdDtcbiAgICB0aGlzLl9zdWJ0aXRsZUVMZW1lbnQudGV4dENvbnRlbnQgPSB0aGlzLl90YXNrLnN1YmplY3Q7XG4gICAgdGhpcy5fZGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5fdGFzay5kZXNjcmlwdGlvbjtcbiAgICB0aGlzLl9zdGFydERhdGVFbGVtZW50LnRleHRDb250ZW50ID0gcmVmaW5lVG9TdHJpbmcodGhpcy5fdGFzay5wbGFuU3RhcnREYXRlKTtcbiAgICB0aGlzLl9lbmREYXRlRWxlbWVudC50ZXh0Q29udGVudCA9IHJlZmluZVRvU3RyaW5nKHRoaXMuX3Rhc2sucGxhbkVuZERhdGUpO1xuXG4gICAgcmV0dXJuIHRoaXMuX3Rhc2tFbGVtZW50O1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENhbGVuZGFyVGFzaztcbiIsImltcG9ydCBDb21wb25lbnQgZnJvbSAnLi9Db21wb25lbnQnO1xuaW1wb3J0IENhbGVuZGFyVGFzayBmcm9tICcuL0NhbGVuZGFyVGFzayc7XG5pbXBvcnQgeyBjYWxlbmRhclRhc2tTZWxlY3RvcnMgfSBmcm9tICcuLi9jb25maWcvY29uc3RhbnRzJztcblxuY2xhc3MgQ2FsZW5kYXJDZWxsIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoY2VsbCwgeyB0ZW1wbGF0ZVNlbGVjdG9yLCBlbGVtZW50U2VsZWN0b3IgfSkge1xuICAgIHN1cGVyKHsgdGVtcGxhdGVTZWxlY3RvciwgZWxlbWVudFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX2NlbGwgPSBjZWxsO1xuICAgIHRoaXMuX2NlbGxFbGVtZW50ID0gc3VwZXIuX2dldFRlbXBsYXRlKCk7XG4gIH1cblxuICBfYWRkSXRlbShpdGVtKSB7XG4gICAgdGhpcy5fY2VsbEVsZW1lbnQuYXBwZW5kKGl0ZW0pO1xuICB9XG5cbiAgY3JlYXRlRWxlbWVudCgpIHtcbiAgICB0aGlzLl9jZWxsRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtZXhlY3V0b3InLCB0aGlzLl9jZWxsLmV4ZWN1dG9yKTtcbiAgICB0aGlzLl9jZWxsRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtZGF0ZScsIHRoaXMuX2NlbGwuZGF0ZSk7XG5cbiAgICByZXR1cm4gdGhpcy5fY2VsbEVsZW1lbnQ7XG4gIH1cblxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLl9jZWxsLnRhc2tzLmZvckVhY2goKHRhc2spID0+IHtcbiAgICAgIGNvbnN0IG5ld1Rhc2sgPSBuZXcgQ2FsZW5kYXJUYXNrKHRhc2ssIGNhbGVuZGFyVGFza1NlbGVjdG9ycyk7XG4gICAgICB0aGlzLl9hZGRJdGVtKG5ld1Rhc2suY3JlYXRlRWxlbWVudCgpKTtcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDYWxlbmRhckNlbGw7XG4iLCJpbXBvcnQgUHJvamVjdFN0YXRlIGZyb20gJy4uL3N0YXRlL1Byb2plY3RTdGF0ZSc7XG5pbXBvcnQgQ29tcG9uZW50IGZyb20gJy4vQ29tcG9uZW50JztcbmltcG9ydCBDYWxlbmRhckNlbGwgZnJvbSAnLi9DYWxlbmRhckNlbGwnO1xuaW1wb3J0IHsgY2FsZW5kYXJDZWxsU2VsZWN0b3JzIH0gZnJvbSAnLi4vY29uZmlnL2NvbnN0YW50cyc7XG5cbmNsYXNzIENhbGVuZGFyQ29sdW1uIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoY29sdW1uLCB7IHRlbXBsYXRlU2VsZWN0b3IsIGVsZW1lbnRTZWxlY3RvciB9KSB7XG4gICAgc3VwZXIoeyB0ZW1wbGF0ZVNlbGVjdG9yLCBlbGVtZW50U2VsZWN0b3IgfSk7XG4gICAgdGhpcy5fY29sdW1uID0gY29sdW1uO1xuICAgIHRoaXMuX2NhbGVuZGFyQ29sdW1uID0gc3VwZXIuX2dldFRlbXBsYXRlKCk7XG4gICAgdGhpcy5fZGF5VGFza3NTY2hlbWEgPSB7fTtcbiAgfVxuXG4gIF9nZXRUYXNrc0ZvckN1cnJlbnREYXkodGFza3MpIHtcbiAgICBjb25zdCBwYXJzZWRDb2x1bW5EYXRlID0gRGF0ZS5wYXJzZSh0aGlzLl9jb2x1bW4uZGF0ZSk7XG4gICAgcmV0dXJuIHRhc2tzLmZpbHRlcihcbiAgICAgICh0YXNrKSA9PlxuICAgICAgICBEYXRlLnBhcnNlKHRhc2sucGxhblN0YXJ0RGF0ZSkgPD0gcGFyc2VkQ29sdW1uRGF0ZSAmJlxuICAgICAgICBwYXJzZWRDb2x1bW5EYXRlIDw9IERhdGUucGFyc2UodGFzay5wbGFuRW5kRGF0ZSlcbiAgICApO1xuICB9XG5cbiAgX2dldERheVRhc2tzU2NoZW1hKCkge1xuICAgIHRoaXMuX3Rhc2tzRm9yQ3VycmVudERheSA9IHRoaXMuX2dldFRhc2tzRm9yQ3VycmVudERheShQcm9qZWN0U3RhdGUuYXNzaWduZWRUYXNrcyk7XG5cbiAgICBpZiAodGhpcy5fdGFza3NGb3JDdXJyZW50RGF5KSB7XG4gICAgICB0aGlzLl90YXNrc0ZvckN1cnJlbnREYXkuZm9yRWFjaCgodGFzaykgPT4ge1xuICAgICAgICBpZiAoIXRoaXMuX2RheVRhc2tzU2NoZW1hW3Rhc2suZXhlY3V0b3JdKSB7XG4gICAgICAgICAgdGhpcy5fZGF5VGFza3NTY2hlbWFbdGFzay5leGVjdXRvcl0gPSBbdGFza107XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5fZGF5VGFza3NTY2hlbWFbdGFzay5leGVjdXRvcl0gPSBbLi4udGhpcy5fZGF5VGFza3NTY2hlbWFbdGFzay5leGVjdXRvcl0sIHRhc2tdO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBjcmVhdGVDZWxscygpIHtcbiAgICB0aGlzLl9nZXREYXlUYXNrc1NjaGVtYSgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgUHJvamVjdFN0YXRlLnVzZXJzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICBjb25zdCB1c2VySWQgPSBQcm9qZWN0U3RhdGUudXNlcnNJZHNbaV07XG4gICAgICBjb25zdCBjb2x1bW5DZWxsID0gbmV3IENhbGVuZGFyQ2VsbChcbiAgICAgICAgeyBleGVjdXRvcjogdXNlcklkLCBkYXRlOiB0aGlzLl9jb2x1bW4uZGF0ZSwgdGFza3M6IHRoaXMuX2RheVRhc2tzU2NoZW1hW3VzZXJJZF0gPz8gW10gfSxcbiAgICAgICAgY2FsZW5kYXJDZWxsU2VsZWN0b3JzXG4gICAgICApO1xuICAgICAgY29uc3QgY2VsbEVsZW1lbnQgPSBjb2x1bW5DZWxsLmNyZWF0ZUVsZW1lbnQoKTtcbiAgICAgIGNvbHVtbkNlbGwucmVuZGVySXRlbXMoKTtcbiAgICAgIHRoaXMuYWRkSXRlbShjZWxsRWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgY3JlYXRlRWxlbWVudCgpIHtcbiAgICB0aGlzLmNyZWF0ZUNlbGxzKCk7XG4gICAgcmV0dXJuIHRoaXMuX2NhbGVuZGFyQ29sdW1uO1xuICB9XG5cbiAgYWRkSXRlbShpdGVtKSB7XG4gICAgdGhpcy5fY2FsZW5kYXJDb2x1bW4uYXBwZW5kKGl0ZW0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENhbGVuZGFyQ29sdW1uO1xuIiwiaW1wb3J0IENvbXBvbmVudCBmcm9tICcuL0NvbXBvbmVudCc7XG5pbXBvcnQgUHJvamVjdFN0YXRlIGZyb20gJy4uL3N0YXRlL1Byb2plY3RTdGF0ZSc7XG5pbXBvcnQgeyByZWZpbmVUb051bWVyaWNERE1NIH0gZnJvbSAnLi4vdXRpbHMvaGFuZGxlLWRhdGVzJztcblxuY2xhc3MgQ2FsZW5kYXJEYXRlIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoeyBkYXRlIH0sIHsgdGVtcGxhdGVTZWxlY3RvciwgZWxlbWVudFNlbGVjdG9yLCBjdXJyZW50RGF5Q2xhc3MgfSkge1xuICAgIHN1cGVyKHsgdGVtcGxhdGVTZWxlY3RvciwgZWxlbWVudFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX2RhdGUgPSBkYXRlO1xuICAgIHRoaXMuX2N1cnJlbnREYXlDbGFzcyA9IGN1cnJlbnREYXlDbGFzcztcbiAgICB0aGlzLl9kYXRlRWxlbWVudCA9IHN1cGVyLl9nZXRUZW1wbGF0ZSgpO1xuICB9XG5cbiAgY3JlYXRlRWxlbWVudCgpIHtcbiAgICBjb25zdCBjZWxsRGF0ZSA9IG5ldyBEYXRlKHRoaXMuX2RhdGUpO1xuICAgIHRoaXMuX2RhdGVFbGVtZW50LnRleHRDb250ZW50ID0gcmVmaW5lVG9OdW1lcmljRERNTShjZWxsRGF0ZSk7XG4gICAgaWYgKHRoaXMuX2RhdGUgPT09IFByb2plY3RTdGF0ZS5jdXJyZW50RGF0ZU51bWVyaWMpIHtcbiAgICAgIHRoaXMuX2RhdGVFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY3VycmVudERheUNsYXNzKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2RhdGVFbGVtZW50O1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENhbGVuZGFyRGF0ZTtcbiIsImltcG9ydCBQcm9qZWN0U3RhdGUgZnJvbSAnLi4vc3RhdGUvUHJvamVjdFN0YXRlJztcbmltcG9ydCBDb21wb25lbnQgZnJvbSAnLi9Db21wb25lbnQnO1xuaW1wb3J0IHsgQVNTSUdOX0JZX1VTRVIgfSBmcm9tICcuLi9zdGF0ZS90eXBlcyc7XG5cbmNsYXNzIFVzZXJDYXJkIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoY2FyZERhdGEsIHsgdGVtcGxhdGVTZWxlY3RvciwgZWxlbWVudFNlbGVjdG9yLCB1c2VyTmFtZVNlbGVjdG9yLCBkcmFnT3ZlckNsYXNzIH0pIHtcbiAgICBzdXBlcih7IHRlbXBsYXRlU2VsZWN0b3IsIGVsZW1lbnRTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9jYXJkRGF0YSA9IGNhcmREYXRhO1xuICAgIHRoaXMuX3VzZXJDYXJkID0gc3VwZXIuX2dldFRlbXBsYXRlKCk7XG4gICAgdGhpcy5fZnVsbE5hbWVFbGVtZW50ID0gdGhpcy5fdXNlckNhcmQucXVlcnlTZWxlY3Rvcih1c2VyTmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9kcmFnT3ZlckNsYXNzID0gZHJhZ092ZXJDbGFzcztcbiAgICB0aGlzLl9oYW5kbGVEcmFnT3ZlciA9IHRoaXMuX2hhbmRsZURyYWdPdmVyLmJpbmQodGhpcyk7XG4gICAgdGhpcy5faGFuZGxlRHJhZ0xlYXZlID0gdGhpcy5faGFuZGxlRHJhZ0xlYXZlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5faGFuZGxlRHJvcCA9IHRoaXMuX2hhbmRsZURyb3AuYmluZCh0aGlzKTtcbiAgfVxuXG4gIF9oYW5kbGVEcmFnT3ZlcihldnQpIHtcbiAgICBpZiAoZXZ0LmRhdGFUcmFuc2ZlciAmJiBldnQuZGF0YVRyYW5zZmVyLnR5cGVzWzBdID09PSAndGV4dC9wbGFpbicpIHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5fdXNlckNhcmQuY2xhc3NMaXN0LmFkZCh0aGlzLl9kcmFnT3ZlckNsYXNzKTtcbiAgICB9XG4gIH1cblxuICBfaGFuZGxlRHJhZ0xlYXZlKCkge1xuICAgIHRoaXMuX3VzZXJDYXJkLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZHJhZ092ZXJDbGFzcyk7XG4gIH1cblxuICBfaGFuZGxlRHJvcChldnQpIHtcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCB0YXNrSWQgPSBldnQuZGF0YVRyYW5zZmVyLmdldERhdGEoJ3RleHQvcGxhaW4nKTtcbiAgICBQcm9qZWN0U3RhdGUuYXNzaWduVGFzayh7IHR5cGU6IEFTU0lHTl9CWV9VU0VSLCB0YXNrSWQsIGV4ZWN1dG9ySWQ6IHRoaXMuX2NhcmREYXRhLmlkIH0pO1xuICAgIHRoaXMuX2hhbmRsZURyYWdMZWF2ZSgpO1xuICB9XG5cbiAgY3JlYXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9mdWxsTmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBgJHt0aGlzLl9jYXJkRGF0YS5maXJzdE5hbWV9ICR7dGhpcy5fY2FyZERhdGEuc3VybmFtZX1gO1xuICAgIHJldHVybiB0aGlzLl91c2VyQ2FyZDtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3VzZXJDYXJkLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgdGhpcy5faGFuZGxlRHJhZ092ZXIpO1xuICAgIHRoaXMuX3VzZXJDYXJkLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdsZWF2ZScsIHRoaXMuX2hhbmRsZURyYWdMZWF2ZSk7XG4gICAgdGhpcy5fdXNlckNhcmQuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIHRoaXMuX2hhbmRsZURyb3ApO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFVzZXJDYXJkO1xuIiwiY29uc3QgcmVtb3ZlQW5pbWF0aW9uID0gKGVsZW1lbnQpID0+IHtcbiAgLy8g0YPQtNCw0LvQtdC90LjQtSDQtNC70Y8g0LLQvtGB0YHRgtCw0L3QvtCy0LvQtdC90LjRjyDRg9GA0L7QstC90LXQuSDQvdCw0LvQvtC20LXQvdC40Y8g0Lgg0LTQvtGB0YLRg9C/0L3QvtGB0YLQuCDRgdCy0L7QudGB0YLQstCwIHRyYW5zZm9ybVxuICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgfSwgMTEwMCk7XG59O1xuXG5leHBvcnQgY29uc3QgYXBwbHlTbGlkZUluQm90dG9tVXBBbmltID0gKGVsZW1lbnQsIGluZGV4LCBsYXN0SW5kZXgpID0+IHtcbiAgaWYgKGluZGV4IDw9IGxhc3RJbmRleCkge1xuICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKFxuICAgICAgJ3N0eWxlJyxcbiAgICAgIGBhbmltYXRpb246IHNsaWRlLWluLWJvdHRvbS11cCAwLjVzIGVhc2Utb3V0IDAuJHtpbmRleH1zIGZvcndhcmRzOyBvcGFjaXR5OiAwO2BcbiAgICApO1xuICAgIHJlbW92ZUFuaW1hdGlvbihlbGVtZW50KTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGFwcGx5U2xpZGVJblJpZ2h0TGVmdEFuaW0gPSAoZWxlbWVudCwgaW5kZXgsIGxhc3RJbmRleCkgPT4ge1xuICBpZiAoaW5kZXggPD0gbGFzdEluZGV4KSB7XG4gICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXG4gICAgICAnc3R5bGUnLFxuICAgICAgYGFuaW1hdGlvbjogc2xpZGUtaW4tcmlnaHQtbGVmdCAwLjVzIGVhc2Utb3V0IDAuJHtpbmRleH1zIGZvcndhcmRzOyBvcGFjaXR5OiAwO2BcbiAgICApO1xuICAgIHJlbW92ZUFuaW1hdGlvbihlbGVtZW50KTtcbiAgfVxufTtcbiIsImltcG9ydCAnLi9pbmRleC5jc3MnO1xuaW1wb3J0IFByb2plY3RTdGF0ZSBmcm9tICcuL3N0YXRlL1Byb2plY3RTdGF0ZSc7XG5pbXBvcnQge1xuICBiYWNrbG9nQ2FyZFNlbGVjdG9ycyxcbiAgY2FsZW5kYXJDb2x1bW5TZWxlY3RvcnMsXG4gIGNhbGVuZGFyRGF0ZVNlbGVjdG9ycyxcbiAgZnVsbERheUluTWlsbGlzZWNvbmRzLFxuICBtYXhJbmRleEZvckFuaW1hdGlvbixcbiAgcG9wdXBTZWxlY3RvcnMsXG4gIHByZWxvYWRlclN0YXRlU2VsZWN0b3JzLFxuICB0b2dnbGVUaGVtZVNldHRpbmdzLFxuICB1c2Vyc0NhcmRTZWxlY3RvcnMsXG59IGZyb20gJy4vY29uZmlnL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBUQVNLU19ST1VURSwgVVNFUlNfUk9VVEUgfSBmcm9tICcuL2NvbmZpZy9jb25maWcnO1xuaW1wb3J0IHsgcmVmaW5lVG9OdW1lcmljWVlNTUREIH0gZnJvbSAnLi91dGlscy9oYW5kbGUtZGF0ZXMnO1xuaW1wb3J0IHsgaW5pdFN3aXRjaEJldHdlZW5XZWVrcywgaW5pdFRvZ2dsZUNvbG9yVGhlbWUgfSBmcm9tICcuL3V0aWxzJztcbmltcG9ydCBnZXREYXRhIGZyb20gJy4vYXBpL21haW4tYXBpJztcbmltcG9ydCB7XG4gIEJhY2tsb2dDYXJkLFxuICBDYWxlbmRhcixcbiAgQ2FsZW5kYXJDb2x1bW4sXG4gIENhbGVuZGFyRGF0ZSxcbiAgUG9wdXBFcnJvcixcbiAgUmVuZGVyZXJTZWN0aW9uLFxuICBVc2VyQ2FyZCxcbn0gZnJvbSAnLi9jb21wb25lbnRzJztcbmltcG9ydCBpbml0U2VhcmNoIGZyb20gJy4vdXRpbHMvc2VhcmNoJztcbmltcG9ydCB7IGFwcGx5U2xpZGVJbkJvdHRvbVVwQW5pbSwgYXBwbHlTbGlkZUluUmlnaHRMZWZ0QW5pbSB9IGZyb20gJy4vdXRpbHMvYXBwbHktc3R5bGUtYW5pbWF0aW9uJztcblxuY29uc3QgcGFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJlbG9hZGVyU3RhdGVTZWxlY3RvcnMucGFnZVNlbGVjdG9yKTtcbmNvbnN0IHByZWxvYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJlbG9hZGVyU3RhdGVTZWxlY3RvcnMucHJlbG9hZGVyU2VsZWN0b3IpO1xuY29uc3QgcG9wdXBFcnJvciA9IG5ldyBQb3B1cEVycm9yKHBvcHVwU2VsZWN0b3JzKTtcbi8vINC60L7QvdGC0LXQudC90LXRgNGLLdGA0LXQvdC00LXRgNC10YDRi1xuY29uc3QgYmFja2xvZ0xpc3QgPSBuZXcgUmVuZGVyZXJTZWN0aW9uKGJhY2tsb2dDYXJkU2VsZWN0b3JzLnBhcmVudFNlbGVjdG9yKTtcbmNvbnN0IHVzZXJzTGlzdCA9IG5ldyBSZW5kZXJlclNlY3Rpb24odXNlcnNDYXJkU2VsZWN0b3JzLnBhcmVudFNlbGVjdG9yKTtcbmNvbnN0IGRhdGVzQ29udGFpbmVyID0gbmV3IFJlbmRlcmVyU2VjdGlvbihjYWxlbmRhckRhdGVTZWxlY3RvcnMucGFyZW50U2VsZWN0b3IpO1xuY29uc3QgY2FsZW5kYXJDb250YWluZXIgPSBuZXcgQ2FsZW5kYXIoY2FsZW5kYXJDb2x1bW5TZWxlY3RvcnMucGFyZW50U2VsZWN0b3IpO1xuY2FsZW5kYXJDb250YWluZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgcmVuZGVyQ2FsZW5kYXIgPSAoaXNBbmltYXRlZCkgPT4ge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IFByb2plY3RTdGF0ZS5jYWxlbmRhckxlbmd0aDsgaSArPSAxKSB7XG4gICAgY29uc3QgdGhpc0RhdGUgPSBQcm9qZWN0U3RhdGUuc3RhcnREYXkgKyBmdWxsRGF5SW5NaWxsaXNlY29uZHMgKiBpO1xuICAgIGNvbnN0IGRhdGVTdHJpbmcgPSByZWZpbmVUb051bWVyaWNZWU1NREQodGhpc0RhdGUpO1xuXG4gICAgY29uc3QgZGF0ZU9iamVjdCA9IG5ldyBDYWxlbmRhckRhdGUoeyBkYXRlOiBkYXRlU3RyaW5nIH0sIGNhbGVuZGFyRGF0ZVNlbGVjdG9ycyk7XG4gICAgY29uc3QgY29sdW1uT2JqZWN0ID0gbmV3IENhbGVuZGFyQ29sdW1uKHsgZGF0ZTogZGF0ZVN0cmluZyB9LCBjYWxlbmRhckNvbHVtblNlbGVjdG9ycyk7XG4gICAgY29uc3QgZGF0ZUVsZW1lbnQgPSBkYXRlT2JqZWN0LmNyZWF0ZUVsZW1lbnQoKTtcbiAgICBjb25zdCBjb2x1bW5FbGVtZW50ID0gY29sdW1uT2JqZWN0LmNyZWF0ZUVsZW1lbnQoKTtcbiAgICBpZiAoaXNBbmltYXRlZCkge1xuICAgICAgYXBwbHlTbGlkZUluUmlnaHRMZWZ0QW5pbShkYXRlRWxlbWVudCwgaSwgUHJvamVjdFN0YXRlLmNhbGVuZGFyTGVuZ3RoIC0gMSk7XG4gICAgICBhcHBseVNsaWRlSW5SaWdodExlZnRBbmltKGNvbHVtbkVsZW1lbnQsIGksIFByb2plY3RTdGF0ZS5jYWxlbmRhckxlbmd0aCAtIDEpO1xuICAgIH1cbiAgICBkYXRlc0NvbnRhaW5lci5hZGRJdGVtKGRhdGVFbGVtZW50KTtcbiAgICBjYWxlbmRhckNvbnRhaW5lci5hZGRJdGVtKGNvbHVtbkVsZW1lbnQpO1xuICB9XG59O1xuXG5jb25zdCBjcmVhdGVCYWNrbG9nQ2FyZCA9ICh0YXNrKSA9PiB7XG4gIGNvbnN0IGJhY2tsb2dDYXJkID0gbmV3IEJhY2tsb2dDYXJkKHRhc2ssIGJhY2tsb2dDYXJkU2VsZWN0b3JzKTtcbiAgY29uc3QgbmV3QmFja2xvZ0NhcmQgPSBiYWNrbG9nQ2FyZC5jcmVhdGVFbGVtZW50KCk7XG4gIGJhY2tsb2dDYXJkLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIHJldHVybiBuZXdCYWNrbG9nQ2FyZDtcbn07XG5cbmNvbnN0IHJlbmRlckJhY2tsb2dUYXNrcyA9IChpc0FuaW1hdGVkKSA9PiB7XG4gIFByb2plY3RTdGF0ZS5iYWNrbG9nVGFza3MuZm9yRWFjaCgodGFzaywgaSkgPT4ge1xuICAgIGNvbnN0IGJhY2tsb2dDYXJkID0gY3JlYXRlQmFja2xvZ0NhcmQodGFzayk7XG4gICAgaWYgKGlzQW5pbWF0ZWQpIHtcbiAgICAgIGFwcGx5U2xpZGVJbkJvdHRvbVVwQW5pbShiYWNrbG9nQ2FyZCwgaSwgbWF4SW5kZXhGb3JBbmltYXRpb24uYmFja2xvZ0NhcmRzKTtcbiAgICB9XG4gICAgYmFja2xvZ0xpc3QuYWRkSXRlbShiYWNrbG9nQ2FyZCk7XG4gIH0pO1xufTtcblxuY29uc3QgcmVuZGVyVXNlcnMgPSAodXNlcnMsIGlzQW5pbWF0ZWQpID0+XG4gIHVzZXJzLmZvckVhY2goKHVzZXIsIGkpID0+IHtcbiAgICBjb25zdCB1c2VyQ2FyZCA9IG5ldyBVc2VyQ2FyZCh1c2VyLCB1c2Vyc0NhcmRTZWxlY3RvcnMpO1xuICAgIGNvbnN0IG5ld1VzZXJDYXJkID0gdXNlckNhcmQuY3JlYXRlQ2FyZCgpO1xuICAgIGlmIChpc0FuaW1hdGVkKSB7XG4gICAgICBhcHBseVNsaWRlSW5Cb3R0b21VcEFuaW0obmV3VXNlckNhcmQsIGksIG1heEluZGV4Rm9yQW5pbWF0aW9uLnVzZXJzKTtcbiAgICB9XG4gICAgdXNlckNhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB1c2Vyc0xpc3QuYWRkSXRlbShuZXdVc2VyQ2FyZCk7XG4gIH0pO1xuXG4vLyDQv9C10YDQstCw0Y8g0L7RgtGA0LjRgdC+0LLQutCwINC4INC+0LHRgNCw0LHQvtGC0LrQsCDQtNCw0L3QvdGL0YUg0YEg0YHQtdGA0LLQtdGA0LBcbmNvbnN0IGdldEluaXRpYWxEYXRhID0gYXN5bmMgKCkgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHVzZXJzID0gYXdhaXQgZ2V0RGF0YShVU0VSU19ST1VURSk7XG4gICAgY29uc3QgdGFza3MgPSBhd2FpdCBnZXREYXRhKFRBU0tTX1JPVVRFKTtcblxuICAgIC8vINGB0L7RgNGC0LjRgNC+0LLQutCwINC30LDQtNCw0L3QuNC5INC4INC00L7QsdCw0LLQu9C10L3QuNC1INC40YUg0LIg0YHRgtC10LnRglxuICAgIHRhc2tzLmZvckVhY2goKHRhc2spID0+IHtcbiAgICAgIGlmICh0YXNrLmV4ZWN1dG9yKSBQcm9qZWN0U3RhdGUuYWRkVGFza1RvQXNzaWduZWRUYXNrcyh0YXNrKTtcbiAgICAgIGVsc2UgUHJvamVjdFN0YXRlLmFkZFRhc2tUb0JhY2tsb2codGFzayk7XG4gICAgfSk7XG4gICAgLy8g0YTQvtGA0LzQuNGA0L7QstCw0L3QuNC1INC+0LHRitC10LrRgtCwINGBIGlkINC40YHQv9C+0LvQvdC40YLQtdC70LXQuVxuICAgIFByb2plY3RTdGF0ZS51c2VycyA9IHVzZXJzO1xuICAgIFByb2plY3RTdGF0ZS5tYXBVc2Vyc0lkcyh1c2Vycyk7XG4gICAgLy8g0YDQtdC90LTQtdGA0LjQvdCzXG4gICAgcmVuZGVyVXNlcnModXNlcnMsIHRydWUpO1xuICAgIHJlbmRlckNhbGVuZGFyKHRydWUpO1xuICAgIHJlbmRlckJhY2tsb2dUYXNrcyh0cnVlKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcG9wdXBFcnJvci5vcGVuKCk7XG4gIH1cbiAgcGFnZS5jbGFzc0xpc3QucmVtb3ZlKHByZWxvYWRlclN0YXRlU2VsZWN0b3JzLnBhZ2VIaWRkZW5DbGFzcyk7XG4gIHByZWxvYWRlci5jbGFzc0xpc3QucmVtb3ZlKHByZWxvYWRlclN0YXRlU2VsZWN0b3JzLnByZWxvYWRlclZpc2libGVDbGFzcyk7XG59O1xuXG5nZXRJbml0aWFsRGF0YSgpO1xuXG4vLyDQv9C+0LjRgdC6XG5pbml0U2VhcmNoKGJhY2tsb2dMaXN0LCBjcmVhdGVCYWNrbG9nQ2FyZCwgcmVuZGVyQmFja2xvZ1Rhc2tzKTtcbi8vINC/0LXRgNC10LvQuNGB0YLRi9Cy0LDQvdC40LUg0LrQsNC70LXQvdC00LDRgNGPXG5pbml0U3dpdGNoQmV0d2VlbldlZWtzKGNhbGVuZGFyQ29udGFpbmVyLmNsZWFySXRlbXMsIGRhdGVzQ29udGFpbmVyLmNsZWFySXRlbXMsIHJlbmRlckNhbGVuZGFyKTtcbi8vINC/0LXRgNC10LrQu9GO0YfQtdC90LjQtSDRgtC10LzRi1xuaW5pdFRvZ2dsZUNvbG9yVGhlbWUodG9nZ2xlVGhlbWVTZXR0aW5ncyk7XG5cbi8vINC00L7QsdCw0LLQu9C10L3QuNC1INC90LDQsdC70Y7QtNCw0YLQtdC70LXQuSDQsiDRgdGC0LXQudGCINC00LvRjyDRgNC10YDQtdC90LTQtdGA0LBcblByb2plY3RTdGF0ZS5hZGRTdWJzY3JpYmVycyhbXG4gIGNhbGVuZGFyQ29udGFpbmVyLmNsZWFySXRlbXMsXG4gIGJhY2tsb2dMaXN0LmNsZWFySXRlbXMsXG4gIGRhdGVzQ29udGFpbmVyLmNsZWFySXRlbXMsXG4gIHJlbmRlckNhbGVuZGFyLFxuICByZW5kZXJCYWNrbG9nVGFza3MsXG5dKTtcbiIsImltcG9ydCB7IHRpbWVyRGVsYXkgfSBmcm9tICcuLi9jb25maWcvY29uc3RhbnRzJztcblxuY2xhc3MgUG9wdXBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9ycykge1xuICAgIHRoaXMuX3NlbGVjdG9ycyA9IHNlbGVjdG9ycztcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLnBvcHVwRXJyb3IpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NlbGVjdG9ycy5wb3B1cE9wZW5DbGFzcyk7XG4gICAgdGhpcy5fY2xvc2UoKTtcbiAgfVxuXG4gIF9jbG9zZSgpIHtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2VsZWN0b3JzLnBvcHVwT3BlbkNsYXNzKTtcbiAgICB9LCB0aW1lckRlbGF5KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cEVycm9yO1xuIiwiaW1wb3J0IFByb2plY3RTdGF0ZSBmcm9tICcuLi9zdGF0ZS9Qcm9qZWN0U3RhdGUnO1xuaW1wb3J0IFJlbmRlcmVyU2VjdGlvbiBmcm9tICcuL1JlbmRlcmVyU2VjdGlvbic7XG5pbXBvcnQgeyBBU1NJR05fQllfREFURSB9IGZyb20gJy4uL3N0YXRlL3R5cGVzJztcbmltcG9ydCB7IGNhbGVuZGFyQ2VsbFNlbGVjdG9ycywgY2FsZW5kYXJUYXNrU2VsZWN0b3JzIH0gZnJvbSAnLi4vY29uZmlnL2NvbnN0YW50cyc7XG5cbmNsYXNzIENhbGVuZGFyIGV4dGVuZHMgUmVuZGVyZXJTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICBzdXBlcihjb250YWluZXJTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlRHJhZ092ZXIgPSB0aGlzLl9oYW5kbGVEcmFnT3Zlci5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX2hhbmRsZURyYWdMZWF2ZSA9IHRoaXMuX2hhbmRsZURyYWdMZWF2ZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX2hhbmRsZURyb3AgPSB0aGlzLl9oYW5kbGVEcm9wLmJpbmQodGhpcyk7XG4gIH1cblxuICBfaGFuZGxlRHJhZ092ZXIoZXZ0KSB7XG4gICAgY29uc3QgeyB0YXJnZXQgfSA9IGV2dDtcbiAgICBpZiAoXG4gICAgICBldnQuZGF0YVRyYW5zZmVyICYmXG4gICAgICBldnQuZGF0YVRyYW5zZmVyLnR5cGVzWzBdID09PSAndGV4dC9wbGFpbicgJiZcbiAgICAgICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKGNhbGVuZGFyQ2VsbFNlbGVjdG9ycy5lbGVtZW50Q2xhc3MpIHx8XG4gICAgICAgIHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoY2FsZW5kYXJUYXNrU2VsZWN0b3JzLmVsZW1lbnRDbGFzcykpXG4gICAgKSB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2Ryb3BwYWJsZUNlbGwgPSB0YXJnZXQuY2xvc2VzdChjYWxlbmRhckNlbGxTZWxlY3RvcnMuZWxlbWVudFNlbGVjdG9yKTtcbiAgICAgIHRoaXMuX2Ryb3BwYWJsZUNlbGwuY2xhc3NMaXN0LmFkZChjYWxlbmRhckNlbGxTZWxlY3RvcnMuZHJhZ092ZXJDbGFzcyk7XG4gICAgfVxuICB9XG5cbiAgX2hhbmRsZURyYWdMZWF2ZSgpIHtcbiAgICB0aGlzLl9kcm9wcGFibGVDZWxsLmNsYXNzTGlzdC5yZW1vdmUoY2FsZW5kYXJDZWxsU2VsZWN0b3JzLmRyYWdPdmVyQ2xhc3MpO1xuICB9XG5cbiAgX2hhbmRsZURyb3AoZXZ0KSB7XG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgdGFza0lkID0gZXZ0LmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJyk7XG4gICAgUHJvamVjdFN0YXRlLmFzc2lnblRhc2soe1xuICAgICAgdHlwZTogQVNTSUdOX0JZX0RBVEUsXG4gICAgICB0YXNrSWQsXG4gICAgICBleGVjdXRvcklkOiB0aGlzLl9kcm9wcGFibGVDZWxsLmRhdGFzZXQuZXhlY3V0b3IsXG4gICAgICBzdGFydERhdGU6IHRoaXMuX2Ryb3BwYWJsZUNlbGwuZGF0YXNldC5kYXRlLFxuICAgIH0pO1xuICAgIHRoaXMuX2hhbmRsZURyYWdMZWF2ZSgpO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgdGhpcy5faGFuZGxlRHJhZ092ZXIpO1xuICAgIHRoaXMuX2NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdkcmFnbGVhdmUnLCB0aGlzLl9oYW5kbGVEcmFnTGVhdmUpO1xuICAgIHRoaXMuX2NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgdGhpcy5faGFuZGxlRHJvcCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2FsZW5kYXI7XG4iLCJleHBvcnQgY29uc3QgQkFTRV9VUkwgPVxuICAnaHR0cHM6Ly92YXJhbmtpbl9kZXYuZWxtYTM2NS5ydS9hcGkvZXh0ZW5zaW9ucy8yYTM4NzYwZS0wODNhLTRkZDAtYWViYy03OGI1NzBiZmQzYzcvc2NyaXB0JztcbmV4cG9ydCBjb25zdCBVU0VSU19ST1VURSA9ICcvdXNlcnMnO1xuZXhwb3J0IGNvbnN0IFRBU0tTX1JPVVRFID0gJy90YXNrcyc7XG4iLCJpbXBvcnQgeyBzZWFyY2hGb3JtU2VsZWN0b3JzLCB0aW1lckRlbGF5IH0gZnJvbSAnLi4vY29uZmlnL2NvbnN0YW50cyc7XG5pbXBvcnQgUHJvamVjdFN0YXRlIGZyb20gJy4uL3N0YXRlL1Byb2plY3RTdGF0ZSc7XG5cbmNvbnN0IGluaXRTZWFyY2ggPSAoY29udGFpbmVyLCBjcmVhdGVDYXJkQ2FsbGJhY2ssIHJlbmRlckNhbGxiYWNrKSA9PiB7XG4gIGNvbnN0IHNlYXJjaEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlYXJjaEZvcm1TZWxlY3RvcnMuc2VhcmNoRm9ybSk7XG4gIGNvbnN0IHNlYXJjaElucHV0ID0gc2VhcmNoRm9ybS5xdWVyeVNlbGVjdG9yKHNlYXJjaEZvcm1TZWxlY3RvcnMuc2VhcmNoSW5wdXQpO1xuICBjb25zdCBzdWJtaXRCdXR0b24gPSBzZWFyY2hGb3JtLnF1ZXJ5U2VsZWN0b3Ioc2VhcmNoRm9ybVNlbGVjdG9ycy5zdWJtaXRCdXR0b24pO1xuXG4gIGNvbnN0IGhhbmRsZVNlYXJjaCA9IChldnQpID0+IHtcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBrZXl3b3JkID0gc2VhcmNoSW5wdXQudmFsdWU7XG4gICAgbGV0IHJlc3VsdDtcbiAgICBpZiAoa2V5d29yZC5sZW5ndGgpIHtcbiAgICAgIHJlc3VsdCA9IFByb2plY3RTdGF0ZS5iYWNrbG9nVGFza3MuZmlsdGVyKCh0YXNrKSA9PlxuICAgICAgICB0YXNrLnN1YmplY3QudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhrZXl3b3JkLnRvTG93ZXJDYXNlKCkpXG4gICAgICApO1xuICAgICAgY29udGFpbmVyLmNsZWFySXRlbXMoKTtcblxuICAgICAgaWYgKHJlc3VsdC5sZW5ndGgpIHtcbiAgICAgICAgcmVzdWx0LmZvckVhY2goKHRhc2spID0+IHtcbiAgICAgICAgICBjb25zdCBiYWNrbG9nQ2FyZCA9IGNyZWF0ZUNhcmRDYWxsYmFjayh0YXNrKTtcbiAgICAgICAgICBjb250YWluZXIuYWRkSXRlbShiYWNrbG9nQ2FyZCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29udGFpbmVyLmFkZFRleHRDb250ZW50KCfQndC40YfQtdCz0L4g0L3QtSDQvdCw0YjQu9C+0YHRjCcpO1xuICAgICAgICBzdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBjb250YWluZXIuY2xlYXJJdGVtcygpO1xuICAgICAgICAgIHJlbmRlckNhbGxiYWNrKCk7XG4gICAgICAgICAgc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgIH0sIHRpbWVyRGVsYXkpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBzZWFyY2hGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGhhbmRsZVNlYXJjaCk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBpbml0U2VhcmNoO1xuIiwiaW1wb3J0IFByb2plY3RTdGF0ZSBmcm9tICcuLi9zdGF0ZS9Qcm9qZWN0U3RhdGUnO1xuaW1wb3J0IHsgZnVsbERheUluTWlsbGlzZWNvbmRzLCB3ZWVrQnV0dG9uc1NlbGVjdG9ycyB9IGZyb20gJy4uL2NvbmZpZy9jb25zdGFudHMnO1xuXG5jb25zdCBpbml0U3dpdGNoQmV0d2VlbldlZWtzID0gKGNsZWFyQ29udGFpbmVyQ2FsbGJhY2ssIGNsZWFyRGF0ZXNDYWxsYmFjaywgcmVuZGVyQ2FsbGJhY2spID0+IHtcbiAgY29uc3Qgc2hvd05leHRXZWVrID0gKCkgPT4ge1xuICAgIGNsZWFyQ29udGFpbmVyQ2FsbGJhY2soKTtcbiAgICBjbGVhckRhdGVzQ2FsbGJhY2soKTtcbiAgICBQcm9qZWN0U3RhdGUuc3RhcnREYXkgKz0gZnVsbERheUluTWlsbGlzZWNvbmRzICogNztcbiAgICByZW5kZXJDYWxsYmFjaygpO1xuICB9O1xuXG4gIGNvbnN0IHNob3dQcmV2V2VlayA9ICgpID0+IHtcbiAgICBjbGVhckNvbnRhaW5lckNhbGxiYWNrKCk7XG4gICAgY2xlYXJEYXRlc0NhbGxiYWNrKCk7XG4gICAgUHJvamVjdFN0YXRlLnN0YXJ0RGF5IC09IGZ1bGxEYXlJbk1pbGxpc2Vjb25kcyAqIDc7XG4gICAgcmVuZGVyQ2FsbGJhY2soKTtcbiAgfTtcblxuICBjb25zdCBuZXh0V2Vla0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iod2Vla0J1dHRvbnNTZWxlY3RvcnMubmV4dFdlZWtCdXR0b24pO1xuICBjb25zdCBwcmV2V2Vla0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iod2Vla0J1dHRvbnNTZWxlY3RvcnMucHJldldlZWtCdXR0b24pO1xuXG4gIG5leHRXZWVrQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2hvd05leHRXZWVrKTtcbiAgcHJldldlZWtCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzaG93UHJldldlZWspO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgaW5pdFN3aXRjaEJldHdlZW5XZWVrcztcbiIsImltcG9ydCB7IGxvY2FsU3RvcmFnZVRoZW1lS2V5IH0gZnJvbSAnLi4vY29uZmlnL2NvbnN0YW50cyc7XG5cbmNvbnN0IGluaXRUb2dnbGVDb2xvclRoZW1lID0gKHsgYm9keVNlbGVjdG9yLCBib2R5TmV3VGhlbWVDbGFzcywgYnV0dG9uU2VsZWN0b3IgfSkgPT4ge1xuICBjb25zdCBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihib2R5U2VsZWN0b3IpO1xuICBjb25zdCBjaGFuZ2VDb2xvclRoZW1lQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihidXR0b25TZWxlY3Rvcik7XG5cbiAgY29uc3QgaXNUaGVtZURhcmsgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKGxvY2FsU3RvcmFnZVRoZW1lS2V5KSk7XG5cbiAgaWYgKGlzVGhlbWVEYXJrKSB7XG4gICAgYm9keS5jbGFzc0xpc3QuYWRkKGJvZHlOZXdUaGVtZUNsYXNzKTtcbiAgfVxuXG4gIGNvbnN0IHRvZ2dsZUFuZE1lbW9UaGVtZSA9ICgpID0+IHtcbiAgICBpZiAoYm9keS5jbGFzc0xpc3QuY29udGFpbnMoYm9keU5ld1RoZW1lQ2xhc3MpKSB7XG4gICAgICBib2R5LmNsYXNzTGlzdC5yZW1vdmUoYm9keU5ld1RoZW1lQ2xhc3MpO1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0obG9jYWxTdG9yYWdlVGhlbWVLZXksIEpTT04uc3RyaW5naWZ5KGZhbHNlKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJvZHkuY2xhc3NMaXN0LmFkZChib2R5TmV3VGhlbWVDbGFzcyk7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShsb2NhbFN0b3JhZ2VUaGVtZUtleSwgSlNPTi5zdHJpbmdpZnkodHJ1ZSkpO1xuICAgIH1cbiAgfTtcblxuICBjaGFuZ2VDb2xvclRoZW1lQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlQW5kTWVtb1RoZW1lKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGluaXRUb2dnbGVDb2xvclRoZW1lO1xuIl0sIm5hbWVzIjpbIkFTU0lHTl9CWV9EQVRFIiwiYmFja2xvZ0NhcmRTZWxlY3RvcnMiLCJwYXJlbnRTZWxlY3RvciIsInRlbXBsYXRlU2VsZWN0b3IiLCJlbGVtZW50U2VsZWN0b3IiLCJ0aXRsZVNlbGVjdG9yIiwiZGVzY3JpcHRpb25TZWxlY3RvciIsInN0YXJ0RGF0ZVNlbGVjdG9yIiwiZW5kRGF0ZVNlbGVjdG9yIiwiZHJhZ1N0YXJ0Q2xhc3MiLCJ1c2Vyc0NhcmRTZWxlY3RvcnMiLCJ1c2VyTmFtZVNlbGVjdG9yIiwiZHJhZ092ZXJDbGFzcyIsImNhbGVuZGFyRGF0ZVNlbGVjdG9ycyIsImN1cnJlbnREYXlDbGFzcyIsImNhbGVuZGFyQ29sdW1uU2VsZWN0b3JzIiwiY2FsZW5kYXJDZWxsU2VsZWN0b3JzIiwiZWxlbWVudENsYXNzIiwiY2FsZW5kYXJUYXNrU2VsZWN0b3JzIiwic3VidGl0bGVTZWxlY3RvciIsImRhdGVTZXR0aW5ncyIsIndlZWtkYXkiLCJ5ZWFyIiwibW9udGgiLCJkYXkiLCJsb2NhbFN0b3JhZ2VUaGVtZUtleSIsInJlZmluZVRvU3RyaW5nIiwiZGF0ZSIsIkRhdGUiLCJ0b0xvY2FsZURhdGVTdHJpbmciLCJyZWZpbmVUb051bWVyaWNZWU1NREQiLCJjb25zdHJ1Y3RvciIsInRoaXMiLCJfc3Vic2NyaWJlcnMiLCJfYXNzaWduZWRUYXNrcyIsIl9iYWNrbG9nVGFza3MiLCJfdXNlcnMiLCJfdXNlcnNJZHMiLCJfY2FsZW5kYXJMZW5ndGgiLCJfY3VycmVudERhdGUiLCJfY3VycmVudERhdGVOdW1lcmljIiwiX3N0YXJ0RGF5IiwiX3VwZGF0ZUFuZFNldERhdGVzIiwiX3JlbW92ZVRhc2tGcm9tQmFja2xvZyIsInRhc2tJZCIsImZpbHRlciIsInRhc2siLCJpZCIsIl9jYWxsU3Vic2NyaWJlcnMiLCJmb3JFYWNoIiwibGlzdGVuZXIiLCJzdGFydERhdGUiLCJzZXRIb3VycyIsInNldERhdGUiLCJnZXREYXRlIiwiZ2V0RGF5IiwiYXNzaWduZWRUYXNrcyIsImJhY2tsb2dUYXNrcyIsInVzZXJzSWRzIiwidXNlcnMiLCJ2YWx1ZSIsImNhbGVuZGFyTGVuZ3RoIiwic3RhcnREYXkiLCJjdXJyZW50RGF0ZU51bWVyaWMiLCJhZGRUYXNrVG9Bc3NpZ25lZFRhc2tzIiwicHVzaCIsImFzc2lnblRhc2siLCJ0eXBlIiwiZXhlY3V0b3JJZCIsInRhc2tUb0JlQXNzaWduZWQiLCJmaW5kIiwiZXhlY3V0b3IiLCJwYXJzZSIsInBsYW5FbmREYXRlIiwicGxhblN0YXJ0RGF0ZSIsImRhdGVEaWZmZXJlbmNlIiwibmV3RW5kRGF0ZSIsImFkZFRhc2tUb0JhY2tsb2ciLCJtYXBVc2Vyc0lkcyIsImlkcyIsInJlZHVjZSIsIm9iaiIsImkiLCJhZGRTdWJzY3JpYmVycyIsInN1YnNjcmliZXJzIiwiYXN5bmMiLCJyb3V0ZSIsInJlcyIsImZldGNoIiwibWV0aG9kIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsIl90ZW1wbGF0ZVNlbGVjdG9yIiwiX2VsZW1lbnRTZWxlY3RvciIsIl9nZXRUZW1wbGF0ZSIsIl90ZW1wbGF0ZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJjYXJkRGF0YSIsInN1cGVyIiwiX2NhcmREYXRhIiwiX2JhY2tsb2dDYXJkIiwiX2RyYWdTdGFydENsYXNzIiwiX2NhcmRUaXRsZSIsIl9jYXJkRGVzY3JpcHRpb24iLCJfY2FyZFN0YXJ0RGF0ZSIsIl9jYXJkRW5kRGF0ZSIsIl9oYW5kbGVEcmFnU3RhcnQiLCJiaW5kIiwiX2hhbmRsZURyYWdFbmQiLCJldnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJkYXRhVHJhbnNmZXIiLCJzZXREYXRhIiwiZWZmZWN0QWxsb3dlZCIsInJlbW92ZSIsImNyZWF0ZUVsZW1lbnQiLCJ0ZXh0Q29udGVudCIsInN1YmplY3QiLCJkZXNjcmlwdGlvbiIsInNldEF0dHJpYnV0ZSIsInNldEV2ZW50TGlzdGVuZXJzIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNvbnRhaW5lclNlbGVjdG9yIiwiX2NvbnRhaW5lciIsImNsZWFySXRlbXMiLCJhZGRJdGVtIiwiaXRlbSIsImFwcGVuZCIsImFkZFRleHRDb250ZW50IiwiX3Rhc2siLCJfdGFza0VsZW1lbnQiLCJfdGl0bGVFTGVtZW50IiwiX3N1YnRpdGxlRUxlbWVudCIsIl9kZXNjcmlwdGlvbkVsZW1lbnQiLCJfc3RhcnREYXRlRWxlbWVudCIsIl9lbmREYXRlRWxlbWVudCIsImNlbGwiLCJfY2VsbCIsIl9jZWxsRWxlbWVudCIsIl9hZGRJdGVtIiwicmVuZGVySXRlbXMiLCJ0YXNrcyIsIm5ld1Rhc2siLCJjb2x1bW4iLCJfY29sdW1uIiwiX2NhbGVuZGFyQ29sdW1uIiwiX2RheVRhc2tzU2NoZW1hIiwiX2dldFRhc2tzRm9yQ3VycmVudERheSIsInBhcnNlZENvbHVtbkRhdGUiLCJfZ2V0RGF5VGFza3NTY2hlbWEiLCJfdGFza3NGb3JDdXJyZW50RGF5IiwiY3JlYXRlQ2VsbHMiLCJ1c2VySWQiLCJjb2x1bW5DZWxsIiwiY2VsbEVsZW1lbnQiLCJfZGF0ZSIsIl9jdXJyZW50RGF5Q2xhc3MiLCJfZGF0ZUVsZW1lbnQiLCJjZWxsRGF0ZSIsIl91c2VyQ2FyZCIsIl9mdWxsTmFtZUVsZW1lbnQiLCJfZHJhZ092ZXJDbGFzcyIsIl9oYW5kbGVEcmFnT3ZlciIsIl9oYW5kbGVEcmFnTGVhdmUiLCJfaGFuZGxlRHJvcCIsInR5cGVzIiwicHJldmVudERlZmF1bHQiLCJnZXREYXRhIiwiY3JlYXRlQ2FyZCIsImZpcnN0TmFtZSIsInN1cm5hbWUiLCJyZW1vdmVBbmltYXRpb24iLCJlbGVtZW50Iiwic2V0VGltZW91dCIsInJlbW92ZUF0dHJpYnV0ZSIsImFwcGx5U2xpZGVJbkJvdHRvbVVwQW5pbSIsImluZGV4IiwibGFzdEluZGV4IiwiYXBwbHlTbGlkZUluUmlnaHRMZWZ0QW5pbSIsInBhZ2UiLCJwcmVsb2FkZXIiLCJwb3B1cEVycm9yIiwic2VsZWN0b3JzIiwiX3NlbGVjdG9ycyIsIl9wb3B1cCIsIm9wZW4iLCJwb3B1cE9wZW5DbGFzcyIsIl9jbG9zZSIsImJhY2tsb2dMaXN0IiwidXNlcnNMaXN0IiwiZGF0ZXNDb250YWluZXIiLCJjYWxlbmRhckNvbnRhaW5lciIsInRhcmdldCIsImNvbnRhaW5zIiwiX2Ryb3BwYWJsZUNlbGwiLCJjbG9zZXN0IiwiZGF0YXNldCIsInJlbmRlckNhbGVuZGFyIiwiaXNBbmltYXRlZCIsInRoaXNEYXRlIiwiZGF0ZVN0cmluZyIsImRhdGVPYmplY3QiLCJjb2x1bW5PYmplY3QiLCJkYXRlRWxlbWVudCIsImNvbHVtbkVsZW1lbnQiLCJjcmVhdGVCYWNrbG9nQ2FyZCIsImJhY2tsb2dDYXJkIiwibmV3QmFja2xvZ0NhcmQiLCJyZW5kZXJCYWNrbG9nVGFza3MiLCJ1c2VyIiwidXNlckNhcmQiLCJuZXdVc2VyQ2FyZCIsInJlbmRlclVzZXJzIiwiZXJyIiwiZ2V0SW5pdGlhbERhdGEiLCJjb250YWluZXIiLCJjcmVhdGVDYXJkQ2FsbGJhY2siLCJyZW5kZXJDYWxsYmFjayIsInNlYXJjaEZvcm0iLCJzZWFyY2hJbnB1dCIsInN1Ym1pdEJ1dHRvbiIsImtleXdvcmQiLCJyZXN1bHQiLCJsZW5ndGgiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwiZGlzYWJsZWQiLCJjbGVhckNvbnRhaW5lckNhbGxiYWNrIiwiY2xlYXJEYXRlc0NhbGxiYWNrIiwibmV4dFdlZWtCdXR0b24iLCJwcmV2V2Vla0J1dHRvbiIsImZ1bGxEYXlJbk1pbGxpc2Vjb25kcyIsImJvZHlTZWxlY3RvciIsImJvZHlOZXdUaGVtZUNsYXNzIiwiYnV0dG9uU2VsZWN0b3IiLCJib2R5IiwiY2hhbmdlQ29sb3JUaGVtZUJ1dHRvbiIsIkpTT04iLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsImJ1dHRvbk5ld1RoZW1lQ2xhc3MiXSwic291cmNlUm9vdCI6IiJ9